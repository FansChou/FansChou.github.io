<?xml version="1.0" encoding="UTF-8"?><?xml-stylesheet href="/pretty-feed-v3.xsl" type="text/xsl"?><rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>å…­è„‰ç¥é—´</title><description>feedId:62371887095785472+userId:43276779907578880</description><link>https://www.fanschou.com/</link><item><title>ç”¨Redisæ»‘åŠ¨çª—å£è§£å†³CPU100%çš„é—®é¢˜</title><link>https://www.fanschou.com/posts/redis/redis-sliding-window/</link><guid isPermaLink="true">https://www.fanschou.com/posts/redis/redis-sliding-window/</guid><description>åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸­ï¼Œç»å¸¸éœ€è¦è€ƒè™‘çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯çº¿ç¨‹ä¹‹é—´çš„æ­»é”é—®é¢˜ï¼Œå¹¶ä¸”æ€»ç»“å‡ºäº†å¾ˆå¤šæœ€ä½³å®è·µï¼Œè¿™ç¯‡æ–‡ç« æˆ‘ä»¬å°±æ¥èŠèŠå¯¼è‡´æ­»é”çš„åŸå› ï¼Œä»¥åŠå¦‚ä½•é¿å…äº§ç”Ÿæ­»é”ã€‚</description><pubDate>Thu, 22 Sep 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;æœ€è¿‘æ¥äº†ä¸ªè€é¡¹ç›®çš„ç»´æŠ¤ï¼Œä¸å¤šè¯´äº†ï¼Œéƒ½æ˜¯å‘ï¼ˆæµæ³ªingï¼‰ï¼Œç„¶åå°±æ…¢æ…¢çš„è§£å†³ä¸€äº›é—®é¢˜ã€‚é¦–å…ˆå°±æ˜¯è¿™ä¸ªé¡¹ç›®ç”¨çš„Redisé›†ç¾¤æ€»æ˜¯å‘Šè­¦ï¼ŒCPUæ€»æ˜¯90%ä»¥ä¸Šï¼Œä¸¥é‡å½±å“äº†ä¸šåŠ¡çš„ç¨³å®šæ€§ï¼Œæ‰€ä»¥å…ˆå¯¹è¿™ä¸ªä¸‹æ‰‹ã€‚&lt;/p&gt;
&lt;h2&gt;åˆ†æé—®é¢˜&lt;/h2&gt;
&lt;p&gt;Redis çš„ CPU é£™å‡å¯èƒ½æœ‰å¾ˆå¤šåŸå› ï¼Œå…ˆä»æ…¢æ—¥å¿—å¼€å§‹æ’æŸ¥ï¼Œç«‹é©¬å°±å‘ç°äº†é—®é¢˜ï¼Œè¯·æ±‚ä¸­æœ‰å¤§é‡çš„ &lt;code&gt;keys&lt;/code&gt; å‘½ä»¤å»æ‰« keyï¼Œå¤§é‡çš„æ¨¡ç³Šæœç´¢ key å¯¼è‡´äº† Redis çš„ CPU å‡é«˜ã€‚ç„¶åæ ¹æ® &lt;code&gt;keys&lt;/code&gt; æ‰«æçš„ key å€¼å»ä»£ç ä¸­æŸ¥æ‰¾ï¼Œå‘ç°åŸºæœ¬é›†ä¸­åœ¨ä¸€å—ä¸šåŠ¡ä¸­ï¼Œè¿™é‡Œæˆ‘æŠ½è±¡ä¸€ä¸‹è¿™å—çš„ä¸šåŠ¡ï¼Œç®€å•æè¿°ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé¡¹ç›®åšçš„æ˜¯ä¸€ä¸ªè‡ªåŠ¨æ‰“ç”µè¯çš„ä¸šåŠ¡ï¼Œæ¯ä¸ªç”µè¯åœ¨ä¸€æ®µæ—¶é—´å†…åªèƒ½å‘¼å‡ºå›ºå®šæ¬¡æ•°ï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªå…³é”®ç‚¹ï¼š&lt;strong&gt;ä¸€æ®µæ—¶é—´å†…&lt;/strong&gt;å’Œ&lt;strong&gt;å›ºå®šæ¬¡æ•°&lt;/strong&gt;ã€‚é¡¹ç›®è€ä»£ç çš„å®ç°å°±ç§€äº†å•Šï¼Œæ¯æ¬¡æ‹¨æ‰“ä¹‹åå­˜ä¸€ä¸ª key ï¼Œæ ¼å¼ç±»ä¼¼äº &lt;code&gt;call_ç”µè¯å·ç _æ—¶é—´æˆ³&lt;/code&gt; ï¼Œç„¶å key çš„è¿‡æœŸæ—¶é—´å°±è®¾ç½®æˆå‰é¢è¯´çš„&lt;strong&gt;ä¸€æ®µæ—¶é—´å†…&lt;/strong&gt;è¿™ä¸ªæ—¶é—´é•¿åº¦ã€‚å½“è¿›è¡Œæ‹¨æ‰“å‰ç½®æ ¡éªŒæ—¶ï¼Œç›´æ¥é€šè¿‡ &lt;code&gt;keys call_ç”µè¯å·ç _*&lt;/code&gt; æ‰«ææ‹¿åˆ°è¿™ä¸ªç”µè¯æ‰“è¿‡çš„æ¬¡æ•°ï¼Œå› ä¸ºè®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œæ‰€ä»¥æœ‰æ•ˆçš„ key çš„ä¸ªæ•°ï¼Œå°±æ˜¯ä¸€æ®µæ—¶é—´å†…å·²ç»å‘¼å‡ºçš„æ¬¡æ•°ï¼Œå†ç”¨è¿™ä¸ªæ¬¡æ•°å’Œé˜ˆå€¼æ¯”è¾ƒå³å¯ã€‚ä»è¿™ä¸ªæ–¹é¢æ¥è¯´ï¼Œè¿™ä¸ªæ–¹æ¡ˆç¡®å®ä¹Ÿå®ç°äº†ä¸šåŠ¡è¦æ±‚ï¼Œä½†æ˜¯ Redis å°±è¢«ä¸€æ¬¡æ¬¡çš„ &lt;code&gt;keys&lt;/code&gt; å‘½ä»¤æ‰«çˆ†äº†ã€‚&lt;/p&gt;
&lt;h2&gt;æ–°çš„è§£å†³æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;åœ¨åŸå› åˆ†æä¸­ï¼Œå…¶å®å·²ç»å‘ç°äº†ï¼Œæˆ‘ä»¬éœ€è¦ç»Ÿè®¡ä¸€æ®µæ—¶é—´å†…çš„ç”µè¯æ‹¨æ‰“æ¬¡æ•°ï¼Œå› ä¸ºæ—¶é—´å¾€å‰èµ°çš„å…³ç³»ï¼Œè¿™ä¸ª&lt;strong&gt;ä¸€æ®µæ—¶é—´&lt;/strong&gt;æ‰€å›Šæ‹¬çš„æ—¶é—´èŒƒå›´ä¹Ÿæ˜¯ä¸æ–­å¾€å‰ç§»åŠ¨çš„ã€‚è¿™ä¸ªåœºæ™¯å°±å¾ˆç†Ÿæ‚‰äº†ï¼Œå°±æ˜¯å…¸å‹çš„æ»‘åŠ¨çª—å£é—®é¢˜ï¼Œè€Œç”¨ Redis å»å®ç°çš„è¯ï¼Œæœ‰æ¯”å‰é¢é‚£ç§æ›´ä¼˜é›…çš„æ–¹å¼ã€‚è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨äº† &lt;code&gt;zset&lt;/code&gt; å»å®ç°æ»‘åŠ¨çª—å£ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä»¥ &lt;code&gt;call_ç”µè¯å·ç &lt;/code&gt; ä½œä¸º &lt;code&gt;zset&lt;/code&gt; çš„keyï¼Œç„¶åæ¯æ‰“ä¸€ä¸ªç”µè¯ï¼Œå¾€è¿™ä¸ª &lt;code&gt;zset&lt;/code&gt; æ·»åŠ ä¸€ä¸ª value å’Œ score ï¼Œ value è¿™é‡Œæˆ‘ä»¬ç”¨äº†æ—¶é—´æˆ³ï¼Œå› ä¸ºä¼°ç®—çš„å¹¶å‘å¯ä»¥ç¡®ä¿è¿™ä¸ª value ä¸ä¼šé‡å¤ï¼Œè¿™é‡Œè¦æ³¨æ„ä¸€ç‚¹ï¼Œå°±æ˜¯ value ä¸€å®šè¦ç¡®ä¿ä¸èƒ½é‡å¤ï¼Œå¦åˆ™ &lt;code&gt;zset&lt;/code&gt; çš„æ•°é‡æ˜¯ä¸å‡†çš„ï¼Œå¯èƒ½æ¯”ä½ å®é™…çš„æ•°é‡åå°ï¼› score è¿™é‡Œç”¨çš„ä¹Ÿæ˜¯æ—¶é—´æˆ³ï¼Œå½“æ¥è¯·æ±‚æ ¡éªŒçš„æ—¶å€™ï¼Œå…ˆä½¿ç”¨ &lt;code&gt;zremrangeByScore&lt;/code&gt; å‘½ä»¤ï¼Œç§»é™¤æ‰è¶…è¿‡æ—¶é—´åŒºé—´çš„ value ï¼Œç„¶å &lt;code&gt;zcard&lt;/code&gt; å‘½ä»¤å†å»ç»Ÿè®¡ value çš„æ•°é‡ï¼Œå°±æ˜¯æˆ‘ä»¬è¦çš„ä¸€æ®µæ—¶é—´å†…å·²ç»å‘¼å‡ºçš„æ¬¡æ•°ã€‚è¿™é‡Œè¿ç»­æ“ä½œäº†ä¸¤æ¬¡ Redis ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ &lt;code&gt;pipeline&lt;/code&gt; å»æŠŠæ“ä½œæ”¾åœ¨ä¸€èµ·ã€‚&lt;/p&gt;
&lt;h2&gt;ä»£ç å®ç°&lt;/h2&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ç”¨ Java å†™ä¸€ä¸‹ç®€å•çš„æ ·æ¿ï¼Œç”¨çš„æ˜¯ Jedis æ“ä½œ Redis ã€‚&lt;/p&gt;
&lt;p&gt;æ·»åŠ è®°å½•çš„åœ°æ–¹å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸€æ¡ &lt;code&gt;zadd&lt;/code&gt; å‘½ä»¤ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;jedis.zadd(key, score, member);
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç„¶ååœ¨åˆ¤æ–­é™åˆ¶çš„åœ°æ–¹ï¼Œè·å– &lt;code&gt;zset&lt;/code&gt; çš„æ•°é‡ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/**
 * æŸ¥çœ‹é™æµå‘¨æœŸå†…çš„è¡Œä¸ºæ¬¡æ•°
 *
 * @param key           è¡Œä¸ºkey
 * @param period        é™æµå‘¨æœŸ,unit=second
 * @return
 */
public long getActivityTimes(String key, int period) {
    long count = 0L;
    try(Jedis jedis = getJedis()){
        long ts = System.currentTimeMillis();
        Pipeline pipe = jedis.pipelined();
        pipe.multi();
        // ç§»é™¤æ»‘åŠ¨çª—å£ä¹‹å¤–çš„æ•°æ®
        pipe.zremrangeByScore(key, 0, ts - (period * 1000.0));
        Response&amp;lt;Long&amp;gt; zcount = pipe.zcard(key);
        // è®¾ç½®è¡Œä¸ºçš„è¿‡æœŸæ—¶é—´ï¼Œå¦‚æœæ•°æ®ä¸ºå†·æ•°æ®ï¼Œzsetå°†ä¼šåˆ é™¤ä»¥æ­¤èŠ‚çœå†…å­˜ç©ºé—´
        pipe.expire(key, period);
        pipe.exec();
        pipe.close();
        count = zcount.get();
    } catch (Exception e) {
        log.error(&quot;redis getActivityTimes error, key: {}&quot;, key, e);
    }

    return count;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œå…ˆç”¨ &lt;code&gt;zremrangeByScore&lt;/code&gt; åˆ é™¤è¿‡æœŸçš„ value ï¼Œç„¶å &lt;code&gt;zcard&lt;/code&gt; ç»Ÿè®¡æ•°é‡ï¼ŒåŒæ—¶è®¾ç½®äº† key çš„è¿‡æœŸæ—¶é—´ï¼Œé¿å…é•¿æœŸå ç”¨å†…å­˜ã€‚&lt;/p&gt;
&lt;h2&gt;ä¼˜åŒ–å&lt;/h2&gt;
&lt;p&gt;ä¸Šè¿°çš„æ”¹åŠ¨å‘å¸ƒä¹‹åï¼ŒRedisçš„CPUå ç”¨å°±ç›´çº¿ä¸‹é™äº†ï¼Œè¯´æ˜è¿™æ¬¡çš„ä¼˜åŒ–è¿˜æ˜¯å¾ˆæœ‰æˆæ•ˆçš„ã€‚
&lt;img src=&quot;https://images.fanschou.com/blog/redis-sliding-window/20220922_01_001.webp&quot; alt=&quot;Redisçš„CPUå ç”¨&quot; /&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä¹Ÿæœ‰ç›¸å…³ç±»ä¼¼çš„é—®é¢˜ï¼Œä¹Ÿå¯ä»¥å‚è€ƒè¿™ç§æ–¹æ¡ˆï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å•çº¯ä½¿ç”¨æ»‘åŠ¨çª—å£ç”¨åœ¨åˆ«çš„ä¸šåŠ¡å®ç°ä¸Šã€‚å¸Œæœ›ä½ ä¹Ÿèƒ½æœ‰æ‰€æ”¶è·ã€‚&lt;/p&gt;
</content:encoded><author>Fan Zhou</author></item><item><title>ä½¿ç”¨acmeç”³è¯·TLSè¯ä¹¦</title><link>https://www.fanschou.com/posts/devops/apply-for-TLS-certificate-using-acme/</link><guid isPermaLink="true">https://www.fanschou.com/posts/devops/apply-for-TLS-certificate-using-acme/</guid><description>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨acmeç”³è¯·TLSè¯ä¹¦ï¼Œå¹¶å°†TLSè¯ä¹¦å®‰è£…åˆ°æŒ‡å®šçš„ç›®å½•ä¸‹</description><pubDate>Tue, 06 Sep 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;å½“å‰äº’è”ç½‘ä¸­æœ€å¤šçš„æµé‡åº”è¯¥æ˜¯HTTPæµé‡ï¼Œä½†æ˜¯HTTPæµé‡ç›¸å½“äºæ˜¯æ˜æ–‡çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å¼€æ”¾çš„äº’è”ç½‘ä¸­ï¼Œå®ƒæ˜¯æ¯«æ— ä¿æŠ¤çš„ä¿¡æ¯ã€‚éšç€æ—¶ä»£çš„å‘å±•ï¼Œè¶Šæ¥è¶Šå¤šçš„ç½‘ç«™ä¼šä¸ºè‡ªå·±çš„HTTPæµé‡å¥—ä¸Šä¸€å±‚åŠ å¯†ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„HTTPSæµé‡ï¼Œå®ƒä¸HTTPæµé‡çš„åŒºåˆ«å°±æ˜¯å®ƒæœ‰ä¸€å±‚TLSåŠ å¯†ï¼Œæ•´ä¸ªåŠ å¯†çš„åŸç†åŠæµç¨‹ï¼Œä¸æ˜¯æœ¬ç¯‡æ–‡ç« çš„é‡ç‚¹ï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦ä¼šæŒ‡å¯¼ä½ å¦‚ä½•ç”³è¯·ä¸€ä¸ªTLSè¯ä¹¦ã€‚
TLSåˆšå‡ºæ¥çš„æ—¶å€™ï¼Œå¤§å¤šéƒ½æ˜¯éœ€è¦ä»˜è´¹è·å¾—ï¼Œè¿™å°±å¯¼è‡´äº†å¤§éƒ¨åˆ†å°ç«™ç‚¹çš„ç«™é•¿å¯èƒ½ä¸æ„¿æ„æˆ–è€…æ²¡æœ‰èƒ½åŠ›æ¯å¹´å»è´Ÿæ‹…è¿™ä¸ªè´¹ç”¨ï¼Œå¥½éšç€ HTTPS çš„æ™®åŠï¼Œå‡ºç°äº†ä¸€äº›å…è´¹æä¾›TLSè¯ä¹¦çš„æœºæ„ï¼Œæ‰€äº§ç”Ÿçš„ä¸æ–¹ä¾¿ä¹‹å¤„ä¹Ÿä¸è¿‡æ˜¯è¯ä¹¦æœ‰æ•ˆæœŸæ¯”è¾ƒçŸ­ï¼Œè¿™å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œæ˜¯å±äºå¯ä»¥å…‹æœçš„å›°éš¾ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨letsencryptæä¾›çš„å…è´¹è¯ä¹¦æœåŠ¡ã€‚
ä¸ºäº†æ–¹ä¾¿çš„ç”³è¯·è¯ä¹¦è€Œä¸éœ€è¦ä¸è¯ä¹¦æœºæ„çš„APIæ‰“äº¤é“ï¼Œç½‘ç»œä¸Šä¹Ÿæœ‰å¾ˆå¤šçš„å·¥å…·ï¼Œè¿™é‡Œæˆ‘ä¼šä½¿ç”¨ä¸€ä¸ªå«åš &lt;a href=&quot;https://github.com/acmesh-official/acme.sh&quot;&gt;acme.sh&lt;/a&gt; çš„è¯ä¹¦ç®¡ç†å·¥å…·ï¼Œå®ƒç®€å•ã€è½»é‡ã€é«˜æ•ˆï¼Œå¹¶å¯å®Œæˆè¯ä¹¦è‡ªåŠ¨æ›´æ–°ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ï½&lt;/p&gt;
&lt;h2&gt;å®‰è£… &lt;code&gt;acme.sh&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨å®˜æ–¹å®‰è£…è„šæœ¬&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget -O -  https://get.acme.sh | sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ™®é€šç”¨æˆ·å’Œ root ç”¨æˆ·éƒ½å¯ä»¥å®‰è£…ä½¿ç”¨ã€‚è„šæœ¬ä¼šæŠŠç›¸å…³æ–‡ä»¶éƒ½æ”¾åœ¨&lt;code&gt;~/.acme.sh/&lt;/code&gt;ä¸‹ï¼Œå¹¶åˆ›å»º ä¸€ä¸ª bash çš„ alias, æ–¹ä¾¿ä½ çš„ä½¿ç”¨ï¼š &lt;code&gt;alias acme.sh=~/.acme.sh/acme.sh&lt;/code&gt;ï¼Œå®‰è£…è¿‡ç¨‹ä¸ä¼šæ±¡æŸ“å·²æœ‰çš„ç³»ç»Ÿä»»ä½•åŠŸèƒ½å’Œæ–‡ä»¶, æ‰€æœ‰çš„ä¿®æ”¹éƒ½é™åˆ¶åœ¨å®‰è£…ç›®å½•ä¸­: &lt;code&gt;~/.acme.sh/&lt;/code&gt;ã€‚å½“ç„¶ä¹Ÿæœ‰å…¶ä»–é«˜çº§çš„å®‰è£…é€‰é¡¹ï¼Œå¯ä»¥è‡ªè¡ŒæŸ¥çœ‹å®˜ç½‘çš„&lt;a href=&quot;https://github.com/acmesh-official/acme.sh/wiki/How-to-install&quot;&gt;å®‰è£…æ•™ç¨‹&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å°è¯•æ‰§è¡Œ&lt;code&gt;acme.sh&lt;/code&gt;ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¯èƒ½ä¼šæç¤ºå‘½ä»¤ä¸å­˜åœ¨ï¼Œé€šè¿‡åˆ·æ–°ä¸€ä¸‹ç¯å¢ƒç”Ÿæ•ˆé…ç½®ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;. .bashrc
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è®¾ç½®è‡ªåŠ¨æ›´æ–°acme&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;acme.sh --upgrade --auto-upgrade
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å› ä¸º&lt;code&gt;acme.sh&lt;/code&gt;ç›®å‰æ”¯æŒä¸æ­¢ä¸€ä¸ªå…è´¹è¯ä¹¦æ³¨å†Œæœºæ„ï¼Œè¿™é‡Œæˆ‘ä»¬è®¾ç½®é»˜è®¤ä¸º&lt;code&gt;letsencrypt&lt;/code&gt;ï¼Œ&lt;code&gt;acme.sh&lt;/code&gt;æœ¬èº«é»˜è®¤çš„&lt;code&gt;zerossl&lt;/code&gt;éœ€è¦é‚®ç®±ï¼Œè¿˜æ˜¯&lt;code&gt;letsencrypt&lt;/code&gt;æ›´ç®€å•æ›´å¹¿æ³›åº”ç”¨ä¸€ç‚¹ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;acme.sh --set-default-ca --server letsencrypt
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;è¯ä¹¦ç”³è¯·&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;acme.sh&lt;/code&gt;æ”¯æŒä¸¤ç§æ–¹å¼éªŒè¯: &lt;strong&gt;HTTP&lt;/strong&gt; å’Œ &lt;strong&gt;DNS éªŒè¯&lt;/strong&gt;ã€‚æˆ‘ä¸ªäººæ›´æ¨è&lt;strong&gt;DNS éªŒè¯&lt;/strong&gt;ï¼Œè¿™ç§æ–¹å¼çš„å¥½å¤„æ˜¯ï¼Œä½ ä¸éœ€è¦ä»»ä½•æœåŠ¡å™¨ï¼Œä¸éœ€è¦ä»»ä½•å…¬ç½‘IPï¼Œåªéœ€è¦ DNS çš„è§£æè®°å½•å³å¯å®ŒæˆéªŒè¯ã€‚åå¤„æ˜¯ï¼Œå¦‚æœä¸åŒæ—¶é…ç½® &lt;code&gt;Automatic DNS API&lt;/code&gt;ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼ &lt;code&gt;acme.sh&lt;/code&gt; å°†æ— æ³•è‡ªåŠ¨æ›´æ–°è¯ä¹¦ï¼Œæ¯æ¬¡éƒ½éœ€è¦æ‰‹åŠ¨å†æ¬¡é‡æ–°è§£æéªŒè¯åŸŸåæ‰€æœ‰æƒã€‚ä¸‹é¢ä¼šä»¥&lt;strong&gt;DNS éªŒè¯&lt;/strong&gt;ä¸ºä¾‹ä»‹ç»è¯ä¹¦ç”³è¯·ã€‚&lt;/p&gt;
&lt;h3&gt;dnséªŒè¯ç”³è¯·è¯ä¹¦&lt;/h3&gt;
&lt;h4&gt;æ‰‹åŠ¨è®¾ç½®DNSè®°å½•ç”³è¯·&lt;/h4&gt;
&lt;p&gt;æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;acme.sh --issue --dns -d ä¸‰çº§åŸŸå.mydomain.com --keylength ec-256 --log \
 --yes-I-know-dns-manual-mode-enough-go-ahead-please
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ—¶ï¼Œacme.sh ä¼šç”Ÿæˆç›¸åº”çš„è§£æè®°å½•æ˜¾ç¤ºå‡ºæ¥ï¼Œä¼šæœ‰ä¸€ä¸ªtxtè®°å½•çš„keyï¼Œæ ¼å¼ä¸º&lt;code&gt;_acme-challenge.ä½ çš„ä¸‰çº§åŸŸå&lt;/code&gt;ï¼Œç„¶åæœ‰ä¸€ä¸²å­—ç¬¦ä¸²ä½œä¸ºå€¼ï¼Œä½ åªéœ€è¦åœ¨ä½ çš„åŸŸåç®¡ç†é¢æ¿ä¸­æ·»åŠ è¿™æ¡ txt è®°å½•å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images.fanschou.com/blog/apply-for-TLS-certificate-using-acme/20220906_01_001.webp&quot; alt=&quot;DNSè®°å½•&quot; /&gt;&lt;/p&gt;
&lt;p&gt;ç­‰å¾…è§£æå®Œæˆä¹‹å, é‡æ–°ç”Ÿæˆè¯ä¹¦:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;acme.sh --renew -d ä¸‰çº§åŸŸå.mydomain.com --keylength ec-256 --log \
  --yes-I-know-dns-manual-mode-enough-go-ahead-please
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ³¨æ„ç¬¬äºŒæ¬¡å’Œç¬¬ä¸€æ¬¡ä¸åŒçš„åœ°æ–¹ï¼Œè¿™é‡Œç”¨çš„æ˜¯&lt;code&gt;--renew&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œå†è§£é‡Šä¸€ä¸‹ç”¨åˆ°çš„å‡ ä¸ªå‚æ•°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;--log&lt;/code&gt;ï¼šè¿™ä¸ªæ˜¯ç”¨æ¥æ‰“å°æ—¥å¿—çš„ï¼Œå¦‚æœæœ‰æŠ¥é”™å¯ä»¥çœ‹åˆ°&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--keylength&lt;/code&gt;ï¼šè¿™ä¸ªç”¨æ¥æŒ‡å®šè¯ä¹¦ç±»å‹ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ECCè¯ä¹¦ï¼Œå½“ç„¶ä½ å¯ä»¥ä½¿ç”¨RSAè¯ä¹¦ï¼ŒæŒ‰éœ€é€‰æ‹©&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¦‚æœæ‹…å¿ƒè‡ªå·±æ“ä½œæœ‰é—®é¢˜æ€ä¹ˆåŠï¼Ÿå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤ä¸­åŠ å…¥æµ‹è¯•çš„å‚æ•°&lt;code&gt;--issue --test&lt;/code&gt;æ¥éªŒè¯æ˜¯å¦å¯ä»¥æˆåŠŸç”³è¯·ï¼Œè¿™æ ·å¯ä»¥é¿å…åœ¨æœ¬åœ°é…ç½®æœ‰è¯¯æ—¶ï¼Œåå¤ç”³è¯·è¯ä¹¦å¤±è´¥ï¼Œè¶…è¿‡ &lt;code&gt;Let&apos;s Encrypt&lt;/code&gt; çš„é¢‘ç‡ä¸Šé™ï¼ˆæ¯”å¦‚ï¼Œæ¯å°æ—¶ã€æ¯ä¸ªåŸŸåã€æ¯ä¸ªç”¨æˆ·å¤±è´¥æœ€å¤š 5 æ¬¡ï¼‰ï¼Œå¯¼è‡´åé¢çš„æ­¥éª¤æ— æ³•è¿›è¡Œã€‚å¦‚æœå‡ºç°é—®é¢˜å¯ä»¥å†åŠ ä¸Š&lt;code&gt;--debug&lt;/code&gt;å‚æ•°ï¼ŒæŸ¥çœ‹è¯¦ç»†çš„ç”³è¯·è¿‡ç¨‹å’Œå…·ä½“çš„é”™è¯¯ã€‚&lt;/p&gt;
&lt;h4&gt;DNS APIè‡ªåŠ¨ç”³è¯·&lt;/h4&gt;
&lt;p&gt;DNS æ–¹å¼çš„çœŸæ­£å¼ºå¤§ä¹‹å¤„åœ¨äºå¯ä»¥ä½¿ç”¨åŸŸåè§£æå•†æä¾›çš„ API è‡ªåŠ¨æ·»åŠ  txt è®°å½•å®ŒæˆéªŒè¯ã€‚&lt;code&gt;acme.sh&lt;/code&gt; ç›®å‰æ”¯æŒ cloudflareï¼Œdnspodï¼Œcloudxnsï¼Œgodaddy ä»¥åŠ ovh ç­‰æ•°åç§è§£æå•†çš„è‡ªåŠ¨é›†æˆã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ dnspod ä¸ºä¾‹, ä½ éœ€è¦å…ˆç”¨ dnspod è´¦å·ç™»å½•åˆ°&lt;a href=&quot;https://developer.godaddy.com/keys&quot;&gt;å¼€å‘è€…å¹³å°&lt;/a&gt;ï¼Œç‚¹å‡»ç”ŸæˆAPI KeyæŒ‰é’®
&lt;img src=&quot;https://images.fanschou.com/blog/apply-for-TLS-certificate-using-acme/20220906_01_002.webp&quot; alt=&quot;åˆ›å»ºAPI Key&quot; /&gt;&lt;/p&gt;
&lt;p&gt;é€‰æ‹©ç”Ÿäº§ç¯å¢ƒï¼Œç›´æ¥ä¸‹ä¸€æ­¥ï¼Œç”Ÿæˆä½ çš„ API id å’Œ API Keyã€‚
&lt;img src=&quot;https://images.fanschou.com/blog/apply-for-TLS-certificate-using-acme/20220906_01_003.webp&quot; alt=&quot;ç”ŸæˆAPI Key&quot; /&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨åˆšåˆšç”³è¯·çš„ API id å’Œ API Keyï¼Œæ‰§è¡Œå‘½ä»¤ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;export DP_Id=&quot;yourapiid&quot;
export DP_Key=&quot;youapikey&quot;
acme.sh --issue --dns dns_gd -d ä¸‰çº§åŸŸå.mydomain.com --keylength ec-256 --log
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¯ä¹¦å°±ä¼šè‡ªåŠ¨ç”Ÿæˆäº†ã€‚è¿™é‡Œç»™å‡ºçš„ API id å’Œ API Key ä¼šè¢«è‡ªåŠ¨è®°å½•ä¸‹æ¥ï¼Œå°†æ¥ä½ åœ¨ä½¿ç”¨ dnspod API çš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦å†æ¬¡æŒ‡å®šäº†ã€‚ç›´æ¥ç”Ÿæˆå°±å¥½äº†ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;acme.sh  --issue   -d  ä¸‰çº§åŸŸå.mydomain.com   --dns  dns_dp
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¯ä»¥æŸ¥çœ‹å®˜æ–¹&lt;a href=&quot;https://github.com/acmesh-official/acme.sh/wiki/dnsapi&quot;&gt;æ›´è¯¦ç»†çš„ API ç”¨æ³•&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;å®‰è£…è¯ä¹¦&lt;/h2&gt;
&lt;p&gt;å‰é¢ç”³è¯·å®Œçš„è¯ä¹¦å…¶å®éƒ½æ˜¯åœ¨&lt;code&gt;~/.acme.sh/&lt;/code&gt;ä¸­çš„ï¼Œä¸€èˆ¬æˆ‘ä»¬çš„è¯ä¹¦ä¼šç”¨åœ¨åˆ«çš„åœ°æ–¹ï¼Œè¿™ä¸ªæ—¶å€™é€šè¿‡&lt;code&gt;acme.sh&lt;/code&gt;çš„å‘½ä»¤å¯ä»¥ç›´æ¥å°†è¯ä¹¦å®‰è£…åˆ°ç›®æ ‡ä½ç½®&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;acme.sh --install-cert -d ä¸‰çº§åŸŸå.mydomain.com \
--cert-file      /path/to/certfile/in/apache/cert.pem  \
--key-file       /path/to/keyfile/in/apache/key.pem  \
--fullchain-file /path/to/fullchain/certfile/apache/fullchain.pem \
--reloadcmd     &quot;service nginx force-reload&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;--install-cert&lt;/code&gt;å‘½ä»¤å¯ä»¥æºå¸¦å¾ˆå¤šå‚æ•°ï¼Œæ¥æŒ‡å®šç›®æ ‡æ–‡ä»¶ã€‚å¹¶ä¸”å¯ä»¥æŒ‡å®š &lt;code&gt;reloadcmd&lt;/code&gt;ï¼Œå½“è¯ä¹¦æ›´æ–°ä»¥åï¼Œ&lt;code&gt;reloadcmd&lt;/code&gt;ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼Œè®©æœåŠ¡å™¨ç”Ÿæ•ˆã€‚&lt;/p&gt;
&lt;p&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡ŒæŒ‡å®šçš„æ‰€æœ‰å‚æ•°éƒ½ä¼šè¢«è‡ªåŠ¨è®°å½•ä¸‹æ¥ï¼Œå¹¶åœ¨å°†æ¥è¯ä¹¦è‡ªåŠ¨æ›´æ–°ä»¥åï¼Œè¢«å†æ¬¡è‡ªåŠ¨è°ƒç”¨ã€‚&lt;/p&gt;
&lt;h2&gt;æŸ¥çœ‹å·²å®‰è£…è¯ä¹¦ä¿¡æ¯&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;acme.sh --info -d ä¸‰çº§åŸŸå.mydomain.com
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;æ›´æ–°è¯ä¹¦&lt;/h2&gt;
&lt;p&gt;ç›®å‰è¯ä¹¦åœ¨ 60 å¤©ä»¥åä¼šè‡ªåŠ¨æ›´æ–°ï¼Œä½ æ— éœ€ä»»ä½•æ“ä½œã€‚æ³¨æ„ï¼Œå¦‚æœä½ æ˜¯é€šè¿‡å‰é¢è¯´çš„æ‰‹åŠ¨è®¾ç½®DNSè®°å½•çš„æ–¹å¼ç”³è¯·çš„è¯ä¹¦ï¼Œé‚£ä¹ˆä¸ä¼šè¿›è¡Œè‡ªåŠ¨æ›´æ–°ã€‚&lt;/p&gt;
&lt;p&gt;è¯·ç¡®ä¿ cronjob æ­£ç¡®å®‰è£…ï¼Œçœ‹èµ·æ¥æ˜¯ç±»ä¼¼è¿™æ ·çš„:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;crontab  -l
56 * * * * &quot;/root/.acme.sh&quot;/acme.sh --cron --home &quot;/root/.acme.sh&quot; &amp;gt; /dev/null
&lt;/code&gt;&lt;/pre&gt;
</content:encoded><author>Fan Zhou</author></item><item><title>macOSä¸‹Launchdçš„ä»‹ç»å’Œä½¿ç”¨</title><link>https://www.fanschou.com/posts/install/tutorial-of-launchd-in-macos/</link><guid isPermaLink="true">https://www.fanschou.com/posts/install/tutorial-of-launchd-in-macos/</guid><description>æœ¬æ–‡ä»‹ç»äº†macOSä¸‹Launchdçš„ä»‹ç»å’Œä½¿ç”¨</description><pubDate>Fri, 19 Aug 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Linux ä¸Šå¦‚æœæƒ³åå°è¿è¡Œä¸€ä¸ªæœåŠ¡ï¼Œæˆ–è€…æƒ³å®šæ—¶è¿è¡ŒæŸäº›è„šæœ¬æœ‰å¾ˆå¤šçš„é€‰æ‹©ï¼Œæ¯”å¦‚ä½¿ç”¨Systemdæˆ–è€…ç”¨crontabä¹Ÿå¯ä»¥ï¼Œè€Œæˆ‘æ‰‹å¤´ç”¨çš„ç³»ç»Ÿæ˜¯macOSï¼Œæœ€è¿‘éœ€è¦åœ¨æœ¬æœºåå°è¿è¡Œä¸€äº›è„šæœ¬ï¼Œåœ¨ç½‘ä¸Šæœäº†ä¸€ä¸‹ï¼ŒmacOSæœ‰ä¸€ä¸ªç±»ä¼¼çš„å« Launchd çš„ç³»ç»Ÿï¼Œå¯¹åº”ä½¿ç”¨&lt;code&gt;launchctl&lt;/code&gt;å‘½ä»¤æ§åˆ¶ï¼Œå¯ä»¥è¾¾åˆ°ç±»ä¼¼çš„æ•ˆæœã€‚&lt;/p&gt;
&lt;h2&gt;Daemons and Agents&lt;/h2&gt;
&lt;p&gt;Launchd ç®¡ç† Daemons å’Œ Agents ä¸¤ç§ç±»å‹çš„ä»»åŠ¡ï¼Œé…ç½®æ–‡ä»¶åˆ†åˆ«å­˜æ”¾åœ¨ä¸åŒçš„æ–‡ä»¶å¤¹ä¸‹ï¼Œä¸¤ç±»ä»»åŠ¡ä¸»è¦çš„åŒºåˆ«æ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Agents æ˜¯ç”¨æˆ·ç™»å½•åæ‰§è¡Œçš„&lt;/li&gt;
&lt;li&gt;Daemons æ˜¯å¼€æœºåå°±æ‰§è¡Œï¼Œå¯ä»¥é€šè¿‡&lt;code&gt;UserName&lt;/code&gt;æŒ‡å®šç”¨æˆ·æ¯”å¦‚&lt;code&gt;root&lt;/code&gt;ç”¨æˆ·&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;é…ç½®æ–‡ä»¶&lt;/h2&gt;
&lt;p&gt;Launchd é…ç½®æ–‡ä»¶ä»¥&lt;code&gt;.plist&lt;/code&gt;ç»“å°¾ï¼Œæœ¬è´¨ä¸Šæ˜¯&lt;code&gt;xml&lt;/code&gt;æ ¼å¼çš„æ–‡ä»¶ï¼ŒDaemons å’Œ Agents å„è‡ªå­˜æ”¾çš„è·¯å¾„ä¹Ÿä¸åŒï¼Œå…·ä½“å¦‚ä¸‹è¡¨ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;è·¯å¾„&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;User Agents&lt;/td&gt;
&lt;td&gt;~/Library/LaunchAgents&lt;/td&gt;
&lt;td&gt;ç”¨æˆ· Agents å½“å‰ç”¨æˆ·ç™»å½•æ—¶è¿è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Global Agents&lt;/td&gt;
&lt;td&gt;/Library/LaunchAgents&lt;/td&gt;
&lt;td&gt;å…¨å±€ Agents ä»»ä½•ç”¨æˆ·ç™»å½•æ—¶éƒ½ä¼šè¿è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Global Daemons&lt;/td&gt;
&lt;td&gt;/System/Library/LaunchAgents&lt;/td&gt;
&lt;td&gt;ç³»ç»Ÿ Agents ä»»ä½•ç”¨æˆ·ç™»å½•æ—¶éƒ½ä¼šè¿è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;System Agents&lt;/td&gt;
&lt;td&gt;/Library/LaunchDaemons&lt;/td&gt;
&lt;td&gt;å…¨å±€ Daemons å†…æ ¸åˆå§‹åŒ–åŠ è½½å®Œåå°±è¿è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;System Daemons&lt;/td&gt;
&lt;td&gt;/System/Library/LaunchDaemons&lt;/td&gt;
&lt;td&gt;ç³»ç»Ÿ Daemons å†…æ ¸åˆå§‹åŒ–åŠ è½½å®Œåå°±è¿è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;æ–‡ä»¶æ ¼å¼&lt;/h3&gt;
&lt;p&gt;ä¸€èˆ¬é…ç½®æ–‡ä»¶åéƒ½ä»¥&lt;code&gt;com.domain.programName.plist&lt;/code&gt;æ ¼å¼å‘½åï¼Œä¸ç®¡æ˜¯ Daemons è¿˜æ˜¯ Agents ï¼Œå®ƒä»¬çš„é…ç½®æ–‡ä»¶æ ¼å¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯å­˜æ”¾ä½ç½®ä¸åŒã€‚çœ‹ä¸‹é¢ä¸€ä¸ª hello world çš„ä¾‹å­Â &lt;code&gt;~/Library/LaunchAgents/com.example.helloword.plist&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&amp;gt;
&amp;lt;plist version=&quot;1.0&quot;&amp;gt;
    &amp;lt;dict&amp;gt;
        
        &amp;lt;key&amp;gt;Label&amp;lt;/key&amp;gt;
        &amp;lt;string&amp;gt;com.fanschou.helloword&amp;lt;/string&amp;gt;

        &amp;lt;key&amp;gt;StandardOutPath&amp;lt;/key&amp;gt;
        &amp;lt;string&amp;gt;/Users/fanschou/logs/stdout.log&amp;lt;/string&amp;gt;

        &amp;lt;key&amp;gt;ProgramArguments&amp;lt;/key&amp;gt;
        &amp;lt;array&amp;gt;
            &amp;lt;string&amp;gt;/bin/echo&amp;lt;/string&amp;gt;
            &amp;lt;string&amp;gt;hello world&amp;lt;/string&amp;gt;
        &amp;lt;/array&amp;gt;
        
    &amp;lt;/dict&amp;gt;
&amp;lt;/plist&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥å‘ç°å…¶å®å°±æ˜¯ä¸€ä¸ªxmlæ ¼å¼çš„æ–‡ä»¶ï¼Œé™¤äº†åŒ…è£¹ç€æ•´ä½“çš„&lt;code&gt;plist&lt;/code&gt;å’Œ&lt;code&gt;dict&lt;/code&gt;ä¹‹å¤–ï¼Œå†…éƒ¨åŸºæœ¬å°±æ˜¯ä¸€ä¸ª&lt;code&gt;key&lt;/code&gt;å¯¹åº”ä¸€ä¸ªè¿™ä¸ª&lt;code&gt;key&lt;/code&gt;å…·ä½“çš„å€¼ï¼Œè¿™ä¸ªå€¼å¯ä»¥æ˜¯&lt;code&gt;string&lt;/code&gt;ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª&lt;code&gt;array&lt;/code&gt;æ•°ç»„ã€‚
ä¸Šé¢çš„æ ·ä¾‹å®šä¹‰äº†ä¸€ä¸ªæœ€ç®€å•çš„ä»»åŠ¡ï¼Œåªä½¿ç”¨äº†&lt;code&gt;Label&lt;/code&gt;å’Œ&lt;code&gt;ProgramAgruments&lt;/code&gt;ä¸¤ä¸ªé”®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Label&lt;/code&gt;è¿™æ˜¯ä¸ªå¿…é¡»çš„é”®ï¼ŒæŒ‡å®šè¿™ä¸ªä»»åŠ¡å&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ProgramArguments&lt;/code&gt;æ˜¯å¸¦å‚æ•°çš„å¯æ‰§è¡Œæ–‡ä»¶æˆ–è€…è„šæœ¬ï¼Œä¸Šé¢ç­‰åŒäºè¿è¡Œ&lt;code&gt;/bin/echo hello world&lt;/code&gt;å‘½ä»¤ï¼Œå¦‚æœæ‰§è¡Œçš„ç¨‹åºä¸å¸¦å‚æ•°å¯ä»¥ä½¿ç”¨&lt;code&gt;Program&lt;/code&gt;é”®ï¼Œä½†ä¸€ä¸ªä»»åŠ¡ä¸­å¿…é¡»åŒ…å«è¿™ä¸¤ä¸ªä¸­çš„å…¶ä¸­ä¸€ä¸ªé”®&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿˜æœ‰ä¸€äº›å¸¸ç”¨çš„é”®åï¼Œæ‰€æœ‰çš„é”®å¯é€šè¿‡&lt;code&gt;man 5 launchd.plist&lt;/code&gt;æŸ¥çœ‹æˆ–è€…å‚è€ƒ&lt;a href=&quot;https://www.launchd.info/&quot;&gt;è¿™é‡Œ&lt;/a&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;key&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Disabled&lt;/td&gt;
&lt;td&gt;æ˜¯å¦ä¸ç”Ÿæ•ˆï¼ˆlaunchd å¿½ç•¥ï¼Œä¸æ‰§è¡Œï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;EnvironmentVariables&lt;/td&gt;
&lt;td&gt;è®¾ç½®è¿è¡Œç¯å¢ƒå˜é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;GroupName&lt;/td&gt;
&lt;td&gt;å¯åŠ¨è¿›ç¨‹çš„ç”¨æˆ·ç»„ã€‚åªåœ¨ Daemons å¯ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;KeepAlive&lt;/td&gt;
&lt;td&gt;æ˜¯å¦è®¾ç½®ç¨‹åºæ˜¯ä¸€ç›´å­˜æ´»ç€ï¼Œå¦‚æœé€€å‡ºå°±é‡å¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ProcessType&lt;/td&gt;
&lt;td&gt;è¿›ç¨‹ç±»å‹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;RunAtLoad&lt;/td&gt;
&lt;td&gt;æ˜¯å¦å†åŠ è½½çš„æ—¶å€™å°±è¿è¡Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;StandardOutPath&lt;/td&gt;
&lt;td&gt;æ ‡å‡†è¾“å‡ºåˆ°æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;StandardErrorPath&lt;/td&gt;
&lt;td&gt;æ ‡å‡†é”™è¯¯åˆ°æ–‡ä»¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;StartInterval&lt;/td&gt;
&lt;td&gt;è®¾ç½®ç¨‹åºæ¯éš”å¤šå°‘ç§’è¿è¡Œä¸€æ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;StartCalendarInterval&lt;/td&gt;
&lt;td&gt;è®¾ç½®ç¨‹åºå…·ä½“è¿è¡Œæ—¶é—´ï¼Œç±»ä¼¼cronè¡¨è¾¾å¼&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;UserName&lt;/td&gt;
&lt;td&gt;è®¾ç½®ç”¨æˆ·ååªåœ¨ Daemons å¯ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;WorkingDirectory&lt;/td&gt;
&lt;td&gt;è®¾ç½®å·¥ä½œç›®å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;åˆ©ç”¨è¿™äº›keyï¼Œè¿™é‡Œç»™å‡ºä¸€ä¸ªå®Œæ•´ä¸€ç‚¹æ¨¡æ¿å‚è€ƒï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;!DOCTYPE plist PUBLIC &quot;-//Apple Computer//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&amp;gt;
&amp;lt;plist version=&quot;1.0&quot;&amp;gt;
    &amp;lt;dict&amp;gt;
        &amp;lt;key&amp;gt;Label&amp;lt;/key&amp;gt;
        &amp;lt;string&amp;gt;com.fanschou.macos.helloword&amp;lt;/string&amp;gt;
        
        &amp;lt;key&amp;gt;Disabled&amp;lt;/key&amp;gt;
        &amp;lt;false/&amp;gt;
        
        &amp;lt;key&amp;gt;KeepAlive&amp;lt;/key&amp;gt;
        &amp;lt;true/&amp;gt;

        &amp;lt;key&amp;gt;RunAtLoad&amp;lt;/key&amp;gt;
        &amp;lt;true/&amp;gt;
        
        &amp;lt;key&amp;gt;ProcessType&amp;lt;/key&amp;gt;
        &amp;lt;string&amp;gt;Background&amp;lt;/string&amp;gt;
        
        &amp;lt;key&amp;gt;ProgramArguments&amp;lt;/key&amp;gt;
        &amp;lt;array&amp;gt;
            &amp;lt;string&amp;gt;/bin/echo&amp;lt;/string&amp;gt;
            &amp;lt;string&amp;gt;hello world&amp;lt;/string&amp;gt;
        &amp;lt;/array&amp;gt;
        
        &amp;lt;key&amp;gt;UserName&amp;lt;/key&amp;gt;
        &amp;lt;string&amp;gt;root&amp;lt;/string&amp;gt;
        
        &amp;lt;key&amp;gt;GroupName&amp;lt;/key&amp;gt;
        &amp;lt;string&amp;gt;wheel&amp;lt;/string&amp;gt;

        &amp;lt;key&amp;gt;StandardErrorPath&amp;lt;/key&amp;gt;
        &amp;lt;string&amp;gt;/Users/fanschou/logs/stderr.log&amp;lt;/string&amp;gt;

        &amp;lt;key&amp;gt;StandardOutPath&amp;lt;/key&amp;gt;
        &amp;lt;string&amp;gt;/Users/fanschou/logs/stdout.log&amp;lt;/string&amp;gt;

        &amp;lt;key&amp;gt;WorkingDirectory&amp;lt;/key&amp;gt;
        &amp;lt;string&amp;gt;/Users/fanschou/dev/script&amp;lt;/string&amp;gt;

        &amp;lt;!-- æ¯éš”60sè¿è¡Œä¸€æ¬¡ï¼Œä¸ä¸‹é¢çš„ä¸å¯åŒæ—¶è®¾ç½®--&amp;gt;
        &amp;lt;key&amp;gt;StartInterval&amp;lt;/key&amp;gt;
        &amp;lt;integer&amp;gt;60&amp;lt;/integer&amp;gt;

        &amp;lt;!-- æ¯å¤©10ç‚¹åŠè¿è¡Œä¸€æ¬¡ï¼Œä¸ä¸Šé¢çš„ä¸å¯åŒæ—¶è®¾ç½®--&amp;gt;
        &amp;lt;key&amp;gt;StartCalendarInterval&amp;lt;/key&amp;gt;
        &amp;lt;dict&amp;gt;
            &amp;lt;key&amp;gt;Minute&amp;lt;/key&amp;gt;
            &amp;lt;integer&amp;gt;30&amp;lt;/integer&amp;gt;
            &amp;lt;key&amp;gt;Hour&amp;lt;/key&amp;gt;
            &amp;lt;integer&amp;gt;10&amp;lt;/integer&amp;gt;
        &amp;lt;/dict&amp;gt;

        &amp;lt;key&amp;gt;EnvironmentVariables&amp;lt;/key&amp;gt;
        &amp;lt;dict&amp;gt;
            &amp;lt;!-- è®¾ç½®PATHï¼Œç”¨äºæ‰¾ä¸åˆ°å‘½ä»¤çš„æ—¶å€™--&amp;gt;
            &amp;lt;key&amp;gt;PATH&amp;lt;/key&amp;gt;
            &amp;lt;string&amp;gt;&amp;lt;![CDATA[/usr/local/bin:/usr/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin]]&amp;gt;&amp;lt;/string&amp;gt;
            &amp;lt;!-- è®¾ç½®ç½‘ç»œä»£ç†--&amp;gt;
            &amp;lt;key&amp;gt;http_proxy&amp;lt;/key&amp;gt;
            &amp;lt;string&amp;gt;&amp;lt;![CDATA[http://127.0.0.1:1080]]&amp;gt;&amp;lt;/string&amp;gt;
        &amp;lt;/dict&amp;gt;

    &amp;lt;/dict&amp;gt;
&amp;lt;/plist&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;æµ‹è¯•æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®&lt;/h3&gt;
&lt;p&gt;å†™å®Œ&lt;code&gt;.plist&lt;/code&gt;æ–‡ä»¶ä¹‹åï¼Œå¯ä»¥é€šè¿‡&lt;code&gt;plutil&lt;/code&gt;å‘½ä»¤æµ‹è¯•ä¸€ä¸‹æ–‡ä»¶æ ¼å¼æœ‰æ²¡æœ‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;plutil ~/Library/LaunchAgents/com.fanschou.helloword.plist
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ˜¾ç¤ºï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/Users/fanschou/Library/LaunchAgents/com.fanschou.helloword.plist: OK
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;æ“ä½œ&lt;/h2&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å°±åŠ è½½å’Œè¿è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œä¸Šé¢å®šä¹‰äº†&lt;code&gt;~/Library/LaunchAgents/com.fanschou.helloword.plist&lt;/code&gt;ï¼Œé…ç½®ä¸­æŠŠæ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°äº†&lt;code&gt;/Users/fanschou/logs/stdout.log&lt;/code&gt;ï¼Œæˆ‘ä»¬è¿è¡Œæµ‹è¯•ä¸‹ã€‚&lt;/p&gt;
&lt;h3&gt;åŠ è½½ä»»åŠ¡&lt;/h3&gt;
&lt;p&gt;ç¬¬ä¸€æ­¥éœ€è¦è¿›è¡Œ&lt;strong&gt;åŠ è½½(load)&lt;/strong&gt;ï¼Œä½¿ç”¨&lt;code&gt;launchctl load &amp;lt;path&amp;gt;&lt;/code&gt;å‘½ä»¤ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;launchctl load -w ~/Library/LaunchAgents/com.fanschou.helloword.plist
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œæ³¨æ„ï¼Œ&lt;code&gt;launchctl load &amp;lt;path&amp;gt;&lt;/code&gt;åªä¼šåŠ è½½æ²¡æœ‰è¢«&lt;strong&gt;disable&lt;/strong&gt;çš„ä»»åŠ¡ï¼Œå¯ä»¥åŠ &lt;code&gt;-w&lt;/code&gt;å‚æ•°Â &lt;code&gt;launchctl load -w &amp;lt;path&amp;gt;&lt;/code&gt;è¦†ç›–ã€‚&lt;/p&gt;
&lt;h3&gt;å¯åŠ¨ä»»åŠ¡&lt;/h3&gt;
&lt;p&gt;ç„¶åæ‰‹åŠ¨&lt;strong&gt;å¯åŠ¨(start)&lt;/strong&gt; ä»»åŠ¡ï¼Œå¦‚æœé…ç½®ä¸­è®¾ç½®äº†&lt;code&gt;RunAtLoad&lt;/code&gt;æˆ–è€…&lt;code&gt;KeepAlive&lt;/code&gt;ä¸º&lt;code&gt;true&lt;/code&gt;ï¼Œåˆ™åœ¨&lt;code&gt;launchctl load&lt;/code&gt;æ—¶å°±ä¼šå¯åŠ¨ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;launchctl start ~/Library/LaunchAgents/com.fanschou.helloword.plist
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬æŸ¥çœ‹&lt;code&gt;/Users/fanschou/logs/stdout.log&lt;/code&gt;ä¼šæœ‰æ—¥å¿—è¾“å‡ºã€‚å› ä¸ºè¿™æ˜¯ä¸€ä¸ªä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œæ‰€ä»¥æ­£å¸¸è¿è¡Œå®Œå°±ä¼šé€€å‡ºï¼Œå¦‚æœæ˜¯è¿è¡Œä¸€äº›æœåŠ¡çš„è¯ï¼Œå°±ä¼šä»¥ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹çš„æ¨¡å¼ä¸€ç›´è¿è¡Œï¼Œç›´åˆ°æ‰‹åŠ¨åœæ­¢ï¼Œæˆ–è€…æŠ¥é”™é€€å‡ºã€‚&lt;/p&gt;
&lt;h3&gt;ç®¡ç†ä»»åŠ¡&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;launchctl list&lt;/code&gt;åˆ—å‡ºå½“å‰åŠ è½½çš„ä»»åŠ¡ï¼Œç¬¬ä¸€åˆ—ä»£è¡¨è¿›ç¨‹IDï¼Œå› ä¸ºä¸Šé¢çš„hellowordç¨‹åºè¿è¡Œä¸€æ¬¡å°±é€€å‡ºäº†æ‰€ä»¥æ˜¾ç¤º&lt;code&gt;-&lt;/code&gt;ï¼Œè¿è¡Œä¸­çš„åˆ™æ˜¾ç¤ºè¿›ç¨‹IDï¼›ç¬¬äºŒåˆ—æ˜¯ç¨‹åºä¸Šæ¬¡è¿è¡Œé€€å‡ºçš„codeï¼Œ&lt;code&gt;0&lt;/code&gt;ä»£è¡¨æ­£å¸¸é€€å‡ºï¼Œå¦‚æœæ˜¯æ­£æ•°ä»£è¡¨é€€å‡ºçš„æ—¶å€™æ˜¯æœ‰é”™è¯¯çš„ï¼Œè´Ÿæ•°ä»£è¡¨æ˜¯æ¥æ”¶åˆ°ä¿¡å·è¢«ç»ˆæ­¢çš„&lt;/p&gt;
&lt;h3&gt;é€€å‡ºä»»åŠ¡&lt;/h3&gt;
&lt;p&gt;å½“ä¸æƒ³è¿è¡Œä»»åŠ¡æ—¶ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤&lt;code&gt;launchctl stop &amp;lt;service_name&amp;gt;&lt;/code&gt;æŒ‡å®šæœåŠ¡åç»ˆæ­¢æœåŠ¡ï¼Œæˆ–è€…é€šè¿‡&lt;code&gt;launchctl stop &amp;lt;path&amp;gt;&lt;/code&gt;æŒ‡å®šè·¯å¾„è¿›è¡Œç»ˆæ­¢ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;launchctl stop com.fanschou.helloword
launchctl stop ~/Library/LaunchAgents/com.fanschou.helloword.plist
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;å¸è½½ä»»åŠ¡&lt;/h3&gt;
&lt;p&gt;å¦‚æœä¸æƒ³å†ä½¿ç”¨ä»»åŠ¡äº†çš„è¯ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å°†ä»»åŠ¡å¸è½½æ‰ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤&lt;code&gt;launchctl unload &amp;lt;path&amp;gt;&lt;/code&gt;æŒ‡å®šè·¯å¾„å¸è½½ä¸€ä¸ªä»»åŠ¡ï¼Œæˆ–è€…é€šè¿‡&lt;code&gt;launchctl remove &amp;lt;service_name&amp;gt;&lt;/code&gt;æŒ‡å®šæœåŠ¡åå¸è½½ä»»åŠ¡ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;launchctl remove com.fanschou.helloword
launchctl unload ~/Library/LaunchAgents/com.fanschou.helloword.plist
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;launchctl unload &amp;lt;path&amp;gt;&lt;/code&gt;åªä¼šåœæ­¢å’Œå¸è½½è¿™ä¸ªä»»åŠ¡ï¼Œä½†ä¸‹æ¬¡å¯åŠ¨è¿˜ä¼šåŠ è½½ï¼Œä¸åŠ è½½ä»»åŠ¡çš„å‘½ä»¤ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨&lt;code&gt;-w&lt;/code&gt;å‚æ•°&lt;code&gt;launchctl unload -w &amp;lt;path&amp;gt;&lt;/code&gt;åœæ­¢ä»»åŠ¡ï¼Œä¸‹æ¬¡å¯åŠ¨ä¹Ÿä¸ä¼šèµ·æ¥ï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºæ ‡è®°äº†&lt;strong&gt;disable&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;è°ƒè¯•ä»»åŠ¡&lt;/h3&gt;
&lt;p&gt;å¦‚æœä»»åŠ¡è·‘ä¸èµ·æ¥çš„è¯ï¼Œå¯ä»¥å…ˆå°è¯•ä½¿ç”¨&lt;code&gt;plutil&lt;/code&gt;å‘½ä»¤æ£€æŸ¥è¯­æ³•ï¼Œç„¶åè®¾ç½®&lt;code&gt;StandardOutPath&lt;/code&gt;ã€&lt;code&gt;StandardErrorPath&lt;/code&gt;ã€&lt;code&gt;Debug&lt;/code&gt;é”®ï¼ŒæŸ¥çœ‹å…·ä½“è¾“å‡ºçš„æ—¥å¿—è¿›è¡Œè°ƒè¯•ã€‚&lt;/p&gt;
</content:encoded><author>Fan Zhou</author></item><item><title>æ’åºç®—æ³•ç³»åˆ—ä¹‹æ’å…¥æ’åº</title><link>https://www.fanschou.com/posts/algorithm/algorithm-insertion-sort/</link><guid isPermaLink="true">https://www.fanschou.com/posts/algorithm/algorithm-insertion-sort/</guid><description>æœ¬ç¯‡æ–‡ç« ä»‹ç»äº†å¸¸è§çš„æ’åºç®—æ³•â€”â€”æ’å…¥æ’åºçš„æ’åºè¿‡ç¨‹ï¼ŒèŠä¸€èŠå®ƒçš„æ—¶é—´å¤æ‚åº¦å’Œç¨³å®šæ€§ï¼Œä»¥åŠå¯ä»¥å¯¹å®ƒè¿›è¡Œçš„ä¸€äº›ä¼˜åŒ–ã€‚</description><pubDate>Wed, 18 May 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰çš„ç®—æ³•æè¿°æ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚ä¸¾ä¾‹æ¥è¯´çš„è¯ï¼Œå¾ˆåƒæˆ‘ä»¬å­¦ç”Ÿæ—¶ä»£ï¼Œç¬¬ä¸€æ¬¡åšè¯¾é—´æ“æ’é˜Ÿçš„æƒ…å†µï¼ŒæŒ‰èº«é«˜ä¸€ä¸ªä¸ªå¾€é˜Ÿä¼é‡Œé¢å®‰æ’ï¼Œæœ€åæ¯ä¸ªåšæ“çš„é˜Ÿåˆ—å°±æ˜¯ä¸¥æ ¼æŒ‰èº«é«˜é€’å¢çš„ã€‚ä»Šå¤©æˆ‘ä»¬è¿˜æ˜¯ä»ç®—æ³•æœ¬èº«ã€æ—¶é—´å¤æ‚åº¦ä»¥åŠç¨³å®šæ€§æ–¹é¢æ¥çœ‹çœ‹æ’å…¥æ’åºï¼Œå¹¶ä¸”æ€è€ƒä¸€ä¸‹èƒ½åšæ€æ ·çš„ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœæ²¡æœ‰äº†è§£è¿‡è¯¸å¦‚å¤æ‚åº¦ã€ç¨³å®šæ€§ç­‰ç›¸å…³ç®—æ³•ç›¸å…³çš„æ¦‚å¿µï¼Œå¯ä»¥å…ˆå»çœ‹çœ‹&lt;a href=&quot;https://www.fanschou.com/algorithm/algorithm-sort-opening/&quot;&gt;æ’åºç®—æ³•ç³»åˆ—ä¹‹å¼€ç¯‡&lt;/a&gt;ï¼Œé‡Œé¢æœ‰å¤§æ¦‚çš„ä»‹ç»ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;æ’åºæ€æƒ³&lt;/h2&gt;
&lt;p&gt;ä¼ ç»Ÿæ’å…¥æ’åºçš„å·¥ä½œåŸç†æ˜¯é€šè¿‡é€æ­¥æ„å»ºæœ‰åºåºåˆ—ï¼Œæœ€ç»ˆå®Œæˆæ•´ä¸ªåºåˆ—çš„æ’å¸ƒã€‚å¯¹äºæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚æ’å…¥æ’åºåœ¨å®ç°ä¸Šï¼Œé€šå¸¸é‡‡ç”¨å°±åœ°æ’åºï¼ˆå³åªéœ€ç”¨åˆ°O(1)çš„é¢å¤–ç©ºé—´çš„æ’åºï¼‰ï¼Œå› è€Œåœ¨ä»åå‘å‰æ‰«æè¿‡ç¨‹ä¸­ï¼Œéœ€è¦åå¤æŠŠå·²æ’åºå…ƒç´ é€æ­¥å‘åæŒªä½ï¼Œä¸ºæœ€æ–°å…ƒç´ æä¾›æ’å…¥ç©ºé—´ã€‚&lt;/p&gt;
&lt;h2&gt;æ’åºè¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªå¾…æ’åºçš„é˜Ÿåˆ—ï¼š[16, 24, 7, 43, 32, 11, 15, 30, 28, 38]ï¼Œæˆ‘ä»¬æŒ‰ä¸‹é¢çš„æ’åºè¿‡ç¨‹è¿›è¡Œæ’åºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åº&lt;/li&gt;
&lt;li&gt;å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æ&lt;/li&gt;
&lt;li&gt;å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºé˜Ÿåˆ—ä¸­çš„ï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®&lt;/li&gt;
&lt;li&gt;é‡å¤æ­¥éª¤â‘¢ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®&lt;/li&gt;
&lt;li&gt;å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®å&lt;/li&gt;
&lt;li&gt;é‡å¤æ­¥éª¤â‘¡~â‘¤&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬å®Œæ•´çš„çœ‹ä¸€éåŠ¨ç”»æ¼”ç¤º
&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-insertion-sort/20220518_01_001.gif&quot; alt=&quot;æ’å…¥æ’åºå®Œæ•´åŠ¨ç”»&quot; /&gt;&lt;/p&gt;
&lt;h2&gt;ä»£ç å®ç°&lt;/h2&gt;
&lt;p&gt;äº†è§£äº†æ’å…¥æ’åºçš„æ•´ä¸ªæ’åºè¿‡ç¨‹ï¼Œæˆ‘ä»¬ç”¨ä»£ç å°†å®ƒå®ç°ä¸€é&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public class InsertionSort {
   public static int[] insertionSort(int[] arr) {
        if (arr == null || arr.length &amp;lt; 2) {
            return arr;
        }
        int left = 0;
        int right = arr.length - 1;
        for (int i = left, j = i; i &amp;lt; right; j = ++i) {
            int ai = arr[i + 1];
            while (ai &amp;lt; arr[j]) {
                arr[j + 1] = arr[j];
                if (j-- == left) {
                    break;
                }
            }
            arr[j + 1] = ai;
        }
        return arr;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;æ€§èƒ½åˆ†æ&lt;/h3&gt;
&lt;p&gt;åˆ†æä¸€ä¸‹ä¸Šé¢å®ç°çš„å¤æ‚åº¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¹³å‡æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)&lt;/li&gt;
&lt;li&gt;æœ€å·®æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)&lt;/li&gt;
&lt;li&gt;ç©ºé—´å¤æ‚åº¦ï¼šO(1)&lt;/li&gt;
&lt;li&gt;ç¨³å®šæ€§ï¼šç¨³å®š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœæ’å…¥æ’åºçš„ç›®æ ‡æ˜¯æŠŠnä¸ªå…ƒç´ çš„åºåˆ—å‡åºæ’åˆ—ï¼Œé‚£ä¹ˆé‡‡ç”¨æ’å…¥æ’åºå­˜åœ¨æœ€å¥½æƒ…å†µå’Œæœ€åæƒ…å†µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœ€å¥½æƒ…å†µï¼šåºåˆ—å·²ç»æ˜¯å‡åºæ’åˆ—ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦è¿›è¡Œçš„æ¯”è¾ƒæ“ä½œéœ€(n-1)æ¬¡å³å¯ã€‚&lt;/li&gt;
&lt;li&gt;æœ€åæƒ…å†µï¼šåºåˆ—æ˜¯é™åºæ’åˆ—ï¼Œé‚£ä¹ˆæ­¤æ—¶éœ€è¦è¿›è¡Œçš„æ¯”è¾ƒå…±æœ‰n(n-1)/2æ¬¡ã€‚
æ’å…¥æ’åºçš„èµ‹å€¼æ“ä½œæ˜¯æ¯”è¾ƒæ“ä½œçš„æ¬¡æ•°å‡å»(n-1)æ¬¡ã€‚å¹³å‡æ¥è¯´æ’å…¥æ’åºç®—æ³•å¤æ‚åº¦ä¸ºO(nÂ²)ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ€ä¼˜çš„ç©ºé—´å¤æ‚åº¦ä¸ºå¼€å§‹å…ƒç´ å·²æ’åºï¼Œåˆ™ç©ºé—´å¤æ‚åº¦ä¸º 0ï¼›
æœ€å·®çš„ç©ºé—´å¤æ‚åº¦ä¸ºå¼€å§‹å…ƒç´ ä¸ºé€†æ’åºï¼Œåˆ™ç©ºé—´å¤æ‚åº¦æœ€åæ—¶ä¸º O(N);
å¹³å‡çš„ç©ºé—´å¤æ‚åº¦ä¸ºO(1)&lt;/p&gt;
&lt;h3&gt;ä»£ç ä¼˜åŒ–&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬ä»”ç»†è§‚å¯Ÿæ’åºçš„è¿‡ç¨‹ï¼Œå¯ä»¥å‘ç°ç›´æ¥æ’å…¥æ’åºæ¯æ¬¡å¾€å‰æ’å…¥æ—¶ï¼Œæ˜¯æŒ‰é¡ºåºä¾æ¬¡å¾€å‰æŸ¥æ‰¾ï¼Œæ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œå¿…ç„¶æ¯”è¾ƒè€—æ—¶ï¼Œæ•ˆç‡ä½ã€‚æˆ‘ä»¬å¯ä»¥é‡‡å–äºŒåˆ†æŸ¥æ‰¾çš„æ–¹å¼å»å®šä½è¦æ’å…¥çš„ä½ç½®ï¼Œç„¶åè¿›è¡Œæ’å…¥ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„&lt;strong&gt;æŠ˜åŠæ’å…¥&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;äºŒåˆ†æ’å…¥æ’åºç›¸å¯¹ç›´æ¥æ’å…¥æ’åºè€Œè¨€ï¼šå¹³å‡æ€§èƒ½æ›´å¿«ï¼Œæ—¶é—´å¤æ‚åº¦é™è‡³O(NlogN)ï¼Œæ’åºæ˜¯ç¨³å®šçš„ï¼Œä½†æ’åºçš„æ¯”è¾ƒæ¬¡æ•°ä¸åˆå§‹åºåˆ—æ— å…³ï¼Œç›¸æ¯”ç›´æ¥æ’å…¥æ’åºï¼Œåœ¨é€Ÿåº¦ä¸Šæœ‰ä¸€å®šæå‡ã€‚é€»è¾‘æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åº&lt;/li&gt;
&lt;li&gt;å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­äºŒåˆ†æŸ¥æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„æ•°çš„ä½ç½®&lt;/li&gt;
&lt;li&gt;å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®å&lt;/li&gt;
&lt;li&gt;é‡å¤ä¸Šè¿°ä¸¤æ­¥&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt;public static void binaryInsertSort(int[] arr) {
    int left;
    int right;
    int len = arr.length;
    for (int i = 1; i &amp;lt; len; i++) {
        int key = arr[i];
        left = 0;
        right = i - 1;
        while (left &amp;lt;= right) {
            int mid = (left + right) / 2;
            if (arr[mid] &amp;gt; key) {
                right = mid - 1;
            } else {
                left = mid + 1;
            }
        }

        if (i - left &amp;gt;= 0) {
            System.arraycopy(arr, left, arr, left + 1, i - left);
        }

        arr[left] = key;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æ’å…¥æ’åºçš„æ€»ä½“æ€è·¯æ˜¯å°†æœªæ’åºçš„å…ƒç´ å¾€å·²æ’åºçš„é˜Ÿåˆ—ä¸­æ’å…¥ï¼Œä¸å¯é¿å…çš„æ¶‰åŠåˆ°å…ƒç´ çš„ç§»åŠ¨ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸é€‚åˆå¯¹äºæ•°æ®é‡æ¯”è¾ƒå¤§çš„æ’åºåº”ç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœéœ€è¦æ’åºçš„æ•°æ®é‡å¾ˆå°ï¼Œé‚£ä¹ˆæ’å…¥æ’åºè¿˜æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚å°¤å…¶å½“æ•°æ®åŸºæœ¬æœ‰åºæ—¶ï¼Œé‡‡ç”¨æ’å…¥æ’åºå¯ä»¥æ˜æ˜¾å‡å°‘æ•°æ®äº¤æ¢å’Œæ•°æ®ç§»åŠ¨æ¬¡æ•°ï¼Œè¿›è€Œæå‡æ’åºæ•ˆç‡ã€‚ åœ¨Javaçš„JDKå·¥å…·ç±»ä¸­ï¼Œæ¯”å¦‚Arrays.sortçš„åº•å±‚æ’åºç®—æ³•ä¸­ï¼Œéƒ½å°†æ’å…¥æ’åºä½œä¸ºå¿«é€Ÿæ’åºçš„è¡¥å……ï¼Œç”¨äºå°‘é‡å…ƒç´ çš„æ’åºã€‚è¿™éƒ¨åˆ†åé¢ä¹Ÿä¼šè¿›è¡Œè¯¦ç»†çš„æ·±å…¥æºç æ¢ç©¶ã€‚&lt;/p&gt;
&lt;p&gt;åˆ°è¿™é‡Œï¼Œå°±ä»‹ç»å®Œäº†æœ‰å…³æ’å…¥æ’åºç›¸å…³çš„ä¸€äº›çŸ¥è¯†ï¼Œå¦‚æœä½ å‘ç°æ–‡ä¸­æœ‰ä»»ä½•é”™è¯¯ï¼Œæ¬¢è¿é€šè¿‡&lt;a href=&quot;https://www.fanschou.com/author/#%E5%85%B3%E4%BA%8E%E7%AB%99%E7%82%B9&quot;&gt;å…³äºç«™ç‚¹&lt;/a&gt;çš„è”ç³»æ–¹å¼è¿›è¡Œåé¦ˆã€‚&lt;/p&gt;
</content:encoded><author>Fan Zhou</author></item><item><title>è“„æ°´æ± æŠ½æ ·ç®—æ³•â€”â€”è§£å†³ä»¥ç›¸åŒæ¦‚ç‡æŠ½å–æ ·æœ¬çš„é—®é¢˜</title><link>https://www.fanschou.com/posts/algorithm/algorithm-reservoir-sampling/</link><guid isPermaLink="true">https://www.fanschou.com/posts/algorithm/algorithm-reservoir-sampling/</guid><description>æœ¬ç¯‡æ–‡ç« ä»‹ç»äº†è“„æ°´æ± æŠ½æ ·ç®—æ³•ï¼Œæ˜¯ä¸€ç§ç”¨æ¥è§£å†³æœªçŸ¥æ ·æœ¬æ•°é‡çš„æƒ…å†µä¸‹ï¼Œä»¥ç›¸åŒæ¦‚ç‡æŠ½å–æ ·æœ¬çš„é—®é¢˜çš„ç®—æ³•</description><pubDate>Thu, 12 May 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;é—®é¢˜å¼•å…¥&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨è§£å†³ä¸€äº›ç®—æ³•é—®é¢˜æ—¶ï¼Œä¼šé‡åˆ°ä¸€ç§è¦æ±‚ï¼šåœ¨æŠ½å–æ ·æœ¬æ—¶ï¼Œä¿è¯æ¯ä¸ªæ ·æœ¬è¢«æŠ½å–çš„æ¦‚ç‡æ˜¯ä¸€æ ·çš„ã€‚é€šå¸¸è¿™ç§æƒ…å†µä¸‹ï¼Œç»™å®šæ ·æœ¬çš„æ•°é‡æ˜¯ç¡®å®šçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¯¹æ ·æœ¬ç¼–å·ï¼Œç„¶ååœ¨ [1, æ ·æœ¬æ•°é‡] ä¹‹ä¸­éšæœºä¸€ä¸ªæ•°å­—ï¼Œç„¶åå–è¿™ä¸ªæ•°å­—å¯¹åº”ç¼–å·çš„æ ·æœ¬ï¼Œå°±å¯ä»¥è¾¾åˆ°æŠ½å–æ¦‚ç‡ä¸€è‡´çš„è¦æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆï¼Œæˆ‘ä»¬è€ƒè™‘å†å¤æ‚ä¸€ç‚¹çš„æƒ…å†µï¼Œå¦‚æœæˆ‘ä»¬æå‰ä¸çŸ¥é“æ ·æœ¬æ€»æ•°ï¼Œå¦‚ä½•ä¿è¯æœ€åæŠ½å–çš„æ ·æœ¬æ¦‚ç‡æ˜¯ä¸€è‡´çš„ï¼Ÿè¿™ç¯‡æ–‡ç« ä»‹ç»çš„è“„æ°´æ± æŠ½æ ·ç®—æ³•å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç…§ä¾‹ï¼Œè¿˜æ˜¯é€‰æ‹©ä¸€é“leetcodeçš„é¢˜ç›®ä½œä¸ºæ•´ä¸ªè®²è§£çš„ä¾‹å­ï¼š&lt;a href=&quot;https://leetcode.cn/problems/linked-list-random-node/&quot;&gt;382. é“¾è¡¨éšæœºèŠ‚ç‚¹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å…ˆæ¥çœ‹çœ‹é¢˜ç›®å†…å®¹&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç»™ä½ ä¸€ä¸ªå•é“¾è¡¨ï¼Œéšæœºé€‰æ‹©é“¾è¡¨çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶è¿”å›ç›¸åº”çš„èŠ‚ç‚¹å€¼ã€‚æ¯ä¸ªèŠ‚ç‚¹ è¢«é€‰ä¸­çš„æ¦‚ç‡ä¸€æ · ã€‚
å®ç° Solution ç±»ï¼š
&lt;strong&gt;Â·&lt;/strong&gt; Solution(ListNode head) ä½¿ç”¨æ•´æ•°æ•°ç»„åˆå§‹åŒ–å¯¹è±¡ã€‚
&lt;strong&gt;Â·&lt;/strong&gt; int getRandom() ä»é“¾è¡¨ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹å¹¶è¿”å›è¯¥èŠ‚ç‚¹çš„å€¼ã€‚é“¾è¡¨ä¸­æ‰€æœ‰èŠ‚ç‚¹è¢«é€‰ä¸­çš„æ¦‚ç‡ç›¸ç­‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;å·²çŸ¥æ ·æœ¬æ€»æ•°çš„è§£å†³åŠæ³•&lt;/h2&gt;
&lt;p&gt;æ ¹æ®é¢˜ç›®çš„æç¤ºï¼Œç”±äºé“¾è¡¨é•¿åº¦åªæœ‰ $10^4$ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆå§‹åŒ–æ—¶æŠŠé“¾è¡¨é¢„å¤„ç†åˆ°ä¸€ä¸ªæ•°ç»„å†…ï¼Œç„¶ååœ¨æŸ¥è¯¢æ—¶ï¼Œéšæœºåœ¨ [1, æ•°ç»„å¤§å°] çš„åŒºé—´ä¸­æŠ½å–ä¸€ä¸ªä¸‹æ ‡ï¼Œå†å°†æ•°ç»„ä¸­å¯¹åº”ä¸‹æ ‡çš„å†…å®¹è¿”å›ã€‚&lt;/p&gt;
&lt;p&gt;ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;class Solution {
    List&amp;lt;Integer&amp;gt; list = new ArrayList&amp;lt;&amp;gt;();
    Random random = new Random(20220512);
    public Solution(ListNode head) {
        while (head != null) {
            list.add(head.val);
            head = head.next;
        }
    }
    public int getRandom() {
        int idx = random.nextInt(list.size());
        return list.get(idx);
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ç§æ–¹å¼å°±æ˜¯å‰é¢æåˆ°çš„å·²çŸ¥æ ·æœ¬æ€»æ•°æƒ…å†µçš„è§£æ³•ï¼Œå¯ä»¥å¾ˆå®¹æ˜“å¾—åˆ°ç®—æ³•å¤æ‚åº¦å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ—¶é—´å¤æ‚åº¦ï¼šä»¤ n ä¸ºé“¾è¡¨é•¿åº¦ï¼Œé¢„å¤„ç†æ•°ç»„çš„å¤æ‚åº¦ä¸º O(n)ï¼›éšæœºè·å–æŸä¸ªå€¼çš„å¤æ‚åº¦ä¸º O(1)&lt;/li&gt;
&lt;li&gt;ç©ºé—´å¤æ‚åº¦ï¼šO(n)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœæ²¡æœ‰æ‰€è°“çš„ &lt;strong&gt;ã€Œé¢˜ç›®çš„æç¤ºã€&lt;/strong&gt; ï¼Œåªæœ‰ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå¦‚ä½•åœ¨ä¸€æ¬¡éå†ä¸‹å°±å¾—åˆ°ä¸€ä¸ªæŠ½å–æ¦‚ç‡ç›¸åŒçš„ç»“æœå‘¢ï¼Ÿ&lt;/p&gt;
&lt;h2&gt;è“„æ°´æ± æŠ½æ ·&lt;/h2&gt;
&lt;h3&gt;æ‰§è¡Œè¿‡ç¨‹&lt;/h3&gt;
&lt;p&gt;è“„æ°´æ± æŠ½æ ·æ•´ä½“çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä»å‰å¾€åå¤„ç†æ¯ä¸ªæ ·æœ¬ï¼Œå‡è®¾å¤„ç†åˆ°ç¬¬ i ä¸ªï¼ˆç¼–å·ä» 1 å¼€å§‹ï¼‰ï¼Œå¯¹ç¬¬ i ä¸ªæ ·æœ¬è¿›è¡Œä¸€ä¸ªç­‰æ¦‚ç‡è®¡ç®—ï¼Œè¿™ä¸ªæ¦‚ç‡ä¸º $\frac1i$ï¼Œå«ä¹‰ä¸ºåœ¨ [1, i] è¿™ä¸ªåŒºé—´å†…ï¼Œç¬¬ i ä¸ªæ ·æœ¬æˆä¸ºè¢«é€‰ä¸­ç­”æ¡ˆçš„æ¦‚ç‡&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸Šä¸€æ­¥è®¡ç®—ä¸­ï¼Œç¬¬ i ä¸ªæ ·æœ¬è¢«æŠ½ä¸­ä¸ºç­”æ¡ˆï¼Œè®°å½•ä¸‹æ¥&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªæ ·æœ¬åšç¬¬ä¸€æ­¥çš„æ“ä½œï¼Œä¸åŒçš„æ˜¯ä¸Šé¢çš„ç­‰æ¦‚ç‡çš„å¤§å°æ˜¯éšç€æ ·æœ¬çš„ä½ç½®è€Œå˜å°çš„ï¼Œå¦‚æœè¢«æŠ½ä¸­ä¸ºç­”æ¡ˆå°±è¦†ç›–ä¸Šä¸€æ¬¡çš„ç»“æœ&lt;/li&gt;
&lt;li&gt;ç›´åˆ°éå†å®Œæ‰€æœ‰æ ·æœ¬ï¼Œæœ€åä¸€ä¸ªæœ€ç»ˆå¯ä»¥ç¡®ä¿æ¯ä¸ªæ ·æœ¬æˆä¸ºç­”æ¡ˆçš„æ¦‚ç‡å‡ä¸º $\frac1n$ï¼ˆå…¶ä¸­ n ä¸ºæ ·æœ¬æ€»æ•°ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆä»…ä»…åªæ˜¯éå†ä¸€æ¬¡é“¾è¡¨ï¼Œç„¶åæ¨ç§»ä¸€ä¸‹æ¯ä¸ªæ ·æœ¬çš„æŠ½å–æ¦‚ç‡ï¼Œå°±å¯ä»¥ä¿è¯æ¯ä¸ªæ ·æœ¬æˆä¸ºç­”æ¡ˆçš„æ¦‚ç‡éƒ½æ˜¯å‡ç­‰çš„ï¼Ÿä¸‹é¢å°±æ¥æ¨æ¼”ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h3&gt;åŸç†&lt;/h3&gt;
&lt;p&gt;å‡è®¾æœ€ç»ˆæˆä¸ºç­”æ¡ˆçš„æ ·æœ¬ç¼–å·ä¸º kï¼ˆç¼–å·ä» 1 å¼€å§‹ï¼‰ï¼Œé‚£ä¹ˆ k æˆä¸ºç­”æ¡ˆçš„å……è¦æ¡ä»¶ä¸ºã€Œåœ¨éå†åˆ° k æ—¶è¢«é€‰ä¸­ã€å¹¶ä¸”ã€Œéå†å¤§äº k çš„æ‰€æœ‰å…ƒç´ æ—¶ï¼Œå‡æ²¡æœ‰è¢«é€‰æ‹©ï¼ˆæ²¡æœ‰è¦†ç›–ï¼‰ã€ã€‚å¯¹åº”çš„æ¦‚ç‡å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;$$
P=\frac1k\times\left(1-\frac1{k+1}\right)\times\left(1-\frac1{k+2}\right)\times\dots\times\left(1-\frac1n\right)
$$&lt;/p&gt;
&lt;p&gt;é¦–é¡¹ $\frac1k$ ä¸ºé€‰ä¸­ k çš„æ¦‚ç‡ï¼Œåé¢æ¯é¡¹åˆ†åˆ«ä¸ºç¼–å·ä¸º [k + 1, n] çš„æ ·æœ¬ &lt;strong&gt;ä¸è¢«é€‰ä¸­&lt;/strong&gt; çš„æ¦‚ç‡ã€‚&lt;/p&gt;
&lt;p&gt;åŒ–ç®€å¾—ï¼š
$$
P=\frac1k\times\frac k{k+1}\times\frac{k+1}{k+2}\times\dots\times\frac{n-1}n
$$&lt;/p&gt;
&lt;p&gt;ç»§ç»­åŒ–ç®€å¾—ï¼š
$$
P=\frac1n
$$&lt;/p&gt;
&lt;p&gt;å¯¹åº”åˆ°ä¸Šé¢çš„æ­¥éª¤ï¼Œè®¡ç®— i æ ·æœ¬çš„æ¦‚ç‡ç›¸å½“äºé¦–é¡¹çš„ $\frac1k$ ï¼Œå¦‚æœç­”æ¡ˆä¸è¢«è¦†ç›–ï¼Œé‚£ä¹ˆç­‰äºä¸Šé¢å…¬å¼ä¸­é¦–é¡¹åé¢çš„æ¦‚ç‡ï¼ˆéå†å¤§äº k çš„æ‰€æœ‰å…ƒç´ æ—¶ï¼Œå‡æ²¡æœ‰è¢«é€‰æ‹©çš„æ¦‚ç‡ï¼‰å‘ç”Ÿäº†ï¼Œé‚£ä¹ˆæ ¹æ®å…¬å¼çš„åŒ–ç®€ç»“æœï¼Œé€‰æ‹©åˆ°æ ·æœ¬çš„æ¦‚ç‡å°±æ˜¯ $\frac1n$ ï¼›å¦‚æœç­”æ¡ˆè¢«è¦†ç›–ï¼Œé‚£ä¹ˆé€‰æ‹©åˆ°çš„æœ€ç»ˆç­”æ¡ˆä¹Ÿä¸€å®šç¬¦åˆä¸Šé¢å…¬å¼çš„è®¡ç®—ï¼Œä¹ŸåŒæ ·ç¬¦åˆç­‰æ¦‚ç‡ $\frac1n$ çš„è¦æ±‚ã€‚&lt;/p&gt;
&lt;h3&gt;ä»£ç å®ç°&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;class Solution {
    ListNode head;
    Random random = new Random(20220512);

    public Question0382(ListNode head) {
        head = head;
    }

    public int getRandom() {
        int ans = 0;
        int idx = 0;
        ListNode t = head;
        while (t != null &amp;amp;&amp;amp; ++idx &amp;gt;= 0) {
            if (random.nextInt(idx) == 0) {
                ans = t.val;
            }
            t = t.next;
        }
        return ans;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç®—æ³•çš„å¤æ‚åº¦å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ—¶é—´å¤æ‚åº¦ï¼šä»¤ n ä¸ºé“¾è¡¨é•¿åº¦ï¼Œéšæœºè·å–æŸä¸ªå€¼çš„å¤æ‚åº¦ä¸º O(n)&lt;/li&gt;
&lt;li&gt;ç©ºé—´å¤æ‚åº¦ï¼šO(1)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;æœ€å&lt;/h2&gt;
&lt;p&gt;æœ¬ç¯‡æ–‡ç« ä»‹ç»äº†è“„æ°´æ± æŠ½æ ·ç®—æ³•ï¼Œä¸»è¦ç”¨æ¥è§£å†³æœªçŸ¥æ ·æœ¬æ•°é‡çš„æƒ…å†µä¸‹ï¼Œä»¥ç›¸åŒæ¦‚ç‡æŠ½å–æ ·æœ¬çš„é—®é¢˜ï¼Œä»æ¦‚ç‡çš„è§’åº¦æ¨æ¼”äº†å®ƒæ˜¯å¦‚ä½•åšåˆ°ç›¸åŒæ¦‚ç‡æŠ½å–çš„ï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©ä½ è§£å†³å…¶ä»–ç›¸ä¼¼çš„é—®é¢˜~~å®Œç»“æ’’èŠ±ğŸ‰ğŸ‰ğŸ‰&lt;/p&gt;
</content:encoded><author>Fan Zhou</author></item><item><title>ä»ä¸€é“å­—èŠ‚ç®—æ³•é¢è¯•é¢˜èŠèŠå‰ç¼€å’Œçš„è¿ç”¨</title><link>https://www.fanschou.com/posts/algorithm/partial-sum-by-bytedance-interview/</link><guid isPermaLink="true">https://www.fanschou.com/posts/algorithm/partial-sum-by-bytedance-interview/</guid><description>æœ€è¿‘é¢è¯•å­—èŠ‚ç¢°åˆ°äº†ä¸€é“ç®—æ³•é¢˜ï¼Œå½“åœºæ²¡åšå‡ºæ¥ï¼Œåªç»™å‡ºäº†æš´åŠ›è§£æ³•ï¼Œé¢è¯•å®˜æ˜¾ç„¶æ˜¯ä¸æ»¡æ„çš„ã€‚ç»“æŸé¢è¯•åï¼Œé‡æ–°å®¡è§†äº†è¿™é“é¢˜ï¼Œå¯ä»¥ç”¨ä¸€ç§æ›´æœ‰æ•ˆç‡çš„è§£æ³•å»åšï¼Œæœ¬ç¯‡æ–‡ç« å°±è®©æˆ‘å’Œå¤§å®¶ä¸€èµ·èŠä¸€èŠå§~</description><pubDate>Thu, 28 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;æœ€è¿‘ç¬”è€…åœ¨æ‰¾å·¥ä½œï¼Œæ€€ç€å¿å¿‘çš„å¿ƒæƒ…æŠ•äº†å­—èŠ‚ï¼Œæƒ³ç€ä¹Ÿçœ‹çœ‹è‡ªå·±åˆ·leetcodeæ¯æ—¥ä¸€é¢˜åšæŒçš„æ•ˆæœï¼Œå“ˆå“ˆå“ˆ~~~åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šé¢˜~&lt;/p&gt;
&lt;h2&gt;é¢˜ç›®ï¼šæ±‚è¿ç»­å­æ•°ç»„çš„æœ€å°é•¿åº¦&lt;/h2&gt;
&lt;p&gt;æˆ‘æ‹¿åˆ°çš„é¢˜ç›®å¤§è‡´çš„æè¿°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œç›®æ ‡å€¼ target ï¼Œæ±‚ä¸€ä¸ª nums çš„è¿ç»­å­æ•°ç»„ï¼Œä½¿çš„è¿ç»­å­æ•°ç»„çš„å’Œæ˜¯ target çš„å€æ•°ï¼Œå¹¶ä¸”å­æ•°ç»„çš„é•¿åº¦æœ€å°
ç¤ºä¾‹ï¼šnums=[23,2,4,6,7], tartget = 6ï¼Œæœ€å°é•¿åº¦ä¸º 2&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å½“æ—¶å†™çš„æ—¶å€™ï¼Œç¬¬ä¸€ååº”æ˜¯å¦‚æœä¸æ˜¯æ±‚ target çš„å€æ•°ï¼Œè€Œæ˜¯ç›´æ¥ç­‰äº targetï¼Œè²Œä¼¼ä¼šç®€å•ç‚¹ï¼Ÿç»“æœå°±æ˜¯æƒ³äº†3åˆ†é’Ÿï¼Œæ²¡æœ‰æƒ³é€šï¼Œé¢è¯•å®˜è¯´å¯ä»¥å…ˆæš´åŠ›è§£ï¼Œç„¶åæƒ³åŠæ³•ä¼˜åŒ–ï¼Œäºæ˜¯æˆ‘å°±å…ˆæ‰‹æ’¸äº†ä¸€ä¸ªæš´åŠ›è§£æ³•ï¼ŒåŒå±‚å¾ªç¯è·‘å‡ºäº†ç­”æ¡ˆã€‚æ¥ä¸‹æ¥å°±æ˜¯æƒ³äº†åŠå¤©ï¼Œä¹Ÿæƒ³åˆ°äº†å‰ç¼€å’Œï¼Œä½†æ˜¯æ²¡æé€š targetçš„å€æ•° è¿™ä¸€å…³é”®ç‚¹ï¼Œæ—¶é—´åˆ°äº†ä¹‹åï¼Œé¢è¯•å®˜å°±è¿›ä¸‹ä¸€ç¯èŠ‚äº†ã€‚è¿™é‡Œä¹Ÿè´´ä¸€ä¸‹æš´åŠ›è§£æ³•å§ï¼Œå¤æ‚åº¦ä¸ºO(nÂ²)ï¼Œå¯ä»¥å¯¹ç…§åé¢çš„ä¼˜åŒ–è§£æ³•ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public static int getMinLength1(int[] nums, int target){
    int minLength = Integer.MAX_VALUE;
    int n = nums.length;
    for (int i = 0; i &amp;lt; n; i++) {
        int sum = nums[i];
        for (int j = i; j &amp;lt; n; j++) {
            sum = i != j ? sum + nums[j] : sum;
            if(sum % target == 0){
                minLength = Math.min(minLength, j - i + 1);
            }
        }
    }
    return minLength == Integer.MAX_VALUE ? - 1 : minLength;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç»“æŸé¢è¯•ä¹‹åï¼Œæˆ‘ç«‹é©¬å»leetcodeä¸Šæœç´¢é¢˜ç›®ï¼Œç¡®å®æ‰¾åˆ°äº†ç›¸ä¼¼çš„ä¸€é“é¢˜ï¼Œä½†æ˜¯ä¹Ÿä¸å¤ªä¸€æ ·ï¼Œä¸è¿‡é¢˜è§£ç¡®å®è®©æˆ‘æƒ³åˆ°äº†æ€è·¯ï¼Œè¿™é‡Œæˆ‘è´´ä¸€ä¸‹ç›¸ä¼¼çš„è¿™é“leetcodeé¢˜ï¼š&lt;a href=&quot;https://leetcode-cn.com/problems/continuous-subarray-sum/&quot;&gt;523. è¿ç»­çš„å­æ•°ç»„å’Œ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é“ç›¸ä¼¼é¢˜çš„é¢˜è§£æä¾›ç»™æˆ‘æœ€å¤§çš„æç¤ºå°±æ˜¯ï¼š&lt;code&gt;å‰ç¼€å’Œ&lt;/code&gt; + &lt;code&gt;åŒä½™å®šç†&lt;/code&gt;ã€‚åŸºäºè¿™ä¸¤ç‚¹ï¼Œå…¶å®å¾ˆå®¹æ˜“å°±æƒ³åˆ°è§£å†³åŠæ³•äº†ã€‚æˆ‘å…ˆæ¥è¯´è¯´ä»€ä¹ˆæ˜¯å‰ç¼€å’Œ&lt;/p&gt;
&lt;h2&gt;å‰ç¼€å’Œ&lt;/h2&gt;
&lt;p&gt;å‰ç¼€å’Œæ˜¯ä¸€ç§é‡è¦çš„é¢„å¤„ç†ï¼Œèƒ½å¤§å¤§é™ä½æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ã€‚å¯ä»¥ç®€å•ç†è§£ä¸ºâ€œæ•°åˆ—çš„å‰né¡¹çš„å’Œâ€ã€‚æ‹¿ç®—æ³•é¢˜çš„ç¤ºä¾‹æ¥è¯´ï¼Œnums æ•°ç»„[23,2,4,6,7]ï¼Œå®ƒå¯¹åº”åˆ°çš„å‰ç¼€å’Œæ•°ç»„ psum æ˜¯è¿™ä¹ˆè®¡ç®—çš„ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;psum[0]= nums[0] = 23
psum[1]= psum[0] + nums[1] = 25
psum[2]= psum[1] + nums[2] = 29
psum[3]= psum[2] + nums[3] = 35
psum[4]= psum[3] + nums[4] = 42
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ­¤æ—¶å‰ç¼€å’Œæœ‰ä¸ªé‡è¦çš„æ€§è´¨æ¥äº†ï¼Œå°±æ˜¯å®ƒå¯ä»¥ç›´æ¥è®¡ç®—å‡ºåŸæ•°ç»„ä»»æ„ä¸¤ä¸ªåæ ‡ä¹‹é—´çš„æ•°å€¼ä¹‹å’Œã€‚æˆ‘ä»¬è¿˜æ˜¯ä»¥ä¸Šé¢è¿™ä¸ªæ•°ç»„ä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬æƒ³è®¡ç®—ä¸‹æ ‡0åˆ°2åŒºé—´çš„æ•°å€¼å’Œï¼Œç›´æ¥ä½¿ç”¨&lt;code&gt;psum[2]-psum[0]&lt;/code&gt;å¾—åˆ°ç»“æœä¸º 6ï¼Œä¸éœ€è¦ä»»ä½•é¢å¤–ç´¯åŠ çš„è¿‡ç¨‹ã€‚
å¦å¤–æä¸€ç‚¹ï¼Œè¿™é‡Œå®é™…å†™ä»£ç çš„æ—¶å€™ï¼Œè¿˜è¦æ³¨æ„åƒåŒºé—´çš„å¼€é—­æƒ…å†µï¼Œè¿˜æœ‰è¾¹ç•Œå€¼ä»¥åŠç´¢å¼•çš„ç¼–å·ä» 0 è¿˜æ˜¯ 1 å¼€å§‹ç­‰ç­‰ç»†èŠ‚çš„åœ°æ–¹ã€‚&lt;/p&gt;
&lt;h2&gt;åŒä½™å®šç†&lt;/h2&gt;
&lt;p&gt;ä¸¥æ ¼æ¥è¯´ï¼Œè¿™ä¸ªåº”è¯¥ç®—æ˜¯ä¸€ä¸ªæ•°å­¦æ–¹é¢çš„å°çŸ¥è¯†ï¼Œä¹Ÿå¾ˆå®¹æ˜“ç†è§£ã€‚ç”¨ä¸€å¥è¯æè¿°å°±æ˜¯ï¼Œ&lt;strong&gt;ç»™å®šä¸€ä¸ªæ­£æ•´æ•° mï¼Œå¦‚æœä¸¤ä¸ªæ•´æ•° a å’Œ b æ»¡è¶³ a-b èƒ½å¤Ÿè¢« m æ•´é™¤ï¼Œå³ (a-b)/m å¾—åˆ°ä¸€ä¸ªæ•´æ•°ï¼Œé‚£ä¹ˆå°±ç§°æ•´æ•° a ä¸ b å¯¹æ¨¡ m åŒä½™ï¼Œè®°ä½œ aâ‰¡b(mod m)&lt;/strong&gt;ã€‚å¼•ç”³æ¥è¯´ï¼Œå¦‚æœ a å¯¹ m å–ä½™ï¼Œb ä¹Ÿå¯¹ m å–ä½™ï¼Œä½™æ•°ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œa-b æ˜¯ m çš„å€æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å†™åˆ°è¿™é‡Œï¼Œå†ç»“åˆå‰ç¼€å’Œï¼Œæ˜¯ä¸æ˜¯å¯ä»¥å‘ç°è¿™ä¸ªå€æ•°çš„æ€§è´¨ï¼Œæ˜¯å¯ä»¥è§£å†³é¢˜ç›®å½“ä¸­çš„å€æ•°é—®é¢˜çš„ã€‚&lt;/p&gt;
&lt;h2&gt;è§£é¢˜æ€è·¯&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬è®¡ç®—å‡ºç»™å®šæ•°ç»„numsçš„å‰ç¼€å’Œæ•°ç»„ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;int[] sum = new int[nums.length];
for (int i = 0; i &amp;lt; nums.length; i++) {
    sum[i] += nums[i];
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥åˆ›å»ºä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œå®ƒçš„keyæ˜¯æŸä¸ªç´¢å¼•ä½ç½®çš„å‰ç¼€å’Œå…ƒç´ å¯¹targetå–ä½™çš„ç»“æœï¼Œvalueåˆ™å­˜å‚¨ç´¢å¼•ä½ç½®ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åéå†å‰ç¼€å’Œæ•°ç»„ï¼Œæ‹¿åˆ°æ¯ä¸€ä¸ªå‰ç¼€å’Œçš„å…ƒç´ ï¼Œå¯¹ç›®æ ‡å€¼targetå–ä½™ï¼Œå¹¶ä¸”æŠŠå¯¹åº”ç´¢å¼•ä½ç½®çš„å–ä½™ç»“æœé€šè¿‡å“ˆå¸Œè¡¨å­˜å‚¨èµ·æ¥ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ—¶å€™å°±åˆ°äº†æ ¸å¿ƒçš„éƒ¨åˆ†äº†ï¼Œè®¡ç®—å®Œå½“å‰å‰ç¼€å’Œå…ƒç´  a å¯¹ target å–ä½™çš„ç»“æœï¼Œç„¶åä»å“ˆå¸Œè¡¨ä¸­æ‰¾è¿™ä¸ªä½™æ•°å¯¹åº”çš„valueæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™è¯´æ˜å­˜åœ¨ä¹‹å‰çš„å‰ç¼€å’Œå…ƒç´  b ä¸å½“å‰å‰ç¼€å’Œå…ƒç´ æ˜¯&lt;strong&gt;åŒä½™&lt;/strong&gt;ï¼ˆå³ä½™æ•°ç›¸åŒï¼‰çš„ã€‚ç»“åˆä¸Šé¢æåˆ°çš„åŒä½™å®šç†ï¼Œa ä¸ b çš„å·®å€¼ä¸€å®šæ˜¯ &lt;strong&gt;target çš„å€æ•°&lt;/strong&gt;ï¼ŒåŒæ—¶å› ä¸º a ä¸ b æ˜¯å‰ç¼€å’Œå…ƒç´ ï¼Œç»“åˆå‰ç¼€å’Œçš„æ€§è´¨ï¼Œé‚£ä¹ˆä»–ä»¬çš„å·®å€¼å…¶å®ä¹Ÿå°±æ˜¯å®ƒä»¬å¯¹åº”ç´¢å¼•ä½ç½®ä¹‹é—´&lt;strong&gt;è¿ç»­å­æ•°ç»„çš„å’Œ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åˆ°æ­¤ï¼Œæ‰€æœ‰é€»è¾‘éƒ½å¯¹ä¸Šäº†é¢˜ç›®ä¸­çš„è¦ç´ ï¼šè¿ç»­å­æ•°ç»„ä¸targetçš„å€æ•°ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥å†™å‡ºå¯¹åº”çš„ä»£ç ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public static int getMinLength(int[] nums, int target){
    int minLength = Integer.MAX_VALUE;
    Map&amp;lt;Integer, Integer&amp;gt; map = new HashMap&amp;lt;&amp;gt;();
    int[] sum = new int[nums.length];
    for (int i = 0; i &amp;lt; nums.length; i++) {
        sum[i] += nums[i];
    }
    for (int i = 0; i &amp;lt; nums.length; i++) {
        int s = sum[i] % target;
        if(map.containsKey(sum)){
            int index = map.get(sum);
            minLength = Math.min(minLength, i - index);
        } else {
            map.put(sum, i);
        }
    }
    return minLength;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å†æ¬¡æ·±å…¥åˆ†æä¸€ä¸‹ä»£ç ï¼Œæˆ‘ä»¬å‘ç°å‰ç¼€å’Œçš„è®¡ç®—è¿‡ç¨‹ï¼Œå¯ä»¥ç›´æ¥èåˆåœ¨å¯¹ target å–ä½™çš„è¿‡ç¨‹ä¸­ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ä¸€æ¬¡éå†ï¼Œå¹¶ä¸”ä¸ç”¨åˆ›å»ºå‰ç¼€å’Œæ•°ç»„ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public static int getMinLength(int[] nums, int target){
        int sum = 0;
        int minLength = Integer.MAX_VALUE;
        Map&amp;lt;Integer, Integer&amp;gt; map = new HashMap&amp;lt;&amp;gt;();
        for (int i = 0; i &amp;lt; nums.length; i++) {
            sum = (sum + nums[i]) % target;
            if(map.containsKey(sum)){
                int index = map.get(sum);
                minLength = Math.min(minLength, i - index);
            } else {
                map.put(sum, i);
            }
        }
        return minLength;
    }
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¸Šé¢è¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦é™ä½åˆ°äº†O(n)ã€‚&lt;/p&gt;
&lt;h2&gt;å†™åœ¨æœ€å&lt;/h2&gt;
&lt;p&gt;æ•´é“é¢˜ä¸‹æ¥ï¼Œå¯ä»¥å‘ç°å·§å¦™åˆ©ç”¨å‰ç¼€å’Œå’ŒåŒä½™å®šç†ï¼Œå¯ä»¥å°†æ—¶é—´å¤æ‚åº¦é™ä½ä¸€ä¸ªæ•°é‡çº§ã€‚åœ¨ä¸æ–­çš„åˆ·é¢˜è¿‡ç¨‹ä¸­ï¼Œå…¶å®ä¹Ÿæ¥è§¦äº†ä¸å°‘å‰ç¼€å’Œçš„é¢˜ï¼Œä½†é‡åˆ°è¿™ä¸ªé¢˜ç›®ä¹‹åï¼Œå‘ç°è‡ªå·±çš„è¿ç”¨è¿˜æ˜¯ä¸å¤Ÿå¨´ç†Ÿï¼Œä¹Ÿä¸èƒ½å¾ˆå¥½çš„ç»“åˆä¸€äº›å…¶ä»–çš„è§£å†³æ–¹æ³•ã€‚æ‰€ä»¥ç®—æ³•è§£é¢˜æ˜¯ä¸€ä¸ªä¸æ–­é”¤ç‚¼è‡ªå·±çš„æ€è€ƒçš„è¿‡ç¨‹ä¸­ï¼Œåˆ·é¢˜ä¹Ÿéœ€è¦ä¸æ–­æ²‰æ·€ï¼Œç›¸åŒçš„é¢˜ä¹Ÿéœ€è¦ä¸æ–­çš„åå¤çš„å»åšï¼Œæ‰èƒ½çœŸæ­£å¸æ”¶æ‰å®ƒã€‚&lt;/p&gt;
&lt;p&gt;åŒæ—¶ï¼Œå†™é¢˜è§£ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹å¼ï¼Œå¯ä»¥æ•´ç†ä½ çš„æ€è·¯ï¼Œæ›´å®¹æ˜“åŠ æ·±æŠ€å·§çš„ç†è§£ã€‚åšæŒåˆ·é¢˜å‰æœŸä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆè¾›è‹¦çš„äº‹æƒ…ï¼Œå¦‚æœä½ å› ä¸ºæŸç§åŸå› éœ€è¦åˆ·é¢˜ï¼Œé‚£ä¹ˆä¸€èµ·åšæŒä¸‹å»å§~æœ€ç»ˆä¸€å®šä¼šæœ‰æ”¶è·ï¼&lt;/p&gt;
</content:encoded><author>Fan Zhou</author></item><item><title>èŠèŠå¹¶å‘ä¸­çš„æ­»é”</title><link>https://www.fanschou.com/posts/java/concurrent-deadlock/</link><guid isPermaLink="true">https://www.fanschou.com/posts/java/concurrent-deadlock/</guid><description>åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸­ï¼Œç»å¸¸éœ€è¦è€ƒè™‘çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯çº¿ç¨‹ä¹‹é—´çš„æ­»é”é—®é¢˜ï¼Œå¹¶ä¸”æ€»ç»“å‡ºäº†å¾ˆå¤šæœ€ä½³å®è·µï¼Œè¿™ç¯‡æ–‡ç« æˆ‘ä»¬å°±æ¥èŠèŠå¯¼è‡´æ­»é”çš„åŸå› ï¼Œä»¥åŠå¦‚ä½•é¿å…äº§ç”Ÿæ­»é”ã€‚</description><pubDate>Tue, 08 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸­ï¼Œç»å¸¸éœ€è¦è€ƒè™‘çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯çº¿ç¨‹ä¹‹é—´çš„æ­»é”é—®é¢˜ï¼Œå¹¶ä¸”æ€»ç»“å‡ºäº†å¾ˆå¤šæœ€ä½³å®è·µï¼Œè¿™ç¯‡æ–‡ç« æˆ‘ä»¬å°±æ¥èŠèŠå¯¼è‡´æ­»é”çš„åŸå› ï¼Œä»¥åŠå¦‚ä½•é¿å…äº§ç”Ÿæ­»é”ã€‚&lt;/p&gt;
&lt;h2&gt;ä»€ä¹ˆå«æ­»é”&lt;/h2&gt;
&lt;p&gt;æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºèµ„æºè€Œé€ æˆçš„äº’ç›¸ç­‰å¾…çš„ç°è±¡ï¼Œåœ¨æ— å¤–åŠ›ä½œç”¨çš„æƒ…å†µä¸‹ï¼Œè¿™äº›çº¿ç¨‹ä¼šä¸€ç›´ç›¸äº’ç­‰å¾…è€Œæ— æ³•ç»§ç»­è¿è¡Œä¸‹å»ã€‚&lt;/p&gt;
&lt;h2&gt;æ­»é”çš„äº§ç”ŸåŸå› &lt;/h2&gt;
&lt;p&gt;é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆä¼šäº§ç”Ÿæ­»é”å‘¢ï¼Ÿå…¶å®ä»æ­»é”çš„ç°è±¡ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥å½’çº³å‡º4æ¡åŸå› ï¼š&lt;/p&gt;
&lt;h3&gt;äº’æ–¥æ¡ä»¶&lt;/h3&gt;
&lt;p&gt;å¦‚æœä¸¤ä¸ªåŠä»¥ä¸Šçš„çº¿ç¨‹é€šè¿‡é”äº‰å¤ºåŒä¸€ä¸ªèµ„æºçš„ä½¿ç”¨æƒï¼Œè¯´æ˜è¯¥èµ„æºåŒæ—¶åªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹å ç”¨ï¼Œå¹¶ä¸”çº¿ç¨‹è·å–åˆ°å®ƒæ—¶è¿›è¡Œæ’ä»–æ€§ä½¿ç”¨ã€‚å¦‚æœæ­¤æ—¶è¿˜æœ‰å…¶å®ƒçº¿ç¨‹è¯·æ±‚è·å–è·å–è¯¥èµ„æºï¼Œåˆ™è¯·æ±‚è€…åªèƒ½ç­‰å¾…ï¼Œç›´è‡³å æœ‰èµ„æºçš„çº¿ç¨‹é‡Šæ”¾è¯¥èµ„æºã€‚&lt;/p&gt;
&lt;h3&gt;è¯·æ±‚å¹¶æŒæœ‰æ¡ä»¶&lt;/h3&gt;
&lt;p&gt;æŒ‡ä¸€ä¸ªçº¿ç¨‹å·±ç»æŒæœ‰äº†è‡³å°‘ä¸€ä¸ªèµ„æºï¼Œä½†åˆæå‡ºäº†æ–°çš„èµ„æºè¯·æ±‚ï¼Œè€Œæ–°èµ„æºå·±è¢«å…¶å®ƒçº¿ç¨‹å æœ‰ï¼Œæ‰€ä»¥å½“å‰çº¿ç¨‹ä¼šè¢«é˜»å¡ï¼Œä½†é˜»å¡çš„åŒæ—¶å¹¶ä¸é‡Šæ”¾è‡ªå·±å·²ç»è·å–çš„èµ„æºã€‚&lt;/p&gt;
&lt;h3&gt;ä¸å¯å‰¥å¤ºæ¡ä»¶&lt;/h3&gt;
&lt;p&gt;æ— å¤–åŠ›ä½œç”¨çš„æƒ…å†µä¸‹ï¼Œçº¿ç¨‹è·å–åˆ°çš„èµ„æºåœ¨è‡ªå·±ä½¿ç”¨å®Œä¹‹å‰ä¸èƒ½è¢«å…¶å®ƒçº¿ç¨‹æŠ¢å ï¼Œåªæœ‰åœ¨è‡ªå·±ä½¿ç”¨å®Œæ¯•åæ‰ç”±è‡ªå·±é‡Šæ”¾è¯¥èµ„æºã€‚&lt;/p&gt;
&lt;h3&gt;ç¯è·¯ç­‰å¾…æ¡ä»¶&lt;/h3&gt;
&lt;p&gt;æŒ‡åœ¨å‘ç”Ÿæ­»é”æ—¶ï¼Œå¿…ç„¶å­˜åœ¨ä¸€ä¸ªçº¿ç¨‹â€”â€”èµ„æºçš„ç¯å½¢é“¾ï¼Œå³çº¿ç¨‹é›†åˆ {T0ï¼ŒT1ï¼ŒT2,â€¦â€¦ ï¼ŒTn} ä¸­ T0 æ­£åœ¨ç­‰å¾…ä¸€ T1 å ç”¨çš„èµ„æºï¼ŒTl1æ­£åœ¨ç­‰å¾… T2ç”¨çš„èµ„æºï¼Œâ€¦â€¦ Tn åœ¨ç­‰å¾…å·±è¢« T0å ç”¨çš„èµ„æºã€‚&lt;/p&gt;
&lt;h2&gt;å¦‚ä½•è§£é™¤æ­»é”&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåªè¦ç ´åä¸Šé¢4ä¸ªæ¡ä»¶çš„ä»»æ„ä¸€ä¸ªï¼Œé‚£ä¹ˆæ­»é”è‡ªåŠ¨å°±ä¼šè§£é™¤ã€‚æˆ‘ä»¬æ¥é€ä¸€çœ‹ä¸€çœ‹4ä¸ªæ¡ä»¶ã€‚&lt;/p&gt;
&lt;h3&gt;ç ´åäº’æ–¥æ¡ä»¶ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;äº’æ–¥è¿™ä¸ªæ¡ä»¶æˆ‘ä»¬æ²¡æœ‰åŠæ³•ç ´åï¼Œå› ä¸ºç”¨é”ä¸ºçš„å°±æ˜¯äº’æ–¥ï¼Œå¦‚æœæ²¡æœ‰äº’æ–¥ï¼Œé‚£ä¹ˆæ­»é”äº§ç”Ÿçš„æ ¹æœ¬å°±ä¸å­˜åœ¨äº†ï¼Œæ²¡æœ‰é”å¦‚ä½•æ­»é”ï¼Ÿ&lt;/p&gt;
&lt;h3&gt;ç ´åè¯·æ±‚å¹¶æŒæœ‰æ¡ä»¶&lt;/h3&gt;
&lt;p&gt;å¯¹äº&lt;code&gt;è¯·æ±‚å¹¶æŒæœ‰&lt;/code&gt;è¿™ä¸ªæ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ¬¡æ€§è¯·æ±‚æ‰€æœ‰çš„èµ„æºï¼Œè¿™æ ·å°±ä¸ä¼šåœ¨ä¸€ä¸ªçº¿ç¨‹è·å¾—éƒ¨åˆ†èµ„æºä¹‹åï¼Œæœ‰å…¶ä»–çº¿ç¨‹åˆ‡å…¥ï¼Œæ‹¿èµ°å¦ä¸€éƒ¨åˆ†èµ„æºçš„é”ï¼Œä¹Ÿå°±ç ´åäº†è¯·æ±‚å¹¶æŒæœ‰æ¡ä»¶ã€‚&lt;/p&gt;
&lt;h3&gt;ç ´åä¸å¯å‰¥å¤ºæ¡ä»¶&lt;/h3&gt;
&lt;p&gt;å¯¹äº&lt;code&gt;ä¸å¯å‰¥å¤º&lt;/code&gt;è¿™ä¸ªæ¡ä»¶ï¼Œå ç”¨éƒ¨åˆ†èµ„æºçš„çº¿ç¨‹è¿›ä¸€æ­¥ç”³è¯·å…¶ä»–èµ„æºæ—¶ï¼Œå¦‚æœç”³è¯·ä¸åˆ°ï¼Œå¯ä»¥ä¸»åŠ¨é‡Šæ”¾å®ƒå æœ‰çš„èµ„æºï¼Œè¿™æ ·ä¸å¯å‰¥å¤ºè¿™ä¸ªæ¡ä»¶å°±ç ´åæ‰äº†ã€‚
å¦‚æœäº†è§£MySQLçš„è¯ï¼Œå®ƒåœ¨äº§ç”Ÿæ­»é”æ—¶ï¼Œä¼šå‰¥å¤ºæ‰ä¸€ä¸ªè¿æ¥æ‰€æŒæœ‰çš„é”ï¼Œé‡Šæ”¾èµ„æºï¼Œè¾¾åˆ°è§£é™¤æ­»é”çš„ç›®çš„ã€‚&lt;/p&gt;
&lt;h3&gt;ç ´åç¯è·¯ç­‰å¾…æ¡ä»¶&lt;/h3&gt;
&lt;p&gt;å¯¹äº&lt;code&gt;ç¯è·¯ç­‰å¾…&lt;/code&gt;è¿™ä¸ªæ¡ä»¶ï¼Œå¯ä»¥é æŒ‰åºç”³è¯·èµ„æºæ¥é¢„é˜²ã€‚æ‰€è°“æŒ‰åºç”³è¯·ï¼Œæ˜¯æŒ‡èµ„æºæ˜¯æœ‰çº¿æ€§é¡ºåºçš„ï¼Œç”³è¯·çš„æ—¶å€™å¯ä»¥å…ˆç”³è¯·èµ„æºåºå·å°çš„ï¼Œå†ç”³è¯·èµ„æºåºå·å¤§çš„ï¼Œè¿™æ ·çº¿æ€§åŒ–åå°±ä¸å­˜åœ¨ç¯è·¯äº†ã€‚&lt;/p&gt;
&lt;h2&gt;æ­»é”å¦‚ä½•æ’æŸ¥&lt;/h2&gt;
&lt;p&gt;å¯ä»¥ä½¿ç”¨jdkè‡ªå¸¦çš„å‘½ä»¤è¡Œå·¥å…·æ’æŸ¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨jpsæŸ¥æ‰¾è¿è¡Œçš„Javaè¿›ç¨‹ï¼šjps -l&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨jstackæŸ¥çœ‹çº¿ç¨‹å †æ ˆä¿¡æ¯ï¼šjstack -l è¿›ç¨‹id&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åŸºæœ¬å°±å¯ä»¥çœ‹åˆ°æ­»é”çš„ä¿¡æ¯ã€‚&lt;/p&gt;
</content:encoded><author>Fan Zhou</author></item><item><title>Javaå¹¶å‘ä¹‹synchronizedå…³é”®å­—è§£æ</title><link>https://www.fanschou.com/posts/java/concurrent-synchronized/</link><guid isPermaLink="true">https://www.fanschou.com/posts/java/concurrent-synchronized/</guid><description>Javaä¸­çš„synchronizedå…³é”®å­—æ˜¯é«˜å¹¶å‘ç¼–ç¨‹ä¸­å¸¸ç”¨çš„ä¸€ä¸ªæ‰‹æ®µï¼Œä¹Ÿæ˜¯æ‰¾å·¥ä½œæ—¶çš„é«˜é¢‘é¢è¯•é¢˜ï¼Œè¿™ç¯‡æ–‡ç« å¯¹äºsynchronizedçš„ä½¿ç”¨åŠåŸç†ï¼Œè¿›è¡Œäº†æ·±å…¥çš„è§£æï¼Œè¯´æ˜äº†ä¸€äº›é«˜é¢‘é¢è¯•è€ƒç‚¹ã€‚</description><pubDate>Mon, 07 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;ä»€ä¹ˆæ˜¯synchronized&lt;/h2&gt;
&lt;p&gt;synchronizedæ˜¯JVMæä¾›çš„ä¸€ä¸ªJavaè¯­è¨€çš„å…³é”®å­—ï¼Œä¸»è¦ç”¨æ¥å®ç°Javaä»£ç çš„åŒæ­¥ï¼Œä¿è¯å¤šçº¿ç¨‹æƒ…å†µä¸‹ä»£ç çš„åŸå­æ€§ã€‚&lt;/p&gt;
&lt;h2&gt;synchronizedå¸¸è§çš„ä½¿ç”¨æ–¹å¼&lt;/h2&gt;
&lt;p&gt;synchronizedæŒ‰ç…§ä¿®é¥°çš„å¯¹è±¡ï¼Œä¸»è¦æœ‰ä¸‰ç§ç”¨æ³•ï¼š&lt;/p&gt;
&lt;h3&gt;ä¿®é¥°å®ä¾‹æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;å¯¹ä¸€ä¸ªå®ä¾‹æ–¹æ³•è¿›è¡ŒåŒæ­¥ï¼Œä½œç”¨äºå½“å‰å¯¹è±¡å®ä¾‹åŠ é”ï¼Œè¿›å…¥åŒæ­¥ä»£ç å‰è¦è·å¾—å½“å‰å¯¹è±¡å®ä¾‹çš„é”ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;synchronized void method() {
    //ä¸šåŠ¡ä»£ç 
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ä¿®é¥°é™æ€æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;å¯¹ä¸€ä¸ªç±»çš„é™æ€æ–¹æ³•è¿›è¡ŒåŒæ­¥ï¼Œä¹Ÿå°±æ˜¯ç»™å½“å‰ç±»åŠ é”ï¼Œä¼šä½œâ½¤äºç±»çš„æ‰€æœ‰å¯¹è±¡å®ä¾‹ ï¼Œè¿›â¼ŠåŒæ­¥ä»£ç å‰è¦è·å¾—å½“å‰ class çš„é”ã€‚å› ä¸ºé™æ€æˆå‘˜ä¸å±äºä»»ä½•â¼€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œæ˜¯ç±»æˆå‘˜ï¼ˆ static è¡¨æ˜è¿™æ˜¯è¯¥ç±»çš„â¼€ä¸ªé™æ€èµ„æºï¼Œä¸ç®¡ new äº†å¤šå°‘ä¸ªå¯¹è±¡ï¼Œåªæœ‰â¼€ä»½ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœâ¼€ä¸ªçº¿ç¨‹ A è°ƒâ½¤â¼€ä¸ªå®ä¾‹å¯¹è±¡çš„â¾®é™æ€ synchronized â½…æ³•ï¼Œâ½½çº¿ç¨‹ B éœ€è¦è°ƒâ½¤è¿™ä¸ªå®ä¾‹å¯¹è±¡æ‰€å±ç±»çš„é™æ€ synchronized â½…æ³•ï¼Œæ˜¯å…è®¸çš„ï¼Œä¸ä¼šå‘â½£äº’æ–¥ç°è±¡ï¼Œå› ä¸ºè®¿é—®é™æ€ synchronized â½…æ³•å â½¤çš„é”æ˜¯å½“å‰ç±»çš„é”ï¼Œâ½½è®¿é—®â¾®é™æ€ synchronized â½…æ³•å â½¤çš„é”æ˜¯å½“å‰å®ä¾‹å¯¹è±¡é”ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;synchronized void staic method() {
    //ä¸šåŠ¡ä»£ç 
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ä¿®é¥°ä»£ç å—&lt;/h3&gt;
&lt;p&gt;å¯¹å¤§æ‹¬å·å†…çš„ä»£ç å—è¿›è¡ŒåŒæ­¥ï¼Œåœ¨synchronizedåé¢çš„æ‹¬å·ä¸­æŒ‡å®šåŠ é”å¯¹è±¡ï¼Œè¿™é‡Œçš„åŠ é”å¯¹è±¡å¯ä»¥æ˜¯ä¸€ä¸ªå®ä¾‹å¯¹è±¡(this|object)ï¼Œæ­¤æ—¶éœ€è¦è·å–è¿™ä¸ªå®ä¾‹å¯¹è±¡çš„é”ï¼›ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç±»(ç±».class)ï¼Œæ­¤æ—¶è¿›å…¥ä»£ç å—æ—¶éœ€è¦è·å–å¯¹åº” class çš„é”ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;synchronized(this) {
    //ä¸šåŠ¡ä»£ç 
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;synchronizedåº•å±‚åŸç†&lt;/h2&gt;
&lt;p&gt;ç”±äºsynchronizedæ˜¯Javaè¯­è¨€ä¸­æä¾›çš„å…³é”®å­—ï¼Œæ‰€ä»¥å®ƒä¸åŒäºJUCåŒ…ä¸­çš„ç›¸å…³é”å·¥å…·ï¼Œå®ƒç›´æ¥ä¾èµ–äºJVMçš„å®ç°ï¼Œæ‰€ä»¥éœ€è¦ä»JVMå±‚é¢å»ç ”ç©¶å®ƒçš„åº•å±‚åŸç†ã€‚&lt;/p&gt;
&lt;h3&gt;synchronizedæ˜¯æ€ä¹ˆåŠ é”çš„&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä¿®é¥°ä»£ç å—&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;synchronizedä¿®é¥°ä»£ç å—æ—¶ï¼ŒJVMé‡‡ç”¨&lt;code&gt;monitorenter&lt;/code&gt;ã€&lt;code&gt;monitorexit&lt;/code&gt;ä¸¤ä¸ªæŒ‡ä»¤æ¥å®ç°åŒæ­¥ï¼Œ&lt;code&gt;monitorenter&lt;/code&gt;æŒ‡ä»¤æŒ‡å‘åŒæ­¥ä»£ç å—çš„å¼€å§‹ä½ç½®ï¼Œ &lt;code&gt;monitorexit&lt;/code&gt;æŒ‡ä»¤åˆ™æŒ‡å‘åŒæ­¥ä»£ç å—çš„ç»“æŸä½ç½®ã€‚
åç¼–è¯‘ä¸€æ®µsynchronizedä¿®é¥°ä»£ç å—ä»£ç ï¼Œ&lt;code&gt;javap -c -s -v -l SynchronizedDemo.class&lt;/code&gt;ï¼Œå¯ä»¥çœ‹åˆ°ç›¸åº”çš„å­—èŠ‚ç æŒ‡ä»¤ã€‚
&lt;img src=&quot;https://images.fanschou.com/blog/concurrent-synchronized/20220307_01_001.webp&quot; alt=&quot;monitor&quot; /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¿®é¥°å®ä¾‹æ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;synchronizedä¿®é¥°åŒæ­¥æ–¹æ³•æ—¶ï¼ŒJVMé‡‡ç”¨&lt;code&gt;ACC_SYNCHRONIZED&lt;/code&gt;æ ‡è®°ç¬¦æ¥å®ç°åŒæ­¥ï¼Œè¿™ä¸ªæ ‡è¯†æŒ‡æ˜äº†è¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªåŒæ­¥æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ ·å¯ä»¥å†™æ®µä»£ç åç¼–è¯‘çœ‹ä¸€ä¸‹ã€‚
&lt;img src=&quot;https://images.fanschou.com/blog/concurrent-synchronized/20220307_01_002.webp&quot; alt=&quot;ACC_SYNCHRONIZED&quot; /&gt;&lt;/p&gt;
&lt;h3&gt;synchronizedé”ä½çš„æ˜¯ä»€ä¹ˆ&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;monitorenter&lt;/code&gt;ã€&lt;code&gt;monitorexit&lt;/code&gt;æˆ–è€…&lt;code&gt;ACC_SYNCHRONIZED&lt;/code&gt;éƒ½æ˜¯åŸºäº&lt;code&gt;Monitor&lt;/code&gt;å®ç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€è°“çš„Monitorå…¶å®æ˜¯ä¸€ç§åŒæ­¥å·¥å…·ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ä¸€ç§åŒæ­¥æœºåˆ¶ã€‚åœ¨Javaè™šæ‹Ÿæœºï¼ˆHotSpotï¼‰ä¸­ï¼ŒMonitoræ˜¯ç”±ObjectMonitorå®ç°çš„ï¼Œå¯ä»¥å«åšå†…éƒ¨é”ï¼Œæˆ–è€…Monitoré”ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ®µä»£ç æ˜¯å…³äºObjectMonitorçš„å®šä¹‰ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ObjectMonitor() {
    _header       = NULL;
    _count        = 0; // è®°å½•çº¿ç¨‹è·å–é”çš„æ¬¡æ•°
    _waiters      = 0,
    _recursions   = 0;  //é”çš„é‡å…¥æ¬¡æ•°
    _object       = NULL;
    _owner        = NULL;  // æŒ‡å‘æŒæœ‰ObjectMonitorå¯¹è±¡çš„çº¿ç¨‹
    _WaitSet      = NULL;  // å¤„äºwaitçŠ¶æ€çš„çº¿ç¨‹ï¼Œä¼šè¢«åŠ å…¥åˆ°_WaitSet
    _WaitSetLock  = 0 ;
    _Responsible  = NULL ;
    _succ         = NULL ;
    _cxq          = NULL ;
    FreeNext      = NULL ;
    _EntryList    = NULL ;  // å¤„äºç­‰å¾…é”blockçŠ¶æ€çš„çº¿ç¨‹ï¼Œä¼šè¢«åŠ å…¥åˆ°è¯¥åˆ—è¡¨
    _SpinFreq     = 0 ;
    _SpinClock    = 0 ;
    OwnerIsThread = 0 ;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ObjectMonitorçš„å·¥ä½œåŸç†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ObjectMonitoræœ‰ä¸¤ä¸ªé˜Ÿåˆ—ï¼š_WaitSetã€_EntryListï¼Œç”¨æ¥ä¿å­˜ObjectWaiter å¯¹è±¡åˆ—è¡¨ã€‚&lt;/li&gt;
&lt;li&gt;å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®æŸæ®µåŒæ­¥ä»£ç æ—¶ï¼Œé¦–å…ˆä¼šè¿›å…¥_EntryListé›†åˆ&lt;/li&gt;
&lt;li&gt;å½“çº¿ç¨‹è·å–åˆ°å¯¹è±¡çš„monitorä¹‹åï¼Œå°±ä¼šè¿›å…¥_Owner åŒºåŸŸï¼Œå¹¶æŠŠ ObjectMonitor å¯¹è±¡çš„_Owner æŒ‡å‘ä¸ºå½“å‰çº¿ç¨‹ï¼Œå¹¶ä½¿_count + 1ï¼Œå¦‚æœè°ƒç”¨äº†é‡Šæ”¾é”ï¼ˆæ¯”å¦‚ waitï¼‰çš„æ“ä½œï¼Œå°±ä¼šé‡Šæ”¾å½“å‰æŒæœ‰çš„ monitor ï¼Œowner = nullï¼Œ_count - 1ï¼ŒåŒæ—¶è¿™ä¸ªçº¿ç¨‹ä¼šè¿›å…¥åˆ°_WaitSet åˆ—è¡¨ä¸­ç­‰å¾…è¢«å”¤é†’ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœå½“å‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åä¹Ÿä¼šé‡Šæ”¾ monitor é”ï¼Œåªä¸è¿‡æ­¤æ—¶ä¸ä¼šè¿›å…¥_WaitSet åˆ—è¡¨äº†ï¼Œè€Œæ˜¯ç›´æ¥å¤ä½_count çš„å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://images.fanschou.com/blog/concurrent-synchronized/20220307_01_003.webp&quot; alt=&quot;ObjectMonitorçš„å·¥ä½œåŸç†&quot; /&gt;&lt;/p&gt;
&lt;p&gt;å®ä¾‹å¯¹è±¡ç»“æ„é‡Œæœ‰å¯¹è±¡å¤´ï¼Œå¯¹è±¡å¤´é‡Œé¢æœ‰ä¸€å—ç»“æ„å«Mark Wordï¼ŒMark WordæŒ‡é’ˆæŒ‡å‘äº†monitorã€‚&lt;/p&gt;
&lt;p&gt;å…³äºMark Wordçš„ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥åˆ°å®˜æ–¹çš„è¯´æ˜å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images.fanschou.com/blog/concurrent-synchronized/20220307_01_004.webp&quot; alt=&quot;Mark Wordçš„64ä½ç»“æ„&quot; /&gt;
&lt;img src=&quot;https://images.fanschou.com/blog/concurrent-synchronized/20220307_01_005.webp&quot; alt=&quot;Mark Wordçš„32ä½ç»“æ„&quot; /&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°Mark Wordçš„ç»“æ„åœ¨64ä½ç³»ç»Ÿå’Œ32ä½ç³»ç»Ÿä¸‹æœ‰ç»†å¾®åŒºåˆ«ï¼Œæˆ‘ä»¬ä»¥32ä½çš„ç»“æ„ä¸ºä¾‹è¿›è¡Œåˆ†æã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images.fanschou.com/blog/concurrent-synchronized/20220307_01_006.webp&quot; alt=&quot;Mark Wordçš„32ä½ç»“æ„&quot; /&gt;&lt;/p&gt;
&lt;h3&gt;é”çš„ä¼˜åŒ–&lt;/h3&gt;
&lt;p&gt;åœ¨JDK1.6ä¹‹å‰ï¼Œsynchronizedçš„å®ç°ç›´æ¥è°ƒç”¨ObjectMonitorçš„enterå’Œexitï¼Œè¿™ç§é”è¢«ç§°ä¹‹ä¸º&lt;strong&gt;é‡é‡çº§é”&lt;/strong&gt;ã€‚ä»JDK6å¼€å§‹ï¼ŒHotSpotè™šæ‹Ÿæœºå¼€å‘å›¢é˜Ÿå¯¹Javaä¸­çš„é”è¿›è¡Œä¼˜åŒ–ï¼Œå¦‚å¢åŠ äº†é€‚åº”æ€§è‡ªæ—‹ã€é”æ¶ˆé™¤ã€é”ç²—åŒ–ã€è½»é‡çº§é”å’Œåå‘é”ç­‰ä¼˜åŒ–ç­–ç•¥ï¼Œæå‡äº†synchronizedçš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åå‘é”ï¼šåœ¨æ— ç«äº‰çš„æƒ…å†µä¸‹ï¼Œåªæ˜¯åœ¨Mark Wordé‡Œå­˜å‚¨å½“å‰çº¿ç¨‹æŒ‡é’ˆï¼ŒCASæ“ä½œéƒ½ä¸åšã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è½»é‡çº§é”ï¼šåœ¨æ²¡æœ‰å¤šçº¿ç¨‹ç«äº‰æ—¶ï¼Œç›¸å¯¹é‡é‡çº§é”ï¼Œå‡å°‘æ“ä½œç³»ç»Ÿäº’æ–¥é‡å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ã€‚ä½†æ˜¯ï¼Œå¦‚æœå­˜åœ¨é”ç«äº‰ï¼Œé™¤äº†äº’æ–¥é‡æœ¬èº«å¼€é”€ï¼Œè¿˜é¢å¤–æœ‰CASæ“ä½œçš„å¼€é”€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è‡ªæ—‹é”ï¼šå‡å°‘ä¸å¿…è¦çš„CPUä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚åœ¨è½»é‡çº§é”å‡çº§ä¸ºé‡é‡çº§é”æ—¶ï¼Œå°±ä½¿ç”¨äº†è‡ªæ—‹åŠ é”çš„æ–¹å¼&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é”ç²—åŒ–ï¼šå°†å¤šä¸ªè¿ç»­çš„åŠ é”ã€è§£é”æ“ä½œè¿æ¥åœ¨ä¸€èµ·ï¼Œæ‰©å±•æˆä¸€ä¸ªèŒƒå›´æ›´å¤§çš„é”ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é”æ¶ˆé™¤ï¼šè™šæ‹Ÿæœºå³æ—¶ç¼–è¯‘å™¨åœ¨è¿è¡Œæ—¶ï¼Œå¯¹ä¸€äº›ä»£ç ä¸Šè¦æ±‚åŒæ­¥ï¼Œä½†æ˜¯è¢«æ£€æµ‹åˆ°ä¸å¯èƒ½å­˜åœ¨å…±äº«æ•°æ®ç«äº‰çš„é”è¿›è¡Œæ¶ˆé™¤ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨ä¸Šé¢æåˆ°çš„ä¼˜åŒ–ä¸­ï¼Œé”çš„é€æ­¥å‡çº§æ˜¯æœ€å¸¸è¢«é—®åˆ°çš„é—®é¢˜ï¼Œæˆ‘ä»¬æœ‰å¿…è¦è¯¦ç»†çš„åˆ†æä¸€ä¸‹é”å‡çº§çš„æ•´ä¸ªè¿‡ç¨‹ã€‚
é”çš„å‡çº§æ–¹å‘ï¼šæ— é”--&amp;gt;åå‘é”---&amp;gt; è½»é‡çº§é”----&amp;gt;é‡é‡çº§é”ï¼Œè¿™ä¸ªæ–¹å‘åŸºæœ¬ä¸Šæ˜¯ä¸å¯é€†çš„ã€‚&lt;/p&gt;
&lt;h4&gt;åå‘é”&lt;/h4&gt;
&lt;p&gt;åå‘é”çš„è·å–ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆ¤æ–­æ˜¯å¦ä¸ºå¯åå‘çŠ¶æ€--MarkWordä¸­é”æ ‡å¿—æ˜¯å¦ä¸º&lt;code&gt;01&lt;/code&gt;ï¼Œæ˜¯å¦åå‘é”æ˜¯å¦ä¸º&lt;code&gt;1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å¦‚æœæ˜¯å¯åå‘çŠ¶æ€ï¼Œåˆ™æŸ¥çœ‹çº¿ç¨‹IDæ˜¯å¦ä¸ºå½“å‰çº¿ç¨‹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿›å…¥&lt;code&gt;æ­¥éª¤5&lt;/code&gt;ï¼Œå¦åˆ™è¿›å…¥&lt;code&gt;æ­¥éª¤3&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;é€šè¿‡CASæ“ä½œç«äº‰é”ï¼Œå¦‚æœç«äº‰æˆåŠŸï¼Œåˆ™å°†MarkWordä¸­çº¿ç¨‹IDè®¾ç½®ä¸ºå½“å‰çº¿ç¨‹IDï¼Œç„¶åæ‰§è¡Œ&lt;code&gt;æ­¥éª¤5&lt;/code&gt;ï¼›ç«äº‰å¤±è´¥ï¼Œåˆ™æ‰§è¡Œ&lt;code&gt;æ­¥éª¤4&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;CASè·å–åå‘é”å¤±è´¥è¡¨ç¤ºæœ‰ç«äº‰ã€‚å½“è¾¾åˆ°safepointæ—¶è·å¾—åå‘é”çš„çº¿ç¨‹è¢«æŒ‚èµ·ï¼Œåå‘é”å‡çº§ä¸ºè½»é‡çº§é”ï¼Œç„¶åè¢«é˜»å¡åœ¨å®‰å…¨ç‚¹çš„çº¿ç¨‹ç»§ç»­å¾€ä¸‹æ‰§è¡ŒåŒæ­¥ä»£ç å—&lt;/li&gt;
&lt;li&gt;æ‰§è¡ŒåŒæ­¥ä»£ç &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åå‘é”çš„æ’¤é”€ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åå‘é”ä¸ä¼šä¸»åŠ¨é‡Šæ”¾(æ’¤é”€)ï¼Œåªæœ‰é‡åˆ°å…¶ä»–çº¿ç¨‹ç«äº‰æ—¶æ‰ä¼šæ‰§è¡Œæ’¤é”€ï¼Œç”±äºæ’¤é”€éœ€è¦çŸ¥é“å½“å‰æŒæœ‰è¯¥åå‘é”çš„çº¿ç¨‹æ ˆçŠ¶æ€ï¼Œå› æ­¤è¦ç­‰åˆ°safepointæ—¶æ‰§è¡Œï¼Œæ­¤æ—¶æŒæœ‰è¯¥åå‘é”çš„çº¿ç¨‹ï¼ˆTï¼‰æœ‰&lt;code&gt;æ­¥éª¤2&lt;/code&gt;ï¼Œ&lt;code&gt;æ­¥éª¤3&lt;/code&gt;ä¸¤ç§æƒ…å†µï¼›&lt;/li&gt;
&lt;li&gt;æ’¤é”€----Tçº¿ç¨‹å·²ç»é€€å‡ºåŒæ­¥ä»£ç å—ï¼Œæˆ–è€…å·²ç»ä¸å†å­˜æ´»ï¼Œåˆ™ç›´æ¥æ’¤é”€åå‘é”ï¼Œå˜æˆæ— é”çŠ¶æ€----è¯¥çŠ¶æ€è¾¾åˆ°é˜ˆå€¼20åˆ™æ‰§è¡Œæ‰¹é‡é‡åå‘&lt;/li&gt;
&lt;li&gt;å‡çº§----Tçº¿ç¨‹è¿˜åœ¨åŒæ­¥ä»£ç å—ä¸­ï¼Œåˆ™å°†Tçº¿ç¨‹çš„åå‘é”å‡çº§ä¸ºè½»é‡çº§é”ï¼Œå½“å‰çº¿ç¨‹æ‰§è¡Œè½»é‡çº§é”çŠ¶æ€ä¸‹çš„é”è·å–æ­¥éª¤----è¯¥çŠ¶æ€è¾¾åˆ°é˜ˆå€¼40åˆ™æ‰§è¡Œæ‰¹é‡æ’¤é”€&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;https://images.fanschou.com/blog/concurrent-synchronized/20220307_01_007.webp&quot; alt=&quot;åå‘é”å‡çº§æµç¨‹&quot; /&gt;&lt;/p&gt;
&lt;h4&gt;è½»é‡çº§é”&lt;/h4&gt;
&lt;p&gt;è½»é‡çº§é”çš„è·å–ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¿›è¡ŒåŠ é”æ“ä½œæ—¶ï¼ŒJVMä¼šåˆ¤æ–­æ˜¯å¦å·²ç»æ—¶é‡é‡çº§é”ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ä¼šåœ¨å½“å‰çº¿ç¨‹æ ˆå¸§ä¸­åˆ’å‡ºä¸€å—ç©ºé—´ï¼Œä½œä¸ºè¯¥é”çš„é”è®°å½•ï¼Œå¹¶ä¸”å°†é”å¯¹è±¡MarkWordå¤åˆ¶åˆ°è¯¥é”è®°å½•ä¸­&lt;/li&gt;
&lt;li&gt;å¤åˆ¶æˆåŠŸä¹‹åï¼ŒJVMä½¿ç”¨CASæ“ä½œå°†å¯¹è±¡å¤´MarkWordæ›´æ–°ä¸ºæŒ‡å‘é”è®°å½•çš„æŒ‡é’ˆï¼Œå¹¶å°†é”è®°å½•é‡Œçš„owneræŒ‡é’ˆæŒ‡å‘å¯¹è±¡å¤´çš„MarkWordã€‚å¦‚æœæˆåŠŸï¼Œåˆ™æ‰§è¡Œ&lt;code&gt;æ­¥éª¤3&lt;/code&gt;ï¼Œå¦åˆ™æ‰§è¡Œ&lt;code&gt;æ­¥éª¤4&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æ›´æ–°æˆåŠŸï¼Œåˆ™å½“å‰çº¿ç¨‹æŒæœ‰è¯¥å¯¹è±¡é”ï¼Œå¹¶ä¸”å¯¹è±¡MarkWordé”æ ‡å¿—è®¾ç½®ä¸º&lt;code&gt;00&lt;/code&gt;ï¼Œå³è¡¨ç¤ºæ­¤å¯¹è±¡å¤„äºè½»é‡çº§é”çŠ¶æ€&lt;/li&gt;
&lt;li&gt;æ›´æ–°å¤±è´¥ï¼ŒJVMå…ˆæ£€æŸ¥å¯¹è±¡MarkWordæ˜¯å¦æŒ‡å‘å½“å‰çº¿ç¨‹æ ˆå¸§ä¸­çš„é”è®°å½•ï¼Œå¦‚æœæ˜¯åˆ™æ‰§è¡Œ&lt;code&gt;æ­¥éª¤5&lt;/code&gt;ï¼Œå¦åˆ™æ‰§è¡Œ&lt;code&gt;æ­¥éª¤4&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;è¡¨ç¤ºé”é‡å…¥ï¼›ç„¶åå½“å‰çº¿ç¨‹æ ˆå¸§ä¸­å¢åŠ ä¸€ä¸ªé”è®°å½•ç¬¬ä¸€éƒ¨åˆ†ï¼ˆDisplaced Mark Wordï¼‰ä¸ºnullï¼Œå¹¶æŒ‡å‘Mark Wordçš„é”å¯¹è±¡ï¼Œèµ·åˆ°ä¸€ä¸ªé‡å…¥è®¡æ•°å™¨çš„ä½œç”¨ã€‚&lt;/li&gt;
&lt;li&gt;è¡¨ç¤ºè¯¥é”å¯¹è±¡å·²ç»è¢«å…¶ä»–çº¿ç¨‹æŠ¢å ï¼Œåˆ™è¿›è¡Œè‡ªæ—‹ç­‰å¾…ï¼ˆé»˜è®¤10æ¬¡ï¼‰ï¼Œç­‰å¾…æ¬¡æ•°è¾¾åˆ°é˜ˆå€¼ä»æœªè·å–åˆ°é”ï¼Œåˆ™å‡çº§ä¸ºé‡é‡çº§é”&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;https://images.fanschou.com/blog/concurrent-synchronized/20220307_01_008.webp&quot; alt=&quot;è½»é‡çº§é”å‡çº§æµç¨‹&quot; /&gt;&lt;/p&gt;
&lt;h4&gt;é‡é‡çº§é”&lt;/h4&gt;
&lt;p&gt;å†å®Œæ•´çš„çœ‹ä¸€éåˆ°é‡é‡çº§é”çš„å‡çº§
&lt;img src=&quot;https://images.fanschou.com/blog/concurrent-synchronized/20220307_01_009.webp&quot; alt=&quot;é‡é‡çº§é”å‡çº§æµç¨‹&quot; /&gt;&lt;/p&gt;
&lt;h4&gt;å‡ ç§é”çŠ¶æ€çš„å¯¹æ¯”&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é”ç±»å‹&lt;/th&gt;
&lt;th&gt;é€‚ç”¨åœºæ™¯&lt;/th&gt;
&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;
&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;åå‘é”&lt;/td&gt;
&lt;td&gt;é€‚ç”¨äºåªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®çš„åŒæ­¥åœºæ™¯&lt;/td&gt;
&lt;td&gt;å¦‚æœå­˜åœ¨å¤šä¸ªçº¿ç¨‹ç«äº‰ä½¿ç”¨é”ï¼Œä¼šå¸¦æ¥é¢å¤–çš„é”æ’¤é”€æ¶ˆè€—&lt;/td&gt;
&lt;td&gt;åŠ é”å’Œè§£é”æ¶ˆè€—å°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;è½»é‡çº§é”&lt;/td&gt;
&lt;td&gt;é€‚ç”¨äºè¿½æ±‚å“åº”æ—¶é—´çš„åº”ç”¨åœºæ™¯&lt;/td&gt;
&lt;td&gt;å¦‚æœå§‹ç»ˆå¾—ä¸åˆ°èµ„æºï¼Œä¼šè‡ªæ—‹æ¶ˆè€—CPU&lt;/td&gt;
&lt;td&gt;æé«˜ç¨‹åºå“åº”é€Ÿåº¦&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é‡é‡çº§é”&lt;/td&gt;
&lt;td&gt;é€‚ç”¨äºè¿½æ±‚ååé‡çš„åº”ç”¨åœºæ™¯&lt;/td&gt;
&lt;td&gt;å¾—ä¸åˆ°é”çš„çº¿ç¨‹ä¼šé˜»å¡ï¼Œæ€§èƒ½æ¯”è¾ƒå·®&lt;/td&gt;
&lt;td&gt;é˜»å¡ï¼Œä¸éœ€è¦æ¶ˆè€—CPU&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;synchronizedæ€ä¹ˆä¿è¯å¯è§æ€§&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;çº¿ç¨‹åŠ é”å‰ï¼Œå°†æ¸…ç©ºå·¥ä½œå†…å­˜ä¸­å…±äº«å˜é‡çš„å€¼ï¼Œä»è€Œä½¿ç”¨å…±äº«å˜é‡æ—¶éœ€è¦ä»ä¸»å†…å­˜ä¸­é‡æ–°è¯»å–æœ€æ–°çš„å€¼ã€‚&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹åŠ é”åï¼Œå…¶å®ƒçº¿ç¨‹æ— æ³•è·å–ä¸»å†…å­˜ä¸­çš„å…±äº«å˜é‡ã€‚&lt;/li&gt;
&lt;li&gt;çº¿ç¨‹è§£é”å‰ï¼Œå¿…é¡»æŠŠå…±äº«å˜é‡çš„æœ€æ–°å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;synchronizedæ€ä¹ˆä¿è¯æœ‰åºæ€§&lt;/h3&gt;
&lt;p&gt;synchronizedåŒæ­¥çš„ä»£ç å—ï¼Œå…·æœ‰æ’ä»–æ€§ï¼Œä¸€æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æ‹¥æœ‰ï¼Œæ‰€ä»¥synchronizedä¿è¯åŒä¸€æ—¶åˆ»ï¼Œä»£ç æ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„ã€‚
å› ä¸ºas-if-serialè¯­ä¹‰çš„å­˜åœ¨ï¼Œå•çº¿ç¨‹çš„ç¨‹åºèƒ½ä¿è¯æœ€ç»ˆç»“æœæ˜¯æœ‰åºçš„ï¼Œä½†æ˜¯ä¸ä¿è¯ä¸ä¼šæŒ‡ä»¤é‡æ’ã€‚
æ‰€ä»¥synchronizedä¿è¯çš„æœ‰åºæ˜¯&lt;strong&gt;æ‰§è¡Œç»“æœçš„æœ‰åºæ€§&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯é˜²æ­¢&lt;strong&gt;æŒ‡ä»¤é‡æ’çš„æœ‰åºæ€§&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h3&gt;synchronizedæ€ä¹ˆå®ç°å¯é‡å…¥çš„å‘¢&lt;/h3&gt;
&lt;p&gt;synchronized æ˜¯å¯é‡å…¥é”ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå…è®¸ä¸€ä¸ªçº¿ç¨‹äºŒæ¬¡è¯·æ±‚è‡ªå·±æŒæœ‰å¯¹è±¡é”çš„ä¸´ç•Œèµ„æºï¼Œè¿™ç§æƒ…å†µç§°ä¸ºå¯é‡å…¥é”ã€‚
synchronized é”å¯¹è±¡çš„æ—¶å€™æœ‰ä¸ªè®¡æ•°å™¨ï¼Œä»–ä¼šè®°å½•ä¸‹çº¿ç¨‹è·å–é”çš„æ¬¡æ•°ï¼Œåœ¨æ‰§è¡Œå®Œå¯¹åº”çš„ä»£ç å—ä¹‹åï¼Œè®¡æ•°å™¨å°±ä¼š-1ï¼Œç›´åˆ°è®¡æ•°å™¨æ¸…é›¶ï¼Œå°±é‡Šæ”¾é”äº†ã€‚
ä¹‹æ‰€ä»¥ï¼Œæ˜¯å¯é‡å…¥çš„ã€‚æ˜¯å› ä¸º synchronized é”å¯¹è±¡æœ‰ä¸ªè®¡æ•°å™¨ï¼Œä¼šéšç€çº¿ç¨‹è·å–é”å +1 è®¡æ•°ï¼Œå½“çº¿ç¨‹æ‰§è¡Œå®Œæ¯•å -1ï¼Œç›´åˆ°æ¸…é›¶é‡Šæ”¾é”ã€‚&lt;/p&gt;
&lt;h2&gt;synchronizedä¸ReentrantLockçš„åŒºåˆ«&lt;/h2&gt;
&lt;p&gt;é€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œå¯ä»¥å‘ç°synchronizedä¸JUCä¸­çš„Lockç›¸å…³å·¥å…·ç±»å…·æœ‰ä¸€å®šçš„ç›¸ä¼¼æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ReentrantLockä¸ºä¾‹åˆ†æä¸€ä¸‹ä¸¤è€…çš„åŒºåˆ«ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;é”çš„å®ç°&lt;/strong&gt;ï¼š synchronizedæ˜¯Javaè¯­è¨€çš„å…³é”®å­—ï¼ŒåŸºäºJVMå®ç°ã€‚è€ŒReentrantLockæ˜¯åŸºäºJDKçš„APIå±‚é¢å®ç°çš„ï¼ˆä¸€èˆ¬æ˜¯lock()å’Œunlock()æ–¹æ³•é…åˆtry/finally è¯­å¥å—æ¥å®Œæˆã€‚ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ€§èƒ½&lt;/strong&gt;ï¼š åœ¨JDK1.6é”ä¼˜åŒ–ä»¥å‰ï¼Œsynchronizedçš„æ€§èƒ½æ¯”ReenTrantLockå·®å¾ˆå¤šã€‚ä½†æ˜¯JDK6å¼€å§‹ï¼Œå¢åŠ äº†é€‚åº”æ€§è‡ªæ—‹ã€é”æ¶ˆé™¤ç­‰ï¼Œä¸¤è€…æ€§èƒ½å°±å·®ä¸å¤šäº†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;åŠŸèƒ½ç‰¹ç‚¹&lt;/strong&gt;ï¼š ReentrantLock æ¯” synchronized å¢åŠ äº†ä¸€äº›é«˜çº§åŠŸèƒ½ï¼Œå¦‚ç­‰å¾…å¯ä¸­æ–­ã€å¯å®ç°å…¬å¹³é”ã€å¯å®ç°é€‰æ‹©æ€§é€šçŸ¥ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ReentrantLockæä¾›äº†ä¸€ç§èƒ½å¤Ÿä¸­æ–­ç­‰å¾…é”çš„çº¿ç¨‹çš„æœºåˆ¶ï¼Œé€šè¿‡lock.lockInterruptibly()æ¥å®ç°è¿™ä¸ªæœºåˆ¶&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ReentrantLockå¯ä»¥æŒ‡å®šæ˜¯å…¬å¹³é”è¿˜æ˜¯éå…¬å¹³é”ã€‚è€Œsynchronizedåªèƒ½æ˜¯éå…¬å¹³é”ã€‚æ‰€è°“çš„å…¬å¹³é”å°±æ˜¯å…ˆç­‰å¾…çš„çº¿ç¨‹å…ˆè·å¾—é”ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;synchronizedä¸wait()å’Œnotify()/notifyAll()æ–¹æ³•ç»“åˆå®ç°ç­‰å¾…/é€šçŸ¥æœºåˆ¶ï¼ŒReentrantLockç±»å€ŸåŠ©Conditionæ¥å£ä¸newCondition()æ–¹æ³•å®ç°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ReentrantLockéœ€è¦æ‰‹å·¥å£°æ˜æ¥åŠ é”å’Œé‡Šæ”¾é”ï¼Œä¸€èˆ¬è·Ÿfinallyé…åˆé‡Šæ”¾é”ã€‚è€Œsynchronizedä¸ç”¨æ‰‹åŠ¨é‡Šæ”¾é”ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢çš„è¡¨æ ¼åˆ—å‡ºå‡ºäº†ä¸¤ç§é”ä¹‹é—´çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åŒºåˆ«&lt;/th&gt;
&lt;th&gt;synchronized&lt;/th&gt;
&lt;th&gt;ReentrantLock&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;é”å®ç°æœºåˆ¶&lt;/td&gt;
&lt;td&gt;å¯¹è±¡å¤´ç›‘è§†å™¨æ¨¡å¼&lt;/td&gt;
&lt;td&gt;ä¾èµ–AQS&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;çµæ´»æ€§&lt;/td&gt;
&lt;td&gt;ä¸çµæ´»&lt;/td&gt;
&lt;td&gt;æ”¯æŒå“åº”ä¸­æ–­ã€è¶…æ—¶ã€å°è¯•è·å–é”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é‡Šæ”¾é”å½¢å¼&lt;/td&gt;
&lt;td&gt;è‡ªåŠ¨é‡Šæ”¾é”&lt;/td&gt;
&lt;td&gt;æ˜¾å¼è°ƒç”¨unlockæ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ”¯æŒé”ç±»å‹&lt;/td&gt;
&lt;td&gt;éå…¬å¹³é”&lt;/td&gt;
&lt;td&gt;å…¬å¹³é”&amp;amp;éå…¬å¹³é”&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ¡ä»¶é˜Ÿåˆ—&lt;/td&gt;
&lt;td&gt;å•æ¡ä»¶é˜Ÿåˆ—&lt;/td&gt;
&lt;td&gt;å¤šä¸ªæ¡ä»¶é˜Ÿåˆ—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¯é‡å…¥æ”¯æŒ&lt;/td&gt;
&lt;td&gt;æ”¯æŒ&lt;/td&gt;
&lt;td&gt;æ”¯æŒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
</content:encoded><author>Fan Zhou</author></item><item><title>æ’åºç®—æ³•ç³»åˆ—ä¹‹å†’æ³¡æ’åº</title><link>https://www.fanschou.com/posts/algorithm/algorithm-sort-bubble/</link><guid isPermaLink="true">https://www.fanschou.com/posts/algorithm/algorithm-sort-bubble/</guid><description>æœ¬ç¯‡æ–‡ç« ä»‹ç»äº†å¸¸è§çš„æ’åºç®—æ³•â€”â€”å†’æ³¡æ’åºçš„æ’åºè¿‡ç¨‹ï¼ŒèŠä¸€èŠå®ƒçš„æ—¶é—´å¤æ‚åº¦å’Œç¨³å®šæ€§ï¼Œä»¥åŠå¯ä»¥å¯¹å®ƒè¿›è¡Œçš„ä¸€äº›ä¼˜åŒ–ã€‚</description><pubDate>Sat, 10 Jul 2021 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;å†’æ³¡æ’åºæ˜¯ä¸€ä¸ªæ¯”è¾ƒç»å…¸å’Œç®€å•çš„æ’åºç®—æ³•ï¼Œç»å…¸å’Œç®€å•åˆ°å¦‚æœæœ‰äººè®©æˆ‘éšä¾¿å†™ä¸€ä¸ªæ’åºç®—æ³•ï¼Œæˆ‘ç¬¬ä¸€æ—¶é—´å°±ä¼šå†™å†’æ³¡æ’åºğŸ¤£ã€‚ä»Šå¤©æˆ‘ä»¬ä»ç®—æ³•æœ¬èº«ã€æ—¶é—´å¤æ‚åº¦ä»¥åŠç¨³å®šæ€§æ–¹é¢æ¥çœ‹çœ‹å†’æ³¡æ’åºï¼Œå¹¶ä¸”æ€è€ƒä¸€ä¸‹èƒ½åšæ€æ ·çš„ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;h2&gt;æ’åºæ€æƒ³&lt;/h2&gt;
&lt;p&gt;å¯¹å€¼çš„æ’åºï¼ŒæŠ½è±¡æ¥çœ‹ï¼Œå…¶å®åšäº†ä¸¤ä¸ªæ­¥éª¤ï¼š&lt;strong&gt;æ¯”è¾ƒ&lt;/strong&gt; å’Œ &lt;strong&gt;å°†å€¼æ”¾åœ¨æ­£ç¡®çš„ä½ç½®&lt;/strong&gt;ã€‚åŸºäºè¿™ä¸¤ç‚¹ï¼Œæˆ‘ä»¬å‘ç°ã€Œæ¯”è¾ƒã€è¿™ä¸ªåŠ¨ä½œæ˜¯æ‰€æœ‰æ’åºç®—æ³•éƒ½ä¼šåšçš„ï¼Œä¸åŒçš„æ’åºç®—æ³•ä¹‹é—´ï¼Œä»–ä»¬å¦‚ä½•å°†å€¼æ”¾åœ¨æ­£ç¡®çš„ä½ç½®å‡ ä¹å°±æ˜¯æ ¸å¿ƒç‚¹ã€‚å†’æ³¡æ’åºå¦‚ä½•å°†å€¼æ”¾åœ¨æ­£ç¡®çš„ä½ç½®å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œå†’æ³¡æ’åºçš„åå­—å°±æ­ç¤ºäº†å®ƒçš„æ ¸å¿ƒæ€æƒ³ï¼Œå°±æ˜¯åƒæ°´ä¸­çš„é±¼åæ³¡ä¸€æ ·ï¼Œæ…¢æ…¢å†’æ³¡ä¸Šæ¥ã€‚æˆ‘ä»¬å¯ä»¥æƒ³è±¡ï¼Œé±¼åœ¨æ°´ä¸­åæ³¡æ—¶ï¼Œè¶Šé è¿‘é±¼å˜´çš„åœ°æ–¹ï¼Œæ³¡æ³¡è¶Šå°ï¼Œå½“é è¿‘æ°´é¢æ—¶ï¼Œæ³¡æ³¡è¶Šå¤§ã€‚æˆ‘ä»¬å€Ÿé‰´è¿™ä¸ªæ€è·¯ï¼Œå°†ä¸€ä¸ªå¾…æ’åºçš„é˜Ÿåˆ—ä¸­ç›¸é‚»çš„ä¸¤ä¸ªå€¼ä¾æ¬¡æ¯”è¾ƒï¼Œè°æ¯”è¾ƒå¤§ï¼Œå°±å°†å®ƒäº¤æ¢åˆ°åé¢çš„ä¸€ä¸ªä½ç½®ï¼Œå½“ä¸€è½®æ¯”è¾ƒä¹‹åï¼Œæˆ‘ä»¬ä¼šå‘ç°æœ€å¤§çš„å€¼è‡ªç„¶å°±ä¼šåˆ°æœ€åé¢çš„ä½ç½®ã€‚æˆ‘ä»¬é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œæ¯æ¬¡éƒ½ä¼šå°†ä¸€ä¸ªæœ€å¤§çš„å€¼æ’åˆ°åé¢ï¼Œç›´åˆ°æœ€åæ•´ä¸ªå¾…æ’åºçš„é˜Ÿåˆ—å˜æˆæœ‰åºçš„ã€‚å°±åƒå†’æ³¡ä¸€æ ·ï¼Œæ…¢æ…¢çš„æŠŠå¤§çš„æ³¡å†’åˆ°æ°´é¢ä¸Šæ¥ã€‚&lt;/p&gt;
&lt;p&gt;è¯´äº†è¿™ä¹ˆå¤šæŠ½è±¡çš„æ–¹æ³•ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å€ŸåŠ©ä¸€ä¸ªä¾‹å­æ¼”ç¤ºä¸€ä¸‹å®Œæ•´çš„æ’åºè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h2&gt;æ’åºè¿‡ç¨‹&lt;/h2&gt;
&lt;p&gt;å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªå¾…æ’åºçš„é˜Ÿåˆ—ï¼š[4, 5, 3, 1, 8, 7, 6, 9, 2]ï¼Œæˆ‘ä»¬å¼€å§‹ç¬¬ä¸€è½®å†’æ³¡ï¼Œ
&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-sort-bubble/20210710_01_001.webp&quot; alt=&quot;å¾…æ’åºé˜Ÿåˆ—&quot; /&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆæ¯”è¾ƒç¬¬ä¸€å¯¹ç›¸é‚»çš„å€¼[4, 5]ï¼Œæˆ‘ä»¬å‘ç° 5 æ¯” 4 å¤§ï¼Œå¹¶ä¸”ä½ç½®ä¹Ÿåœ¨ 4 çš„åé¢ï¼Œä¿æŒä¸åŠ¨
&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-sort-bubble/20210710_01_002.webp&quot; alt=&quot;ç¬¬ä¸€æ¬¡æ¯”è¾ƒ&quot; /&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒæ¬¡æ¯”è¾ƒ[5, 3]ï¼Œæˆ‘ä»¬å‘ç° 5 æ¯” 3 å¤§ï¼Œ5 çš„ä½ç½®åœ¨ 3 çš„å‰é¢ï¼Œæˆ‘ä»¬åšä¸€æ¬¡äº¤æ¢ï¼Œæ­¤æ—¶çš„é˜Ÿåˆ—å˜æˆäº†[4, 3, 5, 1, 8, 7, 6, 9, 2]
&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-sort-bubble/20210710_01_003.webp&quot; alt=&quot;ç¬¬äºŒæ¬¡æ¯”è¾ƒ&quot; /&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸‰æ¬¡æ¯”è¾ƒ[5, 1]ï¼Œæˆ‘ä»¬å‘ç° 5 æ¯” 1 å¤§ï¼Œ5 çš„ä½ç½®åœ¨ 1 çš„å‰é¢ï¼Œæˆ‘ä»¬åšä¸€æ¬¡äº¤æ¢ï¼Œæ­¤æ—¶çš„é˜Ÿåˆ—å˜æˆäº†[4, 3, 1, 5, 8, 7, 6, 9, 2]
&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-sort-bubble/20210710_01_004.webp&quot; alt=&quot;ç¬¬ä¸‰æ¬¡æ¯”è¾ƒ&quot; /&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬å››æ¬¡æ¯”è¾ƒ[5, 8]ï¼Œæˆ‘ä»¬å‘ç° 8 æ¯” 5 å¤§ï¼Œ5 çš„ä½ç½®åœ¨ 8 çš„å‰é¢ï¼Œä¿æŒä¸åŠ¨ï¼Œæ­¤æ—¶çš„é˜Ÿåˆ—æ²¡æœ‰å˜åŒ–[4, 3, 1, 5, 8, 7, 6, 9, 2]
&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-sort-bubble/20210710_01_005.webp&quot; alt=&quot;ç¬¬å››æ¬¡æ¯”è¾ƒ&quot; /&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬äº”æ¬¡æ¯”è¾ƒ[8, 7]ï¼Œæˆ‘ä»¬å‘ç° 8 æ¯” 7 å¤§ï¼Œ8 çš„ä½ç½®åœ¨ 7 çš„å‰é¢ï¼Œæˆ‘ä»¬åšä¸€æ¬¡äº¤æ¢ï¼Œæ­¤æ—¶çš„é˜Ÿåˆ—å˜æˆäº†[4, 3, 1, 5, 7, 8, 6, 9, 2]
&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-sort-bubble/20210710_01_006.webp&quot; alt=&quot;ç¬¬äº”æ¬¡æ¯”è¾ƒ&quot; /&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬å…­æ¬¡æ¯”è¾ƒ[8, 6]ï¼Œæˆ‘ä»¬å‘ç° 8 æ¯” 6 å¤§ï¼Œ8 çš„ä½ç½®åœ¨ 6 çš„å‰é¢ï¼Œæˆ‘ä»¬åšä¸€æ¬¡äº¤æ¢ï¼Œæ­¤æ—¶çš„é˜Ÿåˆ—å˜æˆäº†[4, 3, 1, 5, 7, 6, 8, 9, 2]
&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-sort-bubble/20210710_01_007.webp&quot; alt=&quot;ç¬¬å…­æ¬¡æ¯”è¾ƒ&quot; /&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸ƒæ¬¡æ¯”è¾ƒ[8, 9]ï¼Œæˆ‘ä»¬å‘ç° 9 æ¯” 8 å¤§ï¼Œ8 çš„ä½ç½®åœ¨ 9 çš„å‰é¢ï¼Œä¿æŒä¸åŠ¨ï¼Œæ­¤æ—¶çš„é˜Ÿåˆ—æ²¡æœ‰å˜åŒ–[4, 3, 1, 5, 7, 6, 8, 9, 2]
&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-sort-bubble/20210710_01_008.webp&quot; alt=&quot;ç¬¬ä¸ƒæ¬¡æ¯”è¾ƒ&quot; /&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬å…«æ¬¡æ¯”è¾ƒ[9, 2]ï¼Œæˆ‘ä»¬å‘ç° 9 æ¯” 2 å¤§ï¼Œ9 çš„ä½ç½®åœ¨ 2 çš„å‰é¢ï¼Œæˆ‘ä»¬åšä¸€æ¬¡äº¤æ¢ï¼Œæ­¤æ—¶çš„é˜Ÿåˆ—å˜æˆäº†[4, 3, 1, 5, 7, 6, 8, 2, 9]
&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-sort-bubble/20210710_01_009.webp&quot; alt=&quot;ç¬¬å…«æ¬¡æ¯”è¾ƒ&quot; /&gt;&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶æˆ‘ä»¬å‘ç°ï¼Œä¸€è½®å†’æ³¡æ¯”è¾ƒå·²ç»ç»“æŸï¼Œæœ€å¤§çš„æ•°å­— 9 ä»¥åŠåˆ°äº†é˜Ÿåˆ—çš„æœ€åï¼Œæ²¡æœ‰æ¯” 9 æ›´å¤§çš„ã€Œæ³¡ã€äº†ã€‚
æˆ‘ä»¬æŒ‰ç…§åŒæ ·çš„æ€è·¯è¿›è¡Œç¬¬äºŒè½®å†’æ³¡ï¼Œå¾—åˆ°çš„ç»“æœä¸º[3, 1, 4, 5, 6, 7, 2, 8, 9]ï¼Œ
&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-sort-bubble/20210710_01_010.webp&quot; alt=&quot;ç¬¬äºŒè½®æ¯”è¾ƒ&quot; /&gt;
è¿›è¡Œç¬¬ä¸‰è½®å†’æ³¡ï¼Œå¾—åˆ°çš„ç»“æœä¸º[1, 3, 4, 5, 6, 2, 7, 8, 9]ï¼Œ
&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-sort-bubble/20210710_01_011.webp&quot; alt=&quot;ç¬¬ä¸‰è½®æ¯”è¾ƒ&quot; /&gt;
è¿›è¡Œç¬¬å››è½®å†’æ³¡ï¼Œå¾—åˆ°çš„ç»“æœä¸º[1, 3, 4, 5, 2, 6, 7, 8, 9]ï¼Œ
&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-sort-bubble/20210710_01_012.webp&quot; alt=&quot;ç¬¬å››è½®æ¯”è¾ƒ&quot; /&gt;
è¿›è¡Œç¬¬äº”è½®å†’æ³¡ï¼Œå¾—åˆ°çš„ç»“æœä¸º[1, 3, 4, 2, 5, 6, 7, 8, 9]ï¼Œ
&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-sort-bubble/20210710_01_013.webp&quot; alt=&quot;ç¬¬äº”è½®æ¯”è¾ƒ&quot; /&gt;
è¿›è¡Œç¬¬å…­è½®å†’æ³¡ï¼Œå¾—åˆ°çš„ç»“æœä¸º[1, 3, 2, 4, 5, 6, 7, 8, 9]ï¼Œ
&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-sort-bubble/20210710_01_014.webp&quot; alt=&quot;ç¬¬å…­è½®æ¯”è¾ƒ&quot; /&gt;
è¿›è¡Œç¬¬ä¸ƒè½®å†’æ³¡ï¼Œå¾—åˆ°çš„ç»“æœä¸º[1, 2, 3, 4, 5, 6, 7, 8, 9]ï¼Œæ­¤æ—¶é˜Ÿåˆ—å·²ç»å®Œå…¨æœ‰åºï¼Œæ’åºå·¥ä½œç»“æŸã€‚
&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-sort-bubble/20210710_01_015.webp&quot; alt=&quot;ç¬¬ä¸ƒè½®æ¯”è¾ƒ&quot; /&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬å®Œæ•´çš„çœ‹ä¸€éåŠ¨ç”»æ¼”ç¤º
&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-sort-bubble/20210710_01_016.gif&quot; alt=&quot;å®Œæ•´åŠ¨ç”»&quot; /&gt;&lt;/p&gt;
&lt;h2&gt;ä»£ç å®ç°&lt;/h2&gt;
&lt;p&gt;äº†è§£äº†å†’æ³¡æ’åºçš„æ•´ä¸ªæ’åºè¿‡ç¨‹ï¼Œæˆ‘ä»¬ç”¨ä»£ç å°†å®ƒå®ç°ä¸€é&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public class BubbleSort {
   public static int[] bubbleSort(int[] arr) {
       if (arr == null || arr.length &amp;lt; 2) {
           return arr;
       }
       int n = arr.length;
       for (int i = 0; i &amp;lt; n; i++) {
           for (int j = 0; j &amp;lt; n; j++) {
               if (arr[j + 1] &amp;lt; arr[j]) {
                    int t = arr[j];
                    arr[j] = arr[j + 1];
                    arr[j + 1] = t;
                }
            }
        }
        return arr;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ç¬¬ä¸€æ¬¡ä»£ç ä¼˜åŒ–&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬ä»”ç»†è§‚å¯Ÿæ’åºçš„è¿‡ç¨‹ï¼Œå¯ä»¥å‘ç°ä¸€ä¸ªè§„å¾‹ï¼Œå°±æ˜¯æ¯è¿›è¡Œå®Œä¸€è½®å†’æ³¡ï¼Œå¾…æ’åºé˜Ÿåˆ—çš„å°¾éƒ¨åŒºé—´ä¼šåœ¨åŸæœ¬æœ‰åºçš„åŸºç¡€ä¸Šå¤šåŠ ä¸€ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸‰è½®çš„ä¸­é—´ç»“æœæ˜¯[1, 3, 4, 5, 6, 2, 7, 8, 9]ï¼Œæ­¤æ—¶å°¾éƒ¨çš„[7, 8, 9]æ˜¯æœ‰åºçš„ï¼Œç¬¬å››è½®çš„ä¸­é—´ç»“æœæ˜¯[1, 3, 4, 5, 2, 6, 7, 8, 9]ï¼Œæ­¤æ—¶å°¾éƒ¨çš„[6, 7, 8, 9]æ˜¯æœ‰åºçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç¬¬ n è½®ï¼Œå¾…æ’åºçš„é˜Ÿåˆ—çš„å°¾éƒ¨ &lt;code&gt;n - 1&lt;/code&gt; ä¸ªå…ƒç´ å·²ç»æ˜¯æœ‰åºçš„äº†ï¼Œé‚£ä¹ˆè¿™ä¸€è½®æˆ‘ä»¬å¯ä»¥ä¸å†å¯¹è¿™ä¸€æ®µè¿›è¡Œæ¯”è¾ƒå’Œäº¤æ¢ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¯¹ä¸Šé¢çš„ä»£ç åšå‡ºç¬¬ä¸€æ¬¡ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public class BubbleSort {
   public static int[] bubbleSort(int[] arr) {
       if (arr == null || arr.length &amp;lt; 2) {
           return arr;
       }
       int n = arr.length;
       for (int i = 0; i &amp;lt; n; i++) {
           for (int j = 0; j &amp;lt; n - i - 1; j++) {
               if (arr[j + 1] &amp;lt; arr[j]) {
                    int t = arr[j];
                    arr[j] = arr[j + 1];
                    arr[j + 1] = t;
                }
            }
        }
        return arr;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ç¬¬äºŒæ¬¡ä»£ç ä¼˜åŒ–&lt;/h3&gt;
&lt;p&gt;ç»è¿‡ç¬¬ä¸€æ¬¡çš„ä¼˜åŒ–ï¼Œæˆ‘ä»¬å‡å°‘äº†ç¬¬äºŒè½®å¾ªç¯çš„æ¬¡æ•°ï¼Œç»§ç»­è§‚å¯Ÿè¿˜æœ‰ä»€ä¹ˆå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ã€‚ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬è®¤å®šçš„æ˜¯æŒ‰è¿™ç§åŠæ³•å…¨éƒ¨å¾ªç¯å®Œï¼Œåˆ™æ•´ä¸ªé˜Ÿåˆ—å˜å¾—æœ‰åºï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§åŠæ³•ï¼Œåœ¨æ²¡æœ‰å…¨éƒ¨å¾ªç¯å®Œæ¯•ï¼Œä¹Ÿå¯ä»¥åˆ¤æ–­å‡ºé˜Ÿåˆ—å·²ç»æœ‰åºäº†å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çœ‹åˆ°å¾ªç¯æœ€ä¸»è¦çš„ç›®çš„æ˜¯å°†å€¼è¾ƒå¤§çš„å…ƒç´ æ”¾åˆ°åé¢ï¼Œé‚£ä¹ˆå‡å¦‚ä»å¼€å§‹çš„ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ï¼Œç›¸é‚»çš„å…ƒç´ ä¹‹é—´éƒ½æ²¡æœ‰å‘ç”Ÿäº¤æ¢çš„æ“ä½œï¼Œè¿™æ„å‘³ç€å³è¾¹çš„å…ƒç´ æ€»æ˜¯å¤§äºç­‰äºå·¦è¾¹çš„å…ƒç´ ï¼Œæ­¤æ—¶çš„æ•°ç»„å·²ç»å¯ä»¥è®¤ä¸ºæ˜¯æœ‰åºçš„äº†ï¼Œæˆ‘ä»¬æ— éœ€å†å¯¹å‰©ä½™çš„å…ƒç´ é‡å¤æ¯”è¾ƒä¸‹å»äº†ã€‚ç”¨è¿™ä¸ªåŠæ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨ç­‰å¾…å¾ªç¯å…¨éƒ¨èµ°å®Œï¼Œæå‰ç»ˆæ­¢å¾ªç¯çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å†å¯¹ä»£ç åšä¸€æ¬¡ä¼˜åŒ–ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public class BubbleSort {
   public static int[] bubbleSort(int[] arr) {
       if (arr == null || arr.length &amp;lt; 2) {
           return arr;
       }
       int n = arr.length;
       for (int i = 0; i &amp;lt; n; i++) {
           boolean flag = true;
           for (int j = 0; j &amp;lt; n - i - 1; j++) {
                if (arr[j + 1] &amp;lt; arr[j]) {
                    flag = false;
                    int t = arr[j];
                    arr[j] = arr[j + 1];
                    arr[j + 1] = t;
                }
            }
            //ä¸€è¶Ÿä¸‹æ¥æ˜¯å¦å‘ç”Ÿä½ç½®äº¤æ¢
            if(false)
                break;
        }
        return arr;
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;ä»£ç ä¼˜åŒ–å°ç»“&lt;/h3&gt;
&lt;p&gt;ä¸Šé¢æˆ‘ä»¬å¯¹ä»£ç åšäº†ä¸¤æ¬¡å°çš„ä¼˜åŒ–ï¼Œç®€å•æ€»ç»“ä¸€ä¸‹å°±æ˜¯ä¸¤ä¸ªæ–¹å‘ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é™ä½å¤æ‚åº¦ï¼šæˆ‘ä»¬é€šè¿‡å‘ç°ç»†èŠ‚ï¼Œå‡å°‘å¾ªç¯æ¬¡æ•°ï¼Œåé¢æˆ‘ä»¬å¯èƒ½è¿˜èƒ½é‡åˆ°ç›´æ¥å‡å°‘å¾ªç¯å±‚çº§çš„ï¼Œæ¯”å¦‚ä»3å±‚å¾ªç¯é™ä½åˆ°2å±‚å¾ªç¯&lt;/li&gt;
&lt;li&gt;å‰ªæï¼šå¯¹äºä»£ç æ‰§è¡Œé“¾è·¯ä¸­çš„å¾ˆå¤šåˆ†æ”¯ï¼Œå¦‚æœæ˜ç¡®ä¸ä¼šå‘ç”Ÿï¼Œæˆ–è€…å‘ç”Ÿäº†ä¹Ÿæ— æ„ä¹‰ï¼Œå¯ä»¥é‡‡å–æå‰ç»ˆæ­¢çš„åŠæ³•ï¼Œè¾¾åˆ°ä¸€ä¸ªå‡å»åˆ†æ”¯çš„ç›®çš„ï¼Œå¯ä»¥æœ‰æ•ˆé™ä½æ‰§è¡Œæ•ˆç‡&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;èŠèŠå†’æ³¡çš„ç‰¹æ€§&lt;/h2&gt;
&lt;p&gt;æˆ‘åœ¨&lt;a href=&quot;https://www.fanschou.com/algorithm/algorithm-sort-opening/&quot;&gt;æ’åºç®—æ³•ç³»åˆ—ä¹‹å¼€ç¯‡&lt;/a&gt;è°ˆåˆ°äº†ä¸€äº›æœ¯è¯­ï¼Œæœ‰ä¸€äº›æ˜¯æˆ‘ä»¬è°ˆåŠç®—æ³•æ—¶ä¸€å®šä¼šè®¨è®ºçš„ï¼Œå¦‚å¤æ‚åº¦ç­‰ï¼Œä¸‹é¢æˆ‘ä»¬å°±å‡ ä¸ªçº¬åº¦ç®€å•èŠèŠå†’æ³¡çš„ä¸€äº›ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;h3&gt;å¤æ‚åº¦&lt;/h3&gt;
&lt;h4&gt;æ—¶é—´å¤æ‚åº¦&lt;/h4&gt;
&lt;p&gt;åˆ†æä¸€ä¸‹å†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦ï¼Œå¯ä»¥çœ‹åˆ°æœ€æ¶ˆè€—æ—¶é—´çš„å°±æ˜¯ä¸­é—´çš„ä¸¤å±‚å¾ªç¯ï¼Œå¾ªç¯æ¬¡æ•°åˆ†åˆ«æ˜¯ &lt;code&gt;n&lt;/code&gt; å’Œ &lt;code&gt;n - i - 1&lt;/code&gt;ï¼Œé‚£æ€»çš„å¾ªç¯æ¬¡æ•°å°±æ˜¯ &lt;code&gt;n * (n - i - 1)&lt;/code&gt;ï¼ŒæŠŠå®ƒå±•å¼€å°±æ˜¯ &lt;code&gt;nÂ² - n * i - n&lt;/code&gt;ï¼Œå…¶ä¸­æœ€å¤§çš„æ•°é‡çº§æ˜¯ nÂ²ï¼Œå…¶ä»–çš„é¡¹ç›¸æ¯”å¹³æ–¹é˜¶æ¥è¯´éƒ½æ˜¯ä¸åœ¨ä¸€ä¸ªæ•°é‡çº§çš„ã€‚æ‰€ä»¥å†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(nÂ²)ã€‚&lt;/p&gt;
&lt;h4&gt;ç©ºé—´å¤æ‚åº¦&lt;/h4&gt;
&lt;p&gt;ä»£ç è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åªç”¨äº†ä¸€ä¸ªå˜é‡å»åšä¸­è½¬ï¼Œäº¤æ¢ä¸¤ä¸ªä½ç½®çš„å€¼ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦æ˜¯O(1)ï¼Œæ˜¯å¸¸é‡çº§çš„å¤æ‚åº¦ã€‚&lt;/p&gt;
&lt;h3&gt;æ’åºçš„ç¨³å®šæ€§&lt;/h3&gt;
&lt;p&gt;å†’æ³¡æ’åºç®—æ³•æ˜¯ä¸€ä¸ªç¨³å®šç®—æ³•ï¼Œå› ä¸ºåœ¨å€¼ç›¸ç­‰æ—¶ï¼Œå…ƒç´ çš„ç›¸å¯¹ä½ç½®æ²¡æœ‰å˜åŒ–ã€‚æ ¸å¿ƒçš„ç‚¹åœ¨äº &lt;code&gt;if (arr[j + 1] &amp;lt; arr[j])&lt;/code&gt; è¿™ä¸ªåˆ¤æ–­ï¼Œæ˜¯åªæœ‰å‰å€¼å¤§äºåå€¼æ—¶æ‰ä¼šäº¤æ¢ï¼Œç­‰äºæ—¶æ˜¯ä¸ä¼šäº¤æ¢çš„ã€‚å½“ç„¶ï¼Œè¿™é‡Œçš„åˆ¤æ–­ä¹Ÿå¯ä»¥åŠ ä¸Šç­‰äºï¼Œå°±å˜æˆäº†ä¸ç¨³å®šæ’åºï¼Œä¸è¿‡è¿™æ ·æ”¹å¯ä»¥ä½†æ²¡å¿…è¦ã€‚&lt;/p&gt;
&lt;h3&gt;æ’åºä½¿ç”¨çš„ç©ºé—´&lt;/h3&gt;
&lt;p&gt;æ’åºæ—¶ç›´æ¥å¯¹æ•°ç»„çš„å€¼è¿›è¡Œäº¤æ¢ï¼Œæ²¡æœ‰ä½¿ç”¨å¤šä½™çš„å­˜å‚¨ç©ºé—´ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªåŸåœ°æ’åº&lt;/p&gt;
&lt;h2&gt;ç»“å°¾&lt;/h2&gt;
&lt;p&gt;åˆ°è¿™é‡Œï¼Œå°±ä»‹ç»å®Œäº†æœ‰å…³å†’æ³¡æ’åºç›¸å…³çš„ä¸€äº›çŸ¥è¯†ï¼Œå¦‚æœä½ å‘ç°æ–‡ä¸­æœ‰ä»»ä½•é”™è¯¯ï¼Œæ¬¢è¿é€šè¿‡&lt;a href=&quot;https://www.fanschou.com/author/#%E5%85%B3%E4%BA%8E%E7%AB%99%E7%82%B9&quot;&gt;å…³äºç«™ç‚¹&lt;/a&gt;çš„è”ç³»æ–¹å¼è¿›è¡Œåé¦ˆã€‚&lt;/p&gt;
</content:encoded><author>Fan Zhou</author></item><item><title>æ’åºç®—æ³•ç³»åˆ—ä¹‹å¼€ç¯‡</title><link>https://www.fanschou.com/posts/algorithm/algorithm-sort-opening/</link><guid isPermaLink="true">https://www.fanschou.com/posts/algorithm/algorithm-sort-opening/</guid><description>æœ¬ç¯‡æ–‡ç« ä½œä¸ºæ’åºç®—æ³•ç³»åˆ—çš„å¼€ç¯‡ï¼Œä¸»è¦åšä¸€ä¸ªå¼€ç¯‡æ˜ä¹‰çš„è®²è§£ï¼Œä»‹ç»äº†ä¸€äº›å…³äºæ’åºç®—æ³•çš„åŸºæœ¬æœ¯è¯­ï¼Œæœ‰ä¸€äº›æ¦‚å¿µä¹Ÿæ˜¯å­¦ä¹ ä»»ä½•ç®—æ³•éƒ½æœ‰ç›Šå¤„çš„çŸ¥è¯†ã€‚åŒæ—¶æœ‰äº†è¿™ä¸€ç¯‡æ–‡ç« çš„ä»‹ç»ï¼Œåç»­æ’åºç®—æ³•ç³»åˆ—æ–‡ç« çš„å±•å¼€ä¹Ÿå¯ä»¥åŸºäºæ­¤çœå»ä¸€äº›å¸¸ç”¨çŸ¥è¯†çš„è¯´æ˜ã€‚</description><pubDate>Sat, 03 Jul 2021 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;å¼•è¨€&lt;/h2&gt;
&lt;p&gt;å¯¹æ•°æ®æ’åºå¯ä»¥è¯´æ˜¯æˆ‘ä»¬ç¼–ç è¿‡ç¨‹ä¸­æœ€å¸¸ç¢°åˆ°çš„ä¸€ç§æ“ä½œäº†ï¼Œä¸ºæ­¤å‡ºç°äº†å¾ˆå¤šä¸åŒçš„æ’åºç®—æ³•ï¼Œå„æœ‰å„çš„ç‰¹ç‚¹ã€‚ä»æœ¬ç¯‡æ–‡ç« å¼€å§‹ï¼Œä¼šé™†ç»­ä»‹ç»ä¸€äº›å¸¸ç”¨çš„æ’åºç®—æ³•ã€‚åœ¨å¼€å§‹æ•´ä¸ªç³»åˆ—ä¹‹å‰ï¼Œæˆ‘å¸Œæœ›å…ˆé€šè¿‡è¿™ä¸ªå¼€ç¯‡ï¼Œä»‹ç»ä¸€äº›å…³äºæ’åºç®—æ³•çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µï¼Œæ–¹ä¾¿è¯»è€…é˜…è¯»æ¥ä¸‹æ¥çš„æ–‡ç« ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ–¹ä¾¿å¤§å®¶ç†è§£ï¼Œæˆ‘ä¼šå°½é‡åˆ¶ä½œä¸€äº›åŠ¨å›¾æ¼”ç¤ºï¼Œæ¯ç¯‡æ–‡ç« ä¹Ÿä¼šç»™å‡ºä»£ç çš„å®ç°ï¼Œå¦‚æœ‰é”™æ¼ï¼Œæœ›å„ä½è¯»è€…å¯ä»¥ç»™äºˆæŒ‡æ­£ã€‚&lt;/p&gt;
&lt;h2&gt;åŸºæœ¬æœ¯è¯­&lt;/h2&gt;
&lt;h3&gt;å¤æ‚åº¦&lt;/h3&gt;
&lt;p&gt;ä¸€èˆ¬å¯¹äºç®—æ³•çš„å¤æ‚åº¦ï¼Œæˆ‘ä»¬éƒ½ä¼šä»æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ä¸¤ä¸ªè§’åº¦å»è¡¡é‡ï¼Œç„¶è€Œæœ‰æ—¶å€™ï¼Œæ—¶é—´å’Œç©ºé—´æ˜¯ä¸å¯å…¼å¾—çš„ï¼Œæˆ‘ä»¬éœ€è¦é’ˆå¯¹å…·ä½“çš„æƒ…å¢ƒï¼Œåœ¨ä¸¤è€…ä¹‹é—´å–å¾—ä¸€ç§å¹³è¡¡ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ‘©å°”å®šå¾‹çš„åŠ æŒä¹‹ä¸‹ï¼Œç°ä»£è®¡ç®—æœºç¡¬ä»¶æ€§èƒ½å¾—åˆ°äº†æå¤§æå‡ï¼Œæ‰€ä»¥åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šé€‰æ‹©ç©ºé—´æ¢æ—¶é—´çš„åšæ³•ï¼Œæ¥æé«˜ç®—æ³•çš„è¿è¡Œæ•ˆç‡ï¼Œå¦‚æœæ²¡æœ‰æ˜ç¡®æåŠæ˜¯å“ªç§å¤æ‚åº¦ï¼Œä¸€èˆ¬éƒ½ä¼šé»˜è®¤æ˜¯æ—¶é—´å¤æ‚åº¦ã€‚&lt;/p&gt;
&lt;h4&gt;æ—¶é—´å¤æ‚åº¦&lt;/h4&gt;
&lt;p&gt;æ—¶é—´å¤æ‚åº¦ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªç®—æ³•æ‰§è¡Œæ‰€æ¶ˆè€—çš„æ—¶é—´ã€‚é‚£ä¹ˆç®—æ³•çš„æ‰§è¡Œæ—¶é—´å¦‚ä½•è¡¡é‡å‘¢ï¼Ÿæœ€ç®€å•çš„åŠæ³•å°±æ˜¯å°†ç®—æ³•ç¨‹åºè·‘ä¸€éå¾—åˆ°å®ƒçš„è¿è¡Œæ—¶é—´ï¼Œä½†æ˜¯è¿™æ ·ä¼šæœ‰å¾ˆå¤šå¼Šç«¯ï¼Œé¦–å…ˆè¿™ç§æ–¹å¼éå¸¸å®¹æ˜“å—è¿è¡Œç¯å¢ƒçš„å½±å“ï¼Œæœºå™¨æ€§èƒ½å’Œæ•°æ®è§„æ¨¡çš„ä¸åŒéƒ½ä¼šé€ æˆå½±å“ï¼Œå¹¶ä¸”ï¼Œå¾ˆå¤šæ—¶å€™ä»…ä»…åªæ˜¯æå‡ºäº†ç®—æ³•æ€è·¯ï¼ŒçœŸæ­£çš„ä»£ç è¿˜æ²¡æœ‰å®ç°ï¼Œæ­¤æ—¶å¦‚ä½•è¡¡é‡æ—¶é—´å¤æ‚åº¦å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä¸€ç§æ›´é€šç”¨çš„è¡¨ç¤ºæ–¹å¼ï¼š&lt;strong&gt;ã€Œ å¤§Oç¬¦å·è¡¨ç¤ºæ³• ã€&lt;/strong&gt;ï¼Œå³ &lt;code&gt;T(n) = O(f(n))&lt;/code&gt; ï¼Œä¹Ÿå°±æ˜¯åœ¨ n çš„è§„æ¨¡ä¸‹ï¼Œç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(f(n)) ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;for(i = 1; i &amp;lt;= n; i++)
{
   j = i;
   j++;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é€šè¿‡ &lt;strong&gt;ã€Œå¤§Oç¬¦å·è¡¨ç¤ºæ³•ã€&lt;/strong&gt; ï¼Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼šO(n)ï¼Œä¸ºä»€ä¹ˆæ˜¯ O(n) å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªå¾ªç¯ï¼Œå¾ªç¯æ¬¡æ•°æ˜¯ n ï¼Œå½“ n çš„æ•°é‡åŠ å¤§æ—¶ï¼Œç›¸åº”çš„ï¼Œç¨‹åºçš„æ‰§è¡Œæ—¶é—´ä¹Ÿä¼šå¢é•¿ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®¤ä¸ºï¼Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦æ˜¯éšç€å¾ªç¯æ¬¡æ•°çš„å¢åŠ ï¼Œè€Œå‘ˆç°å‡ºä¸€ç§çº¿æ€§å¢é•¿çš„æ€åŠ¿ã€‚åˆ°è¿™é‡Œæˆ‘ä»¬çœ‹å‡º &lt;strong&gt;ã€Œ å¤§Oç¬¦å·è¡¨ç¤ºæ³• ã€&lt;/strong&gt; ä¸æ˜¯ä¸€ç§ç²¾ç¡®è¡¨ç¤ºå¤æ‚åº¦çš„è®¡ç®—æ–¹å¼ï¼Œè¿™é‡Œçš„ &lt;strong&gt;O&lt;/strong&gt; å…¶å®è¡¨ç¤ºçš„æ˜¯å¤æ‚åº¦ä¸æŸä¸ªåŸºæ•°å…¬å¼çš„æ­£æ¯”ä¾‹å…³ç³»ï¼Œè¿™ä¸ªåŸºæ•°å…¬å¼å…¶å®è¡¨è¾¾çš„æ˜¯ä¸€ç§è¿‘ä¼¼çš„æ•°é‡çº§ã€‚&lt;/p&gt;
&lt;p&gt;å¸¸è§çš„æ—¶é—´å¤æ‚åº¦é‡çº§æœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¸¸æ•°é˜¶O(1)&lt;/li&gt;
&lt;li&gt;å¯¹æ•°é˜¶O(logN)&lt;/li&gt;
&lt;li&gt;çº¿æ€§é˜¶O(n)&lt;/li&gt;
&lt;li&gt;çº¿æ€§å¯¹æ•°é˜¶O(nlogN)&lt;/li&gt;
&lt;li&gt;å¹³æ–¹é˜¶O(nÂ²)&lt;/li&gt;
&lt;li&gt;ç«‹æ–¹é˜¶O(nÂ³)&lt;/li&gt;
&lt;li&gt;Kæ¬¡æ–¹é˜¶O(n^k)&lt;/li&gt;
&lt;li&gt;æŒ‡æ•°é˜¶(2^n)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸Šé¢ä»ä¸Šè‡³ä¸‹ä¾æ¬¡çš„æ—¶é—´å¤æ‚åº¦è¶Šæ¥è¶Šå¤§ï¼Œæ‰§è¡Œçš„æ•ˆç‡è¶Šæ¥è¶Šä½ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºæ—¶é—´å¤æ‚åº¦æ¥è¯´ï¼Œä¸€èˆ¬æ¯”è¾ƒå…³æ³¨å¹³å‡æ—¶é—´å¤æ‚åº¦å’Œæœ€å·®æ—¶é—´å¤æ‚åº¦ï¼Œä¸€ä¸ªè¡¨ç¤ºä¸€èˆ¬æƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ï¼Œä¸€ä¸ªæ˜¯è¡¨ç¤ºæç«¯æƒ…å†µä¸‹æœ€æ…¢çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;h4&gt;ç©ºé—´å¤æ‚åº¦&lt;/h4&gt;
&lt;p&gt;æ—¢ç„¶æ—¶é—´å¤æ‚åº¦ä¸æ˜¯ç”¨æ¥è®¡ç®—ç¨‹åºå…·ä½“è€—æ—¶çš„ï¼Œé‚£ä¹ˆåŒç†æˆ‘ä»¬ä¹Ÿåº”è¯¥çŸ¥é“ï¼Œç©ºé—´å¤æ‚åº¦ä¹Ÿä¸æ˜¯ç”¨æ¥ç›´æ¥è®¡ç®—ç¨‹åº&lt;strong&gt;å®é™…å ç”¨&lt;/strong&gt;çš„ç©ºé—´çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç©ºé—´å¤æ‚åº¦æ˜¯å¯¹ä¸€ä¸ªç®—æ³•åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶ä½¿ç”¨å­˜å‚¨ç©ºé—´å¤§å°çš„ä¸€ä¸ªé‡åº¦ï¼ŒåŒæ ·åæ˜ çš„æ˜¯ä¸€ä¸ªè¶‹åŠ¿ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªäº¤æ¢å˜é‡çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public swap(int a, int b){
    int temp = a;
    a = b;
    b = temp;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä¸Šé¢çš„ä»£ç å°†ä¸¤ä¸ªå˜é‡çš„å€¼è¿›è¡Œäº†äº¤æ¢ï¼Œç”¨åˆ°äº†ä¸€ä¸ªæ–°çš„å˜é‡ &lt;code&gt;temp&lt;/code&gt; ï¼Œæ— è®ºè¿™ä¸ªæ–¹æ³•æ€ä¹ˆè¢«è°ƒç”¨ï¼Œå§‹ç»ˆä¹Ÿåªä¼šä½¿ç”¨è¿™ä¸€ä¸ªå˜é‡çš„ç©ºé—´ï¼Œé‚£ä¹ˆå®ƒçš„ç©ºé—´å¤æ‚åº¦å°±æ˜¯O(1)ï¼Œä¹Ÿå°±æ˜¯å¸¸æ•°çº§åˆ«çš„å¤æ‚åº¦ã€‚&lt;/p&gt;
&lt;h3&gt;æ’åºçš„ç¨³å®šæ€§&lt;/h3&gt;
&lt;h4&gt;ç¨³å®šæ’åº&lt;/h4&gt;
&lt;p&gt;å‡è®¾ç»™å®šä¸€ä¸ªæ— åºçš„åˆ—è¡¨ï¼Œå¦‚æœ a åŸæœ¬åœ¨ b çš„å‰é¢ï¼Œä¸” a == bï¼Œæ’åºä¹‹å a ä»ç„¶åœ¨ b çš„å‰é¢ï¼Œæˆ‘ä»¬ç§°è¿™ç§æ’åºæ–¹å¼æ˜¯ä¸€ä¸ªç¨³å®šæ’åºã€‚&lt;strong&gt;ã€Œ ç¨³å®š ã€&lt;/strong&gt; æŒ‡ä»£çš„æ˜¯å…ƒç´ ç›¸å¯¹é¡ºåºæ²¡æœ‰æ”¹å˜ã€‚&lt;/p&gt;
&lt;h4&gt;ä¸ç¨³å®šæ’åº&lt;/h4&gt;
&lt;p&gt;å¯¹æ¯”ç¨³å®šæ’åºï¼Œå¦‚æœ a åŸæœ¬åœ¨ b çš„å‰é¢ï¼Œä¸” a == bï¼Œæ’åºä¹‹å a å¯èƒ½ä¸åœ¨ b çš„å‰é¢ï¼Œæˆ‘ä»¬ç§°è¿™ç§æ’åºæ–¹å¼æ˜¯ä¸€ä¸ªä¸ç¨³å®šæ’åºã€‚&lt;/p&gt;
&lt;h3&gt;æ’åºä½¿ç”¨çš„ç©ºé—´&lt;/h3&gt;
&lt;p&gt;ä»æ’åºæ˜¯å¦ä½¿ç”¨é¢å¤–çš„ç©ºé—´ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ†ä¸ºä¸¤ç§ã€‚&lt;/p&gt;
&lt;h4&gt;åŸåœ°æ’åº&lt;/h4&gt;
&lt;p&gt;åŸåœ°æ’åºå°±æ˜¯æŒ‡åœ¨æ’åºè¿‡ç¨‹ä¸­ä¸ç”³è¯·å¤šä½™çš„å­˜å‚¨ç©ºé—´ï¼Œåªåˆ©ç”¨åŸæ¥å­˜å‚¨å¾…æ’æ•°æ®çš„å­˜å‚¨ç©ºé—´è¿›è¡Œæ¯”è¾ƒå’Œäº¤æ¢çš„æ’åºæ–¹å¼ã€‚&lt;/p&gt;
&lt;h4&gt;éåŸåœ°æ’åº&lt;/h4&gt;
&lt;p&gt;å¯¹æ¯”åŸåœ°æ’åºï¼ŒéåŸåœ°æ’åºåˆ™éœ€è¦åˆ©ç”¨é¢å¤–çš„æ•°ç»„æ¥è¾…åŠ©æ’åºã€‚&lt;/p&gt;
&lt;h3&gt;æ’åºä½¿ç”¨çš„ç©ºé—´ä½ç½®&lt;/h3&gt;
&lt;p&gt;ä»æ’åºä½¿ç”¨çš„ç©ºé—´æ¥æºï¼Œä¹Ÿå¯ä»¥åˆ†æˆä¸¤ç±»&lt;/p&gt;
&lt;h4&gt;å†…éƒ¨æ’åº&lt;/h4&gt;
&lt;p&gt;æ’åºæ•°æ®å…¨éƒ¨è®°å½•åœ¨å†…å­˜ä¸­è¿›è¡Œæ’åºï¼Œè¿™ç§å±äºå†…éƒ¨æ’åºã€‚&lt;/p&gt;
&lt;h4&gt;å¤–éƒ¨æ’åº&lt;/h4&gt;
&lt;p&gt;å¦‚æœå› ä¸ºæ’åºçš„æ•°æ®å¾ˆå¤§ï¼Œå†…å­˜ç©ºé—´ä¸€æ¬¡ä¸èƒ½å®¹çº³å…¨éƒ¨çš„æ’åºè®°å½•ï¼Œåœ¨æ’åºè¿‡ç¨‹ä¸­éœ€è¦è®¿é—®å¤–å­˜ï¼Œè¿™ç§å°±å±äºå¤–éƒ¨æ’åºã€‚&lt;/p&gt;
&lt;h2&gt;æ’åºç±»åˆ«&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;æ¯”è¾ƒæ’åº
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.fanschou.com/algorithm/algorithm-sort-bubble/&quot;&gt;å†’æ³¡æ’åº&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.fanschou.com/algorithm/algorithm-insertion-sort/&quot;&gt;æ’å…¥æ’åº&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å¸Œå°”æ’åºï¼ˆShell Sortï¼‰&lt;/li&gt;
&lt;li&gt;å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰&lt;/li&gt;
&lt;li&gt;å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ¡¶æ’åºï¼ˆBucket Sortï¼‰&lt;/li&gt;
&lt;li&gt;è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰&lt;/li&gt;
&lt;li&gt;åŸºæ•°æ’åºï¼ˆRadix Sortï¼‰&lt;/li&gt;
&lt;li&gt;å †æ’åºï¼ˆHeap Sortï¼‰&lt;/li&gt;
&lt;/ul&gt;
</content:encoded><author>Fan Zhou</author></item><item><title>æµ…è°ˆKMPç®—æ³•</title><link>https://www.fanschou.com/posts/algorithm/algorithm-string-search-kmp/</link><guid isPermaLink="true">https://www.fanschou.com/posts/algorithm/algorithm-string-search-kmp/</guid><description>Knuth-Morris-Pratt å­—ç¬¦ä¸²æŸ¥æ‰¾ç®—æ³•ï¼ˆç®€ç§°ä¸ºKMPç®—æ³•ï¼‰å¯åœ¨ä¸€ä¸ªå­—ç¬¦ä¸² S å†…æŸ¥æ‰¾ä¸€ä¸ªè¯ W çš„å‡ºç°ä½ç½®ã€‚æœ¬æ–‡ä»‹ç»äº†KMPç®—æ³•çš„ä¸»è¦çš„åŒ¹é…æµç¨‹å’Œå®ç°åŸç†ï¼Œä»¥åŠå®ƒçš„Javaä»£ç å®ç°ï¼Œå¹¶ä¸ JDK ä¸­çš„ indexOf æ–¹æ³•ç®€å•å¯¹æ¯”äº†ä¸€ä¸‹ã€‚</description><pubDate>Sat, 29 May 2021 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;å¼•è¨€&lt;/h2&gt;
&lt;p&gt;å‰æ®µæ—¶é—´åœ¨leetcodeåˆ·åˆ°äº†ä¸€é“é¢˜â€”â€”&lt;a href=&quot;https://leetcode-cn.com/problems/implement-strstr/description/&quot;&gt;å®ç°strStrå‡½æ•°&lt;/a&gt;ï¼Œå¤§æ¦‚æ„æ€æ˜¯ï¼šç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸²Â &lt;code&gt;haystack&lt;/code&gt; å’Œ &lt;code&gt;needle&lt;/code&gt; ï¼Œè¯·ä½ åœ¨ &lt;code&gt;haystack&lt;/code&gt; å­—ç¬¦ä¸²ä¸­æ‰¾å‡º &lt;code&gt;needle&lt;/code&gt; å­—ç¬¦ä¸²å‡ºç°çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›Â -1ã€‚åŠŸèƒ½ç›¸å½“äºJavaç±»åº“ä¸­ &lt;code&gt;String&lt;/code&gt; ç±»çš„ &lt;code&gt;indexOf&lt;/code&gt; æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä»å®˜æ–¹é¢˜è§£ä¸­äº†è§£åˆ°æœ¬æ–‡é¢˜ç›®ä¸­çš„KMPç®—æ³•ï¼Œè§£é‡Šçš„ä¸æ˜¯ç‰¹åˆ«æ˜ç™½ï¼Œäºæ˜¯è‡ªå·±å»çœ‹äº†ä¸€äº›æ–‡ç« ï¼Œè§‰å¾—è¿˜æ˜¯æ¯”è¾ƒå·§å¦™çš„ï¼Œåº”è¯¥è‡ªå·±æ€»ç»“ä¸€ä¸‹æ€è·¯ï¼Œä¸‹é¢ç›´æ¥å¼€å§‹ã€‚&lt;/p&gt;
&lt;h2&gt;KMPçš„åŒ¹é…æ€è·¯&lt;/h2&gt;
&lt;h3&gt;ç®—æ³•æµç¨‹&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å…ˆå¼•å…¥ä¸€ä¸ªä¾‹å­ï¼Œæœ‰ä¸€ä¸ªå­—ç¬¦ä¸² &lt;code&gt;haystack = &quot;BBC ABCDAB ABCDABCDABDE&quot;&lt;/code&gt; ï¼Œæˆ‘ä»¬è¦åœ¨å®ƒçš„å†…éƒ¨æ‰¾åˆ°ä¸€ä¸ªå­—ç¬¦ä¸² &lt;code&gt;needle = &quot;ABCDABD&quot;&lt;/code&gt; çš„ä½ç½®ï¼Œä¸ºäº†æè¿°æ–¹ä¾¿ï¼Œæˆ‘ä»¬ç§°å­—ç¬¦ä¸² &lt;code&gt;haystack&lt;/code&gt; ä¸º&lt;strong&gt;æºå­—ç¬¦ä¸²&lt;/strong&gt;ï¼Œç§°å­—ç¬¦ä¸² &lt;code&gt;needle&lt;/code&gt; ä¸º&lt;strong&gt;æœç´¢è¯&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œ&lt;strong&gt;æºå­—ç¬¦ä¸²&lt;/strong&gt;çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸&lt;strong&gt;æœç´¢è¯&lt;/strong&gt;çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œè¿›è¡Œæ¯”è¾ƒã€‚å› ä¸º B ä¸ A ä¸åŒ¹é…ï¼Œæ‰€ä»¥&lt;strong&gt;æœç´¢è¯&lt;/strong&gt;åç§»ä¸€ä½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-string-search-KMP/20210529_01_001.webp&quot; alt=&quot;æ¯”è¾ƒç¬¬ä¸€ä½&quot; /&gt;&lt;/p&gt;
&lt;p&gt;å› ä¸ºç¬¬äºŒä¸ªå­—ç¬¦ B ä¸ A ä¸åŒ¹é…ï¼Œ&lt;strong&gt;æœç´¢è¯&lt;/strong&gt;å†å¾€åç§»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-string-search-KMP/20210529_01_002.webp&quot; alt=&quot;æ¯”è¾ƒç¬¬äºŒä½&quot; /&gt;&lt;/p&gt;
&lt;p&gt;å°±è¿™æ ·ï¼Œç›´åˆ°&lt;strong&gt;æºå­—ç¬¦ä¸²&lt;/strong&gt;æœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œä¸&lt;strong&gt;æœç´¢è¯&lt;/strong&gt;çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ç›¸åŒä¸ºæ­¢ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-string-search-KMP/20210529_01_003.webp&quot; alt=&quot;ç¬¬ä¸€æ¬¡åŒ¹é…&quot; /&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æŒç»­æ¯”è¾ƒ&lt;strong&gt;æºå­—ç¬¦ä¸²&lt;/strong&gt;å’Œ&lt;strong&gt;æœç´¢è¯&lt;/strong&gt;çš„å­—ç¬¦ï¼Œç›´åˆ°&lt;strong&gt;æºå­—ç¬¦ä¸²&lt;/strong&gt;æœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œä¸&lt;strong&gt;æœç´¢è¯&lt;/strong&gt;å¯¹åº”çš„å­—ç¬¦ä¸ç›¸åŒä¸ºæ­¢ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-string-search-KMP/20210529_01_004.webp&quot; alt=&quot;åŒ¹é…å¤±è´¥&quot; /&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ—¶ï¼Œæˆ‘ä»¬ç¬¬ä¸€ååº”æ˜¯å’Œä¹‹å‰ä¸€æ ·ï¼Œä¾ç„¶å¾€åç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ï¼Œå†ä»ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹ï¼Œé€ä¸ªå¾€åæ¯”è¾ƒã€‚è¿™æ ·åšä¹Ÿæ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯æ•ˆç‡æ¯”è¾ƒå·®ï¼Œå› ä¸ºæœ‰éƒ¨åˆ†ä½ç½®çš„å­—ç¬¦å·²ç»æ¯”è¾ƒè¿‡äº†ï¼Œæˆ‘ä»¬æ²¡æœ‰åˆ©ç”¨ä¸Šä¹‹å‰å·²ç»æ¯”è¾ƒè¿‡çš„ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆæ€ä¹ˆåˆ©ç”¨ä¸Šå‘¢ï¼Ÿä¸€ä¸ªåŸºæœ¬äº‹å®æ˜¯ï¼Œå½“ç©ºæ ¼ä¸Dä¸åŒ¹é…æ—¶ï¼Œä½ å…¶å®çŸ¥é“å‰é¢å…­ä¸ªå­—ç¬¦æ˜¯&quot;ABCDAB&quot;ã€‚KMPç®—æ³•çš„æƒ³æ³•æ˜¯ï¼Œè®¾æ³•åˆ©ç”¨è¿™ä¸ªå·²çŸ¥ä¿¡æ¯ï¼Œå¯ä»¥æ›´å¤§ç¨‹åº¦çš„åç§»ï¼Œâ€œè·³è¿‡â€å·²ç»æ¯”è¾ƒè¿‡çš„å­—ç¬¦ï¼Œè¿™æ ·å°±æé«˜äº†æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å…ˆå‡è®¾æœ‰ä¸€å¼ ã€Šéƒ¨åˆ†åŒ¹é…è¡¨ã€‹ï¼ˆPartial Match Tableï¼‰ã€‚è¿™å¼ è¡¨æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Œ&lt;a href=&quot;#%E9%83%A8%E5%88%86%E5%8C%B9%E9%85%8D%E8%A1%A8%E7%9A%84%E4%BA%A7%E7%94%9F&quot;&gt;åé¢&lt;/a&gt;å†ä»‹ç»ï¼Œè¿™é‡Œæš‚æ—¶å…ˆæ‹¿æ¥ç”¨å°±å¯ä»¥äº†ã€‚è¿™å¼ è¡¨çš„å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æœç´¢è¯&lt;/th&gt;
&lt;th&gt;A&lt;/th&gt;
&lt;th&gt;B&lt;/th&gt;
&lt;th&gt;C&lt;/th&gt;
&lt;th&gt;D&lt;/th&gt;
&lt;th&gt;A&lt;/th&gt;
&lt;th&gt;B&lt;/th&gt;
&lt;th&gt;D&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;éƒ¨åˆ†åŒ¹é…å€¼&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å·²çŸ¥ç©ºæ ¼ä¸Dä¸åŒ¹é…æ—¶ï¼Œå‰é¢å…­ä¸ªå­—ç¬¦&quot;ABCDAB&quot;æ˜¯åŒ¹é…çš„ã€‚æŸ¥è¡¨å¯çŸ¥ï¼Œæœ€åä¸€ä¸ªåŒ¹é…å­—ç¬¦Bå¯¹åº”çš„&lt;code&gt;éƒ¨åˆ†åŒ¹é…å€¼&lt;/code&gt;ä¸º2ï¼Œå› æ­¤æŒ‰ç…§ä¸‹é¢çš„å…¬å¼ç®—å‡ºå‘åç§»åŠ¨çš„ä½æ•°ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç§»åŠ¨ä½æ•° = å·²åŒ¹é…çš„å­—ç¬¦æ•° - å¯¹åº”çš„éƒ¨åˆ†åŒ¹é…å€¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è®¡ç®—ç§»åŠ¨ä½æ•° = 6 - 2ï¼Œå¾—åˆ°4ï¼Œæ‰€ä»¥å°†&lt;strong&gt;æœç´¢è¯&lt;/strong&gt;å‘åç§»åŠ¨4ä½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-string-search-KMP/20210529_01_005.webp&quot; alt=&quot;ç§»ä½&quot; /&gt;&lt;/p&gt;
&lt;p&gt;å› ä¸ºç©ºæ ¼ä¸ï¼£ä¸åŒ¹é…ï¼Œ&lt;strong&gt;æœç´¢è¯&lt;/strong&gt;è¿˜è¦ç»§ç»­å¾€åç§»ã€‚è¿™æ—¶ï¼Œå·²åŒ¹é…çš„å­—ç¬¦æ•°ä¸º2ï¼ˆ&quot;AB&quot;ï¼‰ï¼Œå¯¹åº”çš„&lt;code&gt;éƒ¨åˆ†åŒ¹é…å€¼&lt;/code&gt;ä¸º0ã€‚æ‰€ä»¥ï¼Œç§»åŠ¨ä½æ•° = 2 - 0ï¼Œç»“æœä¸º 2ï¼Œäºæ˜¯å°†&lt;strong&gt;æœç´¢è¯&lt;/strong&gt;å‘åç§»2ä½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-string-search-KMP/20210529_01_006.webp&quot; alt=&quot;ç§»ä½&quot; /&gt;&lt;/p&gt;
&lt;p&gt;å› ä¸ºç©ºæ ¼ä¸Aä¸åŒ¹é…ï¼Œ&lt;strong&gt;æœç´¢è¯&lt;/strong&gt;ç»§ç»­åç§»ä¸€ä½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-string-search-KMP/20210529_01_007.webp&quot; alt=&quot;ç§»ä½&quot; /&gt;&lt;/p&gt;
&lt;p&gt;é€ä½æ¯”è¾ƒï¼Œç›´åˆ°å‘ç°Cä¸Dä¸åŒ¹é…ã€‚è¿™æ—¶ï¼Œå·²åŒ¹é…çš„å­—ç¬¦æ•°ä¸º6ï¼ˆ&quot;ABCDAB&quot;ï¼‰ï¼Œå¯¹åº”çš„&lt;code&gt;éƒ¨åˆ†åŒ¹é…å€¼&lt;/code&gt;ä¸º2ã€‚äºæ˜¯ï¼Œç§»åŠ¨ä½æ•° = 6 - 2ï¼Œç»§ç»­å°†&lt;strong&gt;æœç´¢è¯&lt;/strong&gt;å‘åç§»åŠ¨4ä½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-string-search-KMP/20210529_01_008.webp&quot; alt=&quot;ç§»ä½&quot; /&gt;&lt;/p&gt;
&lt;p&gt;é€ä½æ¯”è¾ƒï¼Œç›´åˆ°&lt;strong&gt;æœç´¢è¯&lt;/strong&gt;çš„æœ€åä¸€ä½ï¼Œå‘ç°å®Œå…¨åŒ¹é…ï¼Œäºæ˜¯æœç´¢å®Œæˆã€‚å¦‚æœè¿˜è¦ç»§ç»­æœç´¢ï¼ˆå³æ‰¾å‡ºå…¨éƒ¨åŒ¹é…ï¼‰ï¼Œç§»åŠ¨ä½æ•° = 7 - 0ï¼Œå†å°†&lt;strong&gt;æœç´¢è¯&lt;/strong&gt;å‘åç§»åŠ¨7ä½ï¼Œè¿™é‡Œå°±ä¸å†é‡å¤äº†ã€‚&lt;/p&gt;
&lt;h3&gt;éƒ¨åˆ†åŒ¹é…è¡¨çš„äº§ç”Ÿ&lt;/h3&gt;
&lt;p&gt;ä¸‹é¢å¼€å§‹ä»‹ç»ä¸Šé¢çš„éƒ¨åˆ†åŒ¹é…è¡¨å¦‚ä½•äº§ç”Ÿçš„ï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆæ¥ç†è§£ä¸¤ä¸ªæ¦‚å¿µï¼š&lt;code&gt;å‰ç¼€&lt;/code&gt;å’Œ&lt;code&gt;åç¼€&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‰ç¼€&lt;/strong&gt;ï¼šæŒ‡é™¤äº†æœ€åä¸€ä¸ªå­—ç¬¦ä»¥å¤–ï¼Œä¸€ä¸ªå­—ç¬¦ä¸²çš„å…¨éƒ¨å¤´éƒ¨ç»„åˆã€‚ä»¥ä¸Šé¢çš„æœç´¢è¯ä¸ºä¾‹ï¼Œå°±æ˜¯[A,AB,ABC,ABCD,ABCDA,ABCDAB]&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åç¼€&lt;/strong&gt;ï¼šæŒ‡é™¤äº†ç¬¬ä¸€ä¸ªå­—ç¬¦ä»¥å¤–ï¼Œä¸€ä¸ªå­—ç¬¦ä¸²çš„å…¨éƒ¨å°¾éƒ¨ç»„åˆã€‚ä»¥ä¸Šé¢çš„æœç´¢è¯ä¸ºä¾‹ï¼Œå°±æ˜¯[BCDABD,CDABD,DABD,ABD,BD,D]&lt;/li&gt;
&lt;/ul&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æœç´¢è¯&lt;/th&gt;
&lt;th&gt;A&lt;/th&gt;
&lt;th&gt;B&lt;/th&gt;
&lt;th&gt;C&lt;/th&gt;
&lt;th&gt;D&lt;/th&gt;
&lt;th&gt;A&lt;/th&gt;
&lt;th&gt;B&lt;/th&gt;
&lt;th&gt;D&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;éƒ¨åˆ†åŒ¹é…å€¼&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æˆ‘ä»¬å†æ¥çœ‹ä¸Šé¢é‚£å¼ éƒ¨åˆ†åŒ¹é…è¡¨ï¼Œ&lt;code&gt;éƒ¨åˆ†åŒ¹é…å€¼&lt;/code&gt;å°±æ˜¯&lt;code&gt;å‰ç¼€&lt;/code&gt;å’Œ&lt;code&gt;åç¼€&lt;/code&gt;çš„æœ€é•¿çš„å…±æœ‰å…ƒç´ çš„é•¿åº¦ã€‚å¦‚ä½•ç†è§£å‘¢ï¼Ÿæˆ‘ä»¬è¿˜æ˜¯ä»¥ä¸Šé¢çš„æœç´¢è¯ä¸ºä¾‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;- &quot;A&quot;çš„å‰ç¼€å’Œåç¼€éƒ½ä¸ºç©ºé›†ï¼Œå…±æœ‰å…ƒç´ çš„é•¿åº¦ä¸º0ï¼›
- &quot;AB&quot;çš„å‰ç¼€ä¸º[A]ï¼Œåç¼€ä¸º[B]ï¼Œå…±æœ‰å…ƒç´ çš„é•¿åº¦ä¸º0ï¼›
- &quot;ABC&quot;çš„å‰ç¼€ä¸º[A, AB]ï¼Œåç¼€ä¸º[BC, C]ï¼Œå…±æœ‰å…ƒç´ çš„é•¿åº¦0ï¼›
- &quot;ABCD&quot;çš„å‰ç¼€ä¸º[A, AB, ABC]ï¼Œåç¼€ä¸º[BCD, CD, D]ï¼Œå…±æœ‰å…ƒç´ çš„é•¿åº¦ä¸º0ï¼›
- &quot;ABCDA&quot;çš„å‰ç¼€ä¸º[A, AB, ABC, ABCD]ï¼Œåç¼€ä¸º[BCDA, CDA, DA, A]ï¼Œå…±æœ‰å…ƒç´ ä¸º&quot;A&quot;ï¼Œé•¿åº¦ä¸º1ï¼›
- &quot;ABCDAB&quot;çš„å‰ç¼€ä¸º[A, AB, ABC, ABCD, ABCDA]ï¼Œåç¼€ä¸º[BCDAB, CDAB, DAB, AB, B]ï¼Œå…±æœ‰å…ƒç´ ä¸º&quot;AB&quot;ï¼Œé•¿åº¦ä¸º2ï¼›
- &quot;ABCDABD&quot;çš„å‰ç¼€ä¸º[A, AB, ABC, ABCD, ABCDA, ABCDAB]ï¼Œåç¼€ä¸º[BCDABD, CDABD, DABD, ABD, BD, D]ï¼Œå…±æœ‰å…ƒç´ çš„é•¿åº¦ä¸º0ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œä»¥æœç´¢è¯çš„å¼€å¤´åˆ°å½“å‰å­—ç¬¦ä½œä¸ºä¸€ä¸ªå­ä¸²ï¼Œç„¶åä»¥è¿™ä¸ªå­ä¸²çš„&lt;code&gt;å‰ç¼€&lt;/code&gt;å’Œ&lt;code&gt;åç¼€&lt;/code&gt;çš„æœ€é•¿çš„å…±æœ‰å…ƒç´ çš„é•¿åº¦ä½œä¸ºå½“å‰ä½ç½®çš„éƒ¨åˆ†åŒ¹é…å€¼ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆå¯ä»¥åˆ©ç”¨éƒ¨åˆ†åŒ¹é…å€¼è·³è¿‡ä¸€ä¸²å·²åŒ¹é…çš„å­—ç¬¦ä¸²å‘¢ï¼Ÿå…¶å®ï¼Œ&quot;éƒ¨åˆ†åŒ¹é…&quot;çš„å®è´¨æ˜¯ï¼Œæœ‰æ—¶å€™ï¼Œæœç´¢è¯å¤´éƒ¨å’Œå°¾éƒ¨ä¼šæœ‰é‡å¤ã€‚æ¯”å¦‚ï¼Œ&quot;ABCDAB&quot;ä¹‹ä¸­æœ‰ä¸¤ä¸ª&quot;AB&quot;ï¼Œé‚£ä¹ˆå®ƒçš„&lt;code&gt;éƒ¨åˆ†åŒ¹é…å€¼&lt;/code&gt;å°±æ˜¯2ï¼ˆ&quot;AB&quot;çš„é•¿åº¦ï¼‰ã€‚&lt;strong&gt;æœç´¢è¯&lt;/strong&gt;ç§»åŠ¨çš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ª&quot;AB&quot;å‘åç§»åŠ¨4ä½ï¼ˆå­—ç¬¦ä¸²é•¿åº¦-éƒ¨åˆ†åŒ¹é…å€¼ï¼‰ï¼Œå°±å¯ä»¥æ¥åˆ°ç¬¬äºŒä¸ª&quot;AB&quot;çš„ä½ç½®ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¿è¯è‡³å°‘åœ¨å‰ä¸¤ä¸ªå­—ç¬¦å†…ï¼Œ&lt;strong&gt;æºå­—ç¬¦ä¸²&lt;/strong&gt;å’Œ&lt;strong&gt;æœç´¢è¯&lt;/strong&gt;æ˜¯åŒ¹é…çš„ï¼Œè·³è¿‡äº†ä¸€äº›æ ¹æœ¬ä¸å¯èƒ½åŒ¹é…ä¸Šçš„å­—ç¬¦ã€‚&lt;/p&gt;
&lt;h3&gt;åŠ¨å›¾å±•ç¤º&lt;/h3&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€å¼ åŠ¨å›¾å±•ç¤ºæ•´ä¸ªè¿‡ç¨‹&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-string-search-KMP/20210529_01_010.gif&quot; alt=&quot;åŠ¨å›¾å±•ç¤º&quot; /&gt;&lt;/p&gt;
&lt;h3&gt;ä»£ç å®ç°&lt;/h3&gt;
&lt;p&gt;ç»è¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬å†æ¥åº”ç”¨KMPç®—æ³•æ¥å®ç°ä¸€ä¸‹&lt;a href=&quot;#%E5%BC%95%E8%A8%80&quot;&gt;å¼•è¨€&lt;/a&gt;ä¸­æåˆ°çš„ &lt;code&gt;strStr&lt;/code&gt; å‡½æ•°ã€‚åŸºæœ¬æ€è·¯å°±æ˜¯å…ˆä½¿ç”¨&lt;strong&gt;æœç´¢è¯&lt;/strong&gt;ç”Ÿæˆä¸€ä¸ªéƒ¨åˆ†åŒ¹é…è¡¨ï¼Œç„¶åä¾æ®è¿™ä¸ªéƒ¨åˆ†åŒ¹é…è¡¨è¿›è¡Œæœç´¢ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;public int strStr(String haystack, String needle) {
    if(needle.length() == 0){
        return 0;
    }

    int h = haystack.length();
    int n = needle.length();
    int[] pmt = new int[n];

    for (int i = 1, j = 0; i &amp;lt; n; i++) {
        while(j &amp;gt; 0 &amp;amp;&amp;amp; needle.charAt(i) != needle.charAt(j)){
            j = pmt[j - 1];
        }
        if(needle.charAt(i) == needle.charAt(j)){
            j++;
        }

        pmt[i] = j;
    }

    for (int i = 0, j = 0; i &amp;lt; h; i++) {
        while(j &amp;gt; 0 &amp;amp;&amp;amp; haystack.charAt(i) != needle.charAt(j)){
            j = pmt[j - 1];
        }
        if(haystack.charAt(i) == needle.charAt(j)){
            j++;
        }

        if(j == n){
            return i - n + 1;
        }
    }

    return -1;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;ç»“å°¾&lt;/h2&gt;
&lt;p&gt;ä¾æ®KMPç®—æ³•å®ç°å¹¶æäº¤ä»£ç ä¹‹åï¼Œleetcodeå¾ˆå¿«å°±æ‰§è¡Œé€šè¿‡äº†ï¼Œçœ‹åˆ°æ‰§è¡Œæ—¶é—´ï¼Œæƒ³ç€KMPç®—æ³•è¿˜æ˜¯æ¯”è¾ƒç²¾å¦™çš„å˜›ã€‚æ­¤æ—¶ï¼Œæˆ‘çªç„¶æƒ³èµ·æ¥æˆ‘åˆšå¼€å§‹åˆ·leetcodeçš„æ—¶å€™ï¼Œæ˜¯æŒ‰é¢˜åºåˆ·çš„ï¼ˆåˆ·è¿‡çš„åº”è¯¥çŸ¥é“ï¼Œé¢˜ç›®éš¾åº¦æ˜¯å¿½ä¸Šå¿½ä¸‹ï¼‰ï¼Œåˆ·è¿‡è¿™é“é¢˜å¹¶ä¸”å®ç°ä¹Ÿæ¯”è¾ƒç²—æš´ï¼Œæ˜¯ç›´æ¥è°ƒç”¨Javaç±»åº“Stringçš„indexOfæ–¹æ³•è§£å†³çš„ï¼Œäºæ˜¯æˆ‘æ‰“å¼€äº†æäº¤è®°å½•ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images.fanschou.com/blog/algorithm-string-search-KMP/20210529_01_009.webp&quot; alt=&quot;leetcodeæäº¤è®°å½•&quot; /&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘å¾ˆæƒŠå¥‡ï¼Œå› ä¸ºä¸Šæ¬¡æäº¤çš„æ¯”è¿™æ¬¡è¿˜è¦å¿«ã€‚æˆ‘å°±å‡èµ·äº†å¥½å¥‡å¿ƒï¼ŒJDKæºç ç©¶ç«Ÿæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿäºæ˜¯ä¹ï¼Œæˆ‘ç‚¹å¼€äº†JDKçš„æºç ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;static int indexOf(char[] source, int sourceOffset, int sourceCount,
        char[] target, int targetOffset, int targetCount,
        int fromIndex) {
    if (fromIndex &amp;gt;= sourceCount) {
        return (targetCount == 0 ? sourceCount : -1);
    }
    if (fromIndex &amp;lt; 0) {
        fromIndex = 0;
    }
    if (targetCount == 0) {
        return fromIndex;
    }

    char first = target[targetOffset];
    int max = sourceOffset + (sourceCount - targetCount);

    for (int i = sourceOffset + fromIndex; i &amp;lt;= max; i++) {
        /* Look for first character. */
        if (source[i] != first) {
            while (++i &amp;lt;= max &amp;amp;&amp;amp; source[i] != first);
        }

        /* Found first character, now look at the rest of v2 */
        if (i &amp;lt;= max) {
            int j = i + 1;
            int end = j + targetCount - 1;
            for (int k = targetOffset + 1; j &amp;lt; end &amp;amp;&amp;amp; source[j]
                    == target[k]; j++, k++);

            if (j == end) {
                /* Found whole string. */
                return i - sourceOffset;
            }
        }
    }
    return -1;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å—¯â€¦â€¦æš´åŠ›å¾ªç¯ï¼Œæœç„¶ï¼ŒåŠŸå¤«å†é«˜ï¼Œä¹Ÿæ€•èœåˆ€:)&lt;/p&gt;
</content:encoded><author>Fan Zhou</author></item><item><title>kafkaå®‰è£…é…ç½®</title><link>https://www.fanschou.com/posts/install/kafka-install-steps/</link><guid isPermaLink="true">https://www.fanschou.com/posts/install/kafka-install-steps/</guid><description>æœ¬æ–‡æ˜¯è®°å½•è‡ªå·±åœ¨å­¦ä¹  kafka æ—¶ç¬¬ä¸€æ¬¡è¿›è¡Œå¼€å‘ç¯å¢ƒæ­å»ºæ—¶è¸©è¿‡çš„ä¸€äº›å‘ï¼Œå†™æˆä¸€ä¸ªå®‰è£…æ•™ç¨‹ï¼Œæ–¹ä¾¿ä»¥åå†æ¬¡æ­å»ºå¼€å‘ç¯å¢ƒçš„æ—¶å€™è¿›è¡ŒæŸ¥çœ‹ï¼Œå®‰è£…æ•™ç¨‹ä¸»è¦ä»¥ Windows ç³»ç»Ÿè¿›è¡Œæ¼”ç¤ºï¼Œä½† Linux ä¸‹å¤§ä½“ç›¸åŒã€‚</description><pubDate>Tue, 25 Sep 2018 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;å‡†å¤‡å·¥ä½œ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å®‰è£…èµ„æ–™ä¸‹è½½
&lt;ul&gt;
&lt;li&gt;kafkaå®‰è£…åŒ…ï¼Œæ¥è‡ª&lt;a href=&quot;http://kafka.apache.org/downloads&quot;&gt;kafkaå®˜æ–¹ä¸‹è½½&lt;/a&gt;ï¼Œå¯ä»¥è‡ªè¡Œé€‰æ‹©ç‰ˆæœ¬
&lt;img src=&quot;https://images.fanschou.com/blog/kafka-install-steps/20180424_01_001.webp&quot; alt=&quot;kafkaå®˜æ–¹ä¸‹è½½&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;å¼€å§‹å®‰è£…&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹å®‰è£…æ˜¯åœ¨Windowsç³»ç»Ÿä¸‹æ‰§è¡Œï¼ŒLinuxç³»ç»Ÿç±»ä¼¼çš„åšè°ƒæ•´å³å¯&lt;/p&gt;
&lt;h3&gt;é…ç½®ä¿®æ”¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è§£å‹ç¼©ä¸‹è½½çš„å®‰è£…åŒ…åˆ°æœ¬åœ°ï¼Œå¼€å§‹ä¿®æ”¹é…ç½®
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;server.properties&lt;/code&gt;åœ¨æ ¹ç›®å½•çš„configæ–‡ä»¶å¤¹ä¸‹
log.dirs=ä¿®æ”¹ä¸ºä½ æ‰€ä½¿ç”¨ç³»ç»Ÿçš„è·¯å¾„
ä¾‹å¦‚Windowsä¸‹ï¼šD:/Dependency/kafka_2.12-1.1.0/logs/kafka-logs&lt;/li&gt;
&lt;li&gt;&lt;code&gt;zookeeper.properties&lt;/code&gt;åœ¨æ ¹ç›®å½•çš„configæ–‡ä»¶å¤¹ä¸‹
dataDir=ä¿®æ”¹ä¸ºä½ æ‰€ä½¿ç”¨ç³»ç»Ÿçš„è·¯å¾„
ä¾‹å¦‚Windowsä¸‹ï¼šD:/Dependency/kafka_2.12-1.1.0/logs/zookeeper-logs&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ä»¥ä¸Šä¿®æ”¹çš„ä¸¤ä¸ªæ–‡ä»¶ä¸»è¦æ˜¯å¯èƒ½ä¼šå¼•èµ·å¯åŠ¨é—®é¢˜çš„é…ç½®ï¼Œè‡³äºç«¯å£ç­‰è®¾ç½®å¯éšæ„è°ƒæ•´ï¼Œæ­¤å¤„é€‰æ‹©é»˜è®¤ç«¯å£å·å³å¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;å¯åŠ¨æ–‡ä»¶ä¿®æ”¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨æ ¹ç›®å½•ä¸‹æ‰¾åˆ°bin/windowsæ–‡ä»¶å¤¹ï¼Œç”¨æ–‡æœ¬ç¼–è¾‘å™¨ä¿®æ”¹&lt;code&gt;kafka-run-class.bat&lt;/code&gt;æ–‡ä»¶
&lt;img src=&quot;https://images.fanschou.com/blog/kafka-install-steps/20180424_01_002.webp&quot; alt=&quot;kafka-run-class&quot; /&gt;
æˆ‘ä»å®˜ç½‘ä¸‹è½½çš„æ˜¯ç¼–è¯‘å¥½çš„å®‰è£…åŒ…ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶é‡Œç•™æœ‰ä¸€äº›é—®é¢˜ï¼Œç”±äºå®‰è£…åŒ…å·²ç»ç¼–è¯‘å¥½ï¼Œå…¶å®ä¸Šé¢å¯¹æ–‡ä»¶å¤¹å¾ˆå¤šçš„æ‰«ææ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œæˆ‘åœ¨å®‰è£…ä¹‹åçš„å¯åŠ¨è¿‡ç¨‹ä¸­æŠ¥äº†ä¸€ä¸‹æ‰¾ä¸åˆ°ä¸»ç±»çš„é”™è¯¯ï¼Œç¢ç£¨äº†å¾ˆä¹…ï¼Œå°†ä¸Šé¢å¯¹ä¸€äº›æ— æ•ˆæ–‡ä»¶å¤¹çš„æ‰«æå…¨éƒ¨åˆ é™¤æ‰ï¼Œé‚è§£å†³äº†æŠ¥é”™çš„é—®é¢˜ã€‚ä½†æˆ‘ä¸èƒ½å®Œå…¨ç¡®å®šæ˜¯å¦æ˜¯å› ä¸ºè¿™ä¸ªå¯¼è‡´æŠ¥é”™ï¼Œå¦‚æœæœ‰å‡ºç°ç±»ä¼¼çš„é”™è¯¯ï¼Œå¯ä»¥è¯•ç€æ“ä½œä¸€ä¸‹ã€‚
å¦å¤–ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼ŒWindowsä¸‹çš„ç¯å¢ƒå˜é‡é…ç½®çš„æ—¶å€™ï¼Œæœ‰äº›ç›®å½•æ˜¯å¸¦æœ‰ç©ºæ ¼çš„ï¼Œè¿™ä¸ªä¹Ÿä¼šå¯¼è‡´æŠ¥é”™ï¼Œå…¸å‹çš„å°±æ˜¯å¦‚æœJDKå®‰è£…åœ¨Cç›˜çš„Program Filesä¸‹æ—¶çš„JAVA_HOMEé…ç½®
&lt;img src=&quot;https://images.fanschou.com/blog/kafka-install-steps/20180424_01_003.webp&quot; alt=&quot;kafka-run-class&quot; /&gt;
è¿™é‡Œå°†%CLASSPATH%å¤–é¢åŠ ä¸ŠåŒå¼•å·ï¼Œç”¨æ¥è§£å†³è¿™ç§æƒ…å†µ&lt;/li&gt;
&lt;li&gt;è¿™é‡Œå†å¤šè¯´ä¸€å¥ï¼Œæ—©å‰çš„kafkaç‰ˆæœ¬éœ€è¦é¢å¤–ä¸‹è½½ä¸€ä¸ªzookeeperï¼Œç”¨æ¥è¿è¡Œkafkaï¼Œç°åœ¨æ–°çš„ç‰ˆæœ¬å·²ç»è‡ªå¸¦äº†ä¸€ä¸ªzookeeperçš„serverï¼Œç›´æ¥å¯åŠ¨å³å¯ã€‚åé¢åœ¨å¯åŠ¨æœåŠ¡æ—¶ä¹Ÿä¼šæåˆ°ã€‚
åˆ°è¿™é‡Œï¼Œé…ç½®çš„é—®é¢˜åŸºæœ¬è§£å†³äº†ï¼Œä¸‹é¢å¼€å§‹å¯åŠ¨æœåŠ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;å¯åŠ¨æœåŠ¡&lt;/h3&gt;
&lt;p&gt;æ­¤å¤„ä»ä»¥Windowsä¸‹çš„æ“ä½œä¸ºä¾‹ï¼ŒLinuxä¸‹æ‰€ä¸åŒçš„æ˜¯æ‰§è¡Œshellè„šæœ¬è€Œéæ‰¹å¤„ç†æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆè¿›å…¥åˆ°ä½ è§£å‹çš„kafkaæ ¹ç›®å½•&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å¯åŠ¨zookeeper&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;./bin/windows/zookeeper-server-start.bat ./config/zookeeper.properties
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯åŠ¨kafka&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;./bin/windows/kafka-server-start.bat ./config/server.properties
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»ºtopicï¼Œè¿™é‡Œå‘½åä¸ºtest&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;./bin/windows/kafka-topics.bat --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯åŠ¨ç”Ÿäº§è€…å®¢æˆ·ç«¯&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;./bin/windows/kafka-console-producer.bat --broker-list localhost:9092 --topic test
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¯åŠ¨æ¶ˆè´¹è€…å®¢æˆ·ç«¯&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;./bin/windows/kafka-console-consumer.bat --bootstrap-server localhost:9092 --topic test --from-beginning This is a message
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;PSï¼šæœ€å¼€å§‹ï¼Œæˆ‘æ˜¯å•ç‹¬ä¸‹è½½zookeeperé…ç½®çš„serverï¼Œåœ¨å¯åŠ¨æ¶ˆè´¹è€…å®¢æˆ·ç«¯æ—¶ä¼šå‘ç”ŸæŠ¥é”™ï¼Œä½†æ˜¯ä¾æ—§å¯ä»¥å®Œæˆå‘é€å’Œè®¢é˜…çš„æ“ä½œï¼Œä¹ŸæŠŠå¯åŠ¨å‘½ä»¤è®°åœ¨ä¸‹é¢&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;./bin/windows/kafka-console-consumer.bat --zookeeper localhost:2181 --topic test
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ¥ä¸‹æ¥å°±å¯ä»¥åœ¨ç¬¬4æ­¥æ‰“å¼€çš„å®¢æˆ·ç«¯ä¸Šè¾“å…¥ä¿¡æ¯å¹¶å›è½¦ï¼Œå†è¿›å…¥ç¬¬5æ­¥æ‰“å¼€çš„å®¢æˆ·ç«¯ä¸ŠæŸ¥çœ‹æ˜¯å¦æ”¶åˆ°äº†è®¢é˜…&lt;/p&gt;
&lt;p&gt;å¦‚æœå¯ä»¥æ”¶åˆ°ä¿¡æ¯ï¼Œé‚£ä¹ˆè¿™éƒ¨åˆ†çš„ç¯å¢ƒæ­å»ºå·²ç»å®Œæˆ&lt;/p&gt;
</content:encoded><author>Fan Zhou</author></item><item><title>Hexoå®‰è£…éƒ¨ç½²ä¸åŒæ­¥</title><link>https://www.fanschou.com/posts/install/hexo-install-steps/</link><guid isPermaLink="true">https://www.fanschou.com/posts/install/hexo-install-steps/</guid><description>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•å®‰è£… Hexo ç”Ÿæˆé™æ€åšå®¢ï¼Œä»¥åŠå¦‚ä½•å°†ç”Ÿæˆçš„é™æ€åšå®¢éƒ¨ç½² Github Pages ä¸Šä¾›å¤–éƒ¨è®¿é—®ã€‚åŒæ—¶æˆ‘ä»¬åˆ©ç”¨ Github çš„ä»“åº“è¿›è¡Œé™æ€ç½‘é¡µå’Œåšå®¢ä¹¦å†™ç¯å¢ƒçš„åŒæ­¥ï¼Œæ–¹ä¾¿åœ¨ä¸åŒçš„å†™ä½œç¯å¢ƒä¸­è¿›è¡Œåˆ‡æ¢ã€‚</description><pubDate>Thu, 16 Aug 2018 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨Â &lt;a href=&quot;http://daringfireball.net/projects/markdown/&quot;&gt;Markdown&lt;/a&gt;ï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†é€‚åº”åœ¨å¤šä¸ªè®¾å¤‡åˆ‡æ¢è¿›è¡Œåšå®¢ä¹¦å†™çš„è¦æ±‚ï¼Œåˆ©ç”¨ Github ä»“åº“çš„åˆ†æ”¯åˆ†åˆ«å­˜å‚¨ Hexo æºæ–‡ä»¶å’Œå‘å¸ƒå‡ºå»çš„é™æ€ç½‘é¡µï¼Œè¿™æ ·åªéœ€åœ¨ä¸åŒè®¾å¤‡ä¸Šå°†æºæ–‡ä»¶åˆ†æ”¯åŒæ­¥ä¹‹åï¼Œå³å¯ç›´æ¥è¿›è¡Œä¿®æ”¹æºæ–‡ä»¶è¿›è¡Œå‘å¸ƒï¼ŒåŒæ—¶ä¿®æ”¹çš„æºæ–‡ä»¶ä¹Ÿå¯ä»¥æäº¤åˆ°ä»“åº“çš„åˆ†æ”¯ä¸Šã€‚&lt;/p&gt;
&lt;h2&gt;å®‰è£…&lt;/h2&gt;
&lt;h3&gt;å®‰è£…å‰æ&lt;/h3&gt;
&lt;p&gt;å®‰è£… Hexo ç›¸å½“ç®€å•ã€‚ç„¶è€Œåœ¨å®‰è£…å‰ï¼Œä½ å¿…é¡»æ£€æŸ¥ç”µè„‘ä¸­æ˜¯å¦å·²å®‰è£…ä¸‹åˆ—åº”ç”¨ç¨‹åºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://nodejs.org/zh-cn/&quot;&gt;Node.js&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://git-scm.com/&quot;&gt;Git&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœä½ çš„ç”µè„‘ä¸­å·²ç»å®‰è£…ä¸Šè¿°å¿…å¤‡ç¨‹åºï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥åªéœ€è¦ä½¿ç”¨ npm å³å¯å®Œæˆ Hexo çš„å®‰è£…ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;npm install -g hexo
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¦‚æœä½ çš„ç”µè„‘ä¸­å°šæœªå®‰è£…æ‰€éœ€è¦çš„ç¨‹åºï¼Œè¯·æ ¹æ®ä»¥ä¸‹å®‰è£…æŒ‡ç¤ºå®Œæˆå®‰è£…ã€‚&lt;/p&gt;
&lt;h3&gt;å®‰è£… Git&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Windowsï¼šç‚¹å‡»ä¸Šé¢çš„é“¾æ¥å»å®˜ç½‘ä¸‹è½½åè¿›è¡Œå®‰è£…ï¼Œè®°ä½åœ¨å®‰è£…çš„é€‰é¡¹ä¸­å‹¾é€‰&lt;strong&gt;Add to PATH&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Linux (Ubuntu, Debian)ï¼š&lt;code&gt;sudo apt-get install git-core&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Linux (Fedora, Red Hat, CentOS)ï¼š&lt;code&gt;sudo yum install git-core&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;å®‰è£… Node.js&lt;/h3&gt;
&lt;p&gt;å¯ä»¥ç›´æ¥ä¸‹è½½Â &lt;a href=&quot;https://nodejs.org/zh-cn/&quot;&gt;å®‰è£…ç¨‹åº&lt;/a&gt;Â æ¥å®‰è£…ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºåœ¨Windowsä¸Šå®‰è£…çš„ç”¨æˆ·æ¥è¯´ï¼Œå’ŒGitä¸€æ ·è®°ä½åœ¨å®‰è£…çš„é€‰é¡¹ä¸­å‹¾é€‰&lt;strong&gt;Add to PATH&lt;/strong&gt;é€‰é¡¹ã€‚&lt;/p&gt;
&lt;h3&gt;å®‰è£… Hexo&lt;/h3&gt;
&lt;p&gt;æ‰€æœ‰å¿…å¤‡çš„åº”ç”¨ç¨‹åºå®‰è£…å®Œæˆåï¼Œå³å¯ä½¿ç”¨ npm å®‰è£… Hexoã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;npm install -g hexo
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç„¶åè¾“å…¥å‘½ä»¤&lt;code&gt;hexo -v&lt;/code&gt;ï¼Œå›è½¦åè¾“å‡ºhexoçš„ç‰ˆæœ¬å·å³ä¸ºå®‰è£…æˆåŠŸ&lt;/p&gt;
&lt;h2&gt;éƒ¨ç½²&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹å†…å®¹çš†æ˜¯åœ¨Windowsç¯å¢ƒä¸‹çš„æ“ä½œã€‚&lt;/p&gt;
&lt;h3&gt;Githubå‡†å¤‡&lt;/h3&gt;
&lt;p&gt;åšå®¢æ˜¯åœ¨&lt;a href=&quot;https://github.com/&quot;&gt;Github&lt;/a&gt;ä¸Šæ‰˜ç®¡ç»´æŠ¤çš„ï¼Œæ‰€ä»¥å½“ç„¶éœ€è¦ä¸€ä¸ªGithubçš„è´¦å·äº†ã€‚æˆ‘çš„Githubè´¦å·æ˜¯FansChouï¼Œæ‰€ä»¥æˆ‘åˆ›å»ºçš„ä»“åº“åå­—å°±æ˜¯&lt;code&gt;FansChou.github.io&lt;/code&gt;ã€‚è¿™é‡Œè´¦å·çš„å¤§å°å†™æœ‰æ²¡æœ‰å½±å“ï¼Œæˆ‘æ²¡æœ‰è¯•éªŒï¼Œæ ¹æ®æˆ‘çš„è§‚å¯Ÿåº”è¯¥æ˜¯ä¸å½±å“çš„ã€‚&lt;/p&gt;
&lt;p&gt;å»ºä»“åº“æ—¶ï¼Œåå­—å›ºå®šä¸º &lt;code&gt;ä½ çš„è´¦å·.github.io&lt;/code&gt; è¿™æ ·çš„å½¢å¼ï¼Œè‡³äºä¸ºä»€ä¹ˆæ˜¯è¿™ç§å½¢å¼ï¼Œæ˜¯å› ä¸º Github Pages æä¾›äº†2ç§ç±»å‹çš„é¡µé¢&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ç§æ˜¯ &lt;code&gt;Project Pages&lt;/code&gt; ï¼Œç”¨æ¥ä½œä¸ºä»£ç ä»“åº“çš„ä¸€ä¸ªé™æ€é¡µé¢è¯´æ˜ï¼Œè¿™ä¸ªæ˜¯æ¯ä¸ªä»£ç ä»“åº“éƒ½æ˜¯å¯ä»¥æœ‰ä¸€ä¸ªçš„&lt;/li&gt;
&lt;li&gt;ä¸€ç§æ˜¯ &lt;code&gt;User Pages&lt;/code&gt; ï¼Œæ˜¯æä¾›ç»™æ•´ä¸ªè´¦å·çš„ï¼Œæ¯ä¸ªè´¦å·æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼Œæ˜¯å¯ä»¥ç›´æ¥é€šè¿‡&lt;code&gt;ä½ çš„è´¦å·.github.io&lt;/code&gt;å»è¿™ä¸ªåœ°å€å»è®¿é—®ç½‘é¡µçš„ï¼Œæ‰€ä»¥å¿…é¡»å†™æˆä¸Šé¢çš„é‚£ç§æ ¼å¼ã€‚æˆ‘ä»¬è¦éƒ¨ç½²çš„å°±æ˜¯åä¸€ç§çš„ &lt;code&gt;User Pages&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œ è¦æƒ³ä½¿ç”¨Gitè¿›è¡Œä¸è¿œç¨‹ä»“åº“çš„äº¤äº’ï¼Œè¿˜éœ€è¦ä¸€äº›é…ç½®ï¼Œè¿™äº›çŸ¥è¯†å¯ä»¥å»ç½‘ä¸Šæœç´¢å­¦ä¹ ï¼Œè¿™é‡Œåªåˆ—å‡ºæˆ‘ä»¬éœ€è¦çš„ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;é¦–å…ˆï¼Œè®¾å®šæœ¬åœ°çš„é‚®ç®±å’Œç”¨æˆ·å&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git config --global user.email xxx@gmail.com
git config --global user.name xxx
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç„¶åç”ŸæˆSSHå…¬é’¥&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cd c:/user/fans/.ssh
ssh-keygen -t rsa -C xxx@gmail.com
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™é‡Œéœ€è¦è¯´æ˜ä¸¤ä»¶äº‹ï¼šé¦–å…ˆç”Ÿæˆå…¬é’¥çš„æ—¶å€™ï¼Œæœ€å¥½è¿›å…¥å½“å‰ç”¨æˆ·çš„ &lt;code&gt;.ssh&lt;/code&gt; ç›®å½•ä¸‹ï¼Œå†å»ç”Ÿæˆï¼Œç¬¬ä¸€æ¬¡è¯•çš„æ—¶å€™ï¼Œåœ¨å…¶ä»–åœ°æ–¹ç”Ÿæˆçš„ï¼Œæœ€åè¿›è¡ŒåŒæ­¥çš„æ—¶å€™æ‰¾ä¸åˆ°å…¬é’¥ï¼›å¦å¤–å°±æ˜¯æœ€åçš„å…¬é’¥åç§°è¦ä»¥ &lt;code&gt;id_&lt;/code&gt; å¼€å¤´ï¼Œè¿™ä¸ªæ¯”è¾ƒå¥‡æ€ªï¼Œæœ€å¼€å§‹æˆ‘èµ·äº†ä¸€ä¸ªhexoçš„åå­—ï¼ŒåŒæ­¥çš„æ—¶å€™åŒæ ·æŠ¥æ‰¾ä¸åˆ°å…¬é’¥ï¼Œä¹Ÿæ˜¯å¾ˆéƒé—·ï¼Œæœ€åè¿˜æ˜¯æ”¹æˆäº† &lt;code&gt;id_rsa&lt;/code&gt; ï¼Œæ²¡ä»€ä¹ˆç‰¹æ®Šè¦æ±‚çš„è¯ï¼Œè¿˜æ˜¯ä¸ä½œå¦–äº†ï¼Œå“ˆå“ˆ~&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ·»åŠ SSHå…¬é’¥åˆ°Githubè´¦æˆ·&lt;/p&gt;
&lt;p&gt;å°† &lt;code&gt;.ssh&lt;/code&gt; ç›®å½•ä¸‹çš„ &lt;code&gt;id_rsa.pub&lt;/code&gt; æ–‡ä»¶ç”¨ VS CODE æ‰“å¼€ï¼Œå¤åˆ¶é‡Œé¢çš„å†…å®¹ã€‚ç™»é™†Githubï¼Œé€‰æ‹©settings ï¼ SSH keys  ï¼ add ssh keysï¼Œç„¶åæŠŠå¤åˆ¶çš„å†…å®¹å…¨éƒ¨ç²˜è´´è¿›å»å³å¯&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;åˆå§‹åŒ–&lt;/h3&gt;
&lt;p&gt;ç»è¿‡ä»¥ä¸Šçš„æ­¥éª¤ï¼Œå‡†å¤‡å·¥ä½œç®—æ˜¯åšå¥½äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯åˆå§‹åŒ–ä¸€ä¸ªHexoç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºè¦ä½¿ç”¨ Github è¿›è¡ŒåŒæ­¥ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥å…ˆå°†å»ºå¥½çš„ä»“åº“cloneä¸€ä»½åˆ°æœ¬åœ°ã€‚æ‰¾åˆ°ä¹‹å‰å»ºå¥½çš„ä»“åº“åœ°å€ï¼Œè¿›è¡Œclone&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git clone git@github.com:FansChou/FansChou.github.io.git
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;cloneçš„åœ°æ–¹ä¼šæœ‰ä¸€ä¸ªæ–‡ä»¶å¤¹ç”Ÿæˆï¼Œåå­—å’Œä»“åº“åä¸€æ · &lt;code&gt;FansChou.github.io&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åï¼Œä½¿ç”¨ Hexo è¿›è¡Œåˆå§‹åŒ–ï¼Œåœ¨ä½ æœ¬åœ°æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿›å…¥ä¹‹åï¼Œå³é”®é€‰æ‹© &lt;code&gt;Git Bash Here&lt;/code&gt; è¿›å…¥å‘½ä»¤è¡Œï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hexo init
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å°†åˆšåˆšç”Ÿæˆçš„æ–‡ä»¶æ‹·è´è‡³ä»ä»“åº“cloneç”Ÿæˆçš„æ–‡ä»¶å¤¹ &lt;code&gt;FansChou.github.io&lt;/code&gt; é‡Œé¢ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œä¹‹æ‰€ä»¥ä¸ç›´æ¥åœ¨ &lt;code&gt;FansChou.github.io&lt;/code&gt; ç”Ÿæˆhexoæºæ–‡ä»¶ï¼Œæ˜¯å› ä¸ºåœ¨æ‰§è¡Œhexoå‘½ä»¤çš„æ—¶å€™è¦æ±‚æ‰€åœ¨ç›®å½•æ˜¯ä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åæˆ‘ä»¬ç”Ÿæˆé™æ€æ–‡ä»¶å¹¶åœ¨æœ¬åœ°å¯åŠ¨ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hexo g
hexo s
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¿›å…¥æµè§ˆå™¨è®¿é—® http://localhost:4000 å°±å¯ä»¥è¿›å…¥hexoä¸»é¡µé¢äº†ï¼Œæ­¤æ—¶çš„é¦–é¡µåº”è¯¥æ˜¯ä¸€ä¸ªHelloworldé¡µé¢ã€‚&lt;/p&gt;
&lt;h3&gt;åŒæ­¥åšå®¢æºæ–‡ä»¶&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨Githubè¿›è¡Œæºæ–‡ä»¶åŒæ­¥çš„æ‰“ç®—ï¼Œé‚£ä¹ˆè¯·ç›´æ¥è¿›å…¥ä¸‹ä¸€èŠ‚è¿›è¡Œå‘å¸ƒå§ï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™ä¸ªæ—¶å€™æœ¬åœ°å·²ç»å¯ä»¥é¢„è§ˆåˆ°åšå®¢çš„ç•Œé¢äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯åˆ©ç”¨ Github å»åŒæ­¥ Hexo çš„æºæ–‡ä»¶ã€‚è¿™é‡Œçš„åšæ³•æ˜¯å»ºç«‹2ä¸ªåˆ†æ”¯ï¼Œä¸€ä¸ªæ˜¯masterï¼Œä¸€ä¸ªæ˜¯sourceï¼Œmasteråˆ†æ”¯ç”¨æ¥å‘å¸ƒç”Ÿæˆçš„é™æ€ç½‘é¡µï¼Œsourceåˆ™ç”¨æ¥åŒæ­¥ Hexo çš„æºæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;å»ºå¥½ä»“åº“åé»˜è®¤ä¼šæœ‰ä¸€ä¸ªmasteråˆ†æ”¯ï¼Œæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªsourceåˆ†æ”¯ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆè¿›å…¥&lt;code&gt;FansChou.github.io&lt;/code&gt;æ–‡ä»¶å¤¹ï¼Œå³é”®é€‰æ‹© &lt;code&gt;Git Bash Here&lt;/code&gt; è¿›å…¥å‘½ä»¤è¡Œï¼Œåˆ›å»ºå¹¶åˆ‡æ¢åˆ°sourceåˆ†æ”¯ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git checkout -b source
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å°†æ–°åˆ†æ”¯æ¨é€ç»™Githubï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git push origin source
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªæ—¶å€™ç™»å½•Githubå»çœ‹ä½ çš„ä»“åº“ï¼Œä¼šå‘ç°å¤šäº†ä¸€ä¸ªsourceçš„åˆ†æ”¯ï¼Œå»ºè®®æŠŠå®ƒè®¾ç½®ä¸ºé»˜è®¤åˆ†æ”¯ï¼Œå› ä¸ºåç»­çš„Gitæäº¤éƒ½æ˜¯é’ˆå¯¹è¿™ä¸ªåˆ†æ”¯çš„ã€‚masteråˆ†æ”¯ä½œä¸ºé™æ€ç½‘é¡µçš„å­˜æ”¾åœ°ç‚¹ï¼Œä¸€èˆ¬ä¸ä¼šç›´æ¥ç”¨Gitå‘½ä»¤å»æäº¤ï¼Œè€Œæ˜¯é€šè¿‡hexoæ’ä»¶å»ä¸€æ¬¡æ€§éƒ¨ç½²æäº¤ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åæˆ‘ä»¬æŠŠæœ¬åœ°çš„æºæ–‡ä»¶å…¨éƒ¨æäº¤è¿›ä»“åº“çš„sourceåˆ†æ”¯ï¼Œåœ¨æ‰§è¡ŒGitå‘½ä»¤ä¹‹å‰ï¼Œè¯·åŠ¡å¿…ç¡®è®¤æœ¬åœ°å¤„äºsourceåˆ†æ”¯ä¸‹ï¼Œ&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git add .
git commit -m &quot;é¦–æ¬¡æäº¤&quot; #æäº¤æ³¨é‡Š
git push origin source
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ç°åœ¨è¿œç¨‹ä»“åº“çš„sourceåˆ†æ”¯ä¸Šå°±æœ‰äº†ä½ çš„æºæ–‡ä»¶ï¼Œå½“ä½ ä¹‹åéœ€è¦åˆ‡æ¢å¦ä¸€ä¸ªè®¾å¤‡è¿›è¡Œåšå®¢æ’°å†™çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥ç”±ä»“åº“è¿›è¡Œcloneã€‚&lt;/p&gt;
&lt;h3&gt;å‘å¸ƒåšå®¢&lt;/h3&gt;
&lt;p&gt;æ¥ä¸‹æ¥å°±æ˜¯å°†å‘å¸ƒåšå®¢åˆ° Github Pages ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;å‘å¸ƒä¹‹å‰å…ˆä¿®æ”¹ &lt;code&gt;FansChou.github.io/_config.yml&lt;/code&gt;æ–‡ä»¶ä¸­çš„&lt;code&gt;deploy&lt;/code&gt;æ ‡ç­¾ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;deploy:
    type: git
    repository: git@github.com:FansChou/FansChou.github.io.git
    branch: master
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;repositoryæ¢æˆä½ è‡ªå·±çš„ä»“åº“åœ°å€ï¼Œbranché»˜è®¤æ˜¯masterï¼Œç„¶ååœ¨&lt;code&gt;Git Bash Here&lt;/code&gt;å‘½ä»¤è¡Œé‡Œé¢å®‰è£…deployæ’ä»¶ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;npm install hexo-deployer-git --save
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿›è¡Œgenerateç”Ÿæˆé™æ€æ–‡ä»¶å¹¶æäº¤ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hexo deploy -g
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æäº¤å®Œæˆä¹‹åå°±å¯ä»¥ç›´æ¥ç”¨&lt;code&gt;ä½ çš„è´¦å·.github.io&lt;/code&gt;å»è®¿é—®ä½ çš„åšå®¢ç½‘ç«™å•¦ï¼&lt;/p&gt;
&lt;h2&gt;æ’°å†™åšå®¢&lt;/h2&gt;
&lt;h2&gt;æ–°å»ºæ–‡ç« &lt;/h2&gt;
&lt;p&gt;è¿™é‡Œåªç®€å•ä»‹ç»ä¸€ä¸‹å¦‚ä½•æ–°å»ºä¸€ç¯‡æ–‡ç« ï¼Œå…·ä½“çš„ä¸€äº›ä½¿ç”¨ï¼Œå¯ä»¥ç›´æ¥å»&lt;a href=&quot;https://hexo.io/zh-cn/docs/&quot;&gt;Hexoçš„å®˜æ–¹æ–‡æ¡£&lt;/a&gt;å»å­¦ä¹ ã€‚&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œæ–°å»ºæ–‡ç« å‘½ä»¤ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;hexo n &quot;æ–‡ç« åç§°&quot;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™ä¸ªæ—¶å€™åœ¨&lt;code&gt;FansChou.github.io/source/_posts&lt;/code&gt;å°±ä¼šæœ‰ä¸€ä¸ª&lt;code&gt;æ–‡ç« åç§°.md&lt;/code&gt;çš„æ–‡ä»¶ï¼Œç›´æ¥è¿›è¡Œç¼–è¾‘ï¼Œç„¶åé‡æ–°generateå‘å¸ƒå³å¯ã€‚&lt;/p&gt;
</content:encoded><author>Fan Zhou</author></item></channel></rss>